function HP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Eh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function b1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var D1={exports:{}},gd={},N1={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wl=Symbol.for("react.element"),KP=Symbol.for("react.portal"),GP=Symbol.for("react.fragment"),qP=Symbol.for("react.strict_mode"),QP=Symbol.for("react.profiler"),YP=Symbol.for("react.provider"),XP=Symbol.for("react.context"),JP=Symbol.for("react.forward_ref"),ZP=Symbol.for("react.suspense"),eA=Symbol.for("react.memo"),tA=Symbol.for("react.lazy"),Py=Symbol.iterator;function nA(t){return t===null||typeof t!="object"?null:(t=Py&&t[Py]||t["@@iterator"],typeof t=="function"?t:null)}var M1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V1=Object.assign,L1={};function So(t,e,n){this.props=t,this.context=e,this.refs=L1,this.updater=n||M1}So.prototype.isReactComponent={};So.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};So.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function O1(){}O1.prototype=So.prototype;function fm(t,e,n){this.props=t,this.context=e,this.refs=L1,this.updater=n||M1}var pm=fm.prototype=new O1;pm.constructor=fm;V1(pm,So.prototype);pm.isPureReactComponent=!0;var Ay=Array.isArray,F1=Object.prototype.hasOwnProperty,mm={current:null},j1={key:!0,ref:!0,__self:!0,__source:!0};function B1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)F1.call(e,r)&&!j1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:wl,type:t,key:s,ref:o,props:i,_owner:mm.current}}function rA(t,e){return{$$typeof:wl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gm(t){return typeof t=="object"&&t!==null&&t.$$typeof===wl}function iA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ry=/\/+/g;function Th(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iA(""+t.key):e.toString(36)}function Uu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case wl:case KP:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Th(o,0):r,Ay(i)?(n="",t!=null&&(n=t.replace(Ry,"$&/")+"/"),Uu(i,e,n,"",function(u){return u})):i!=null&&(gm(i)&&(i=rA(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ry,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Ay(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Th(s,a);o+=Uu(s,e,n,l,i)}else if(l=nA(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Th(s,a++),o+=Uu(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function fu(t,e,n){if(t==null)return t;var r=[],i=0;return Uu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function sA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $t={current:null},zu={transition:null},oA={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:zu,ReactCurrentOwner:mm};function U1(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:fu,forEach:function(t,e,n){fu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fu(t,function(){e++}),e},toArray:function(t){return fu(t,function(e){return e})||[]},only:function(t){if(!gm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=So;fe.Fragment=GP;fe.Profiler=QP;fe.PureComponent=fm;fe.StrictMode=qP;fe.Suspense=ZP;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oA;fe.act=U1;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=V1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=mm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)F1.call(e,l)&&!j1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:wl,type:t.type,key:i,ref:s,props:r,_owner:o}};fe.createContext=function(t){return t={$$typeof:XP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:YP,_context:t},t.Consumer=t};fe.createElement=B1;fe.createFactory=function(t){var e=B1.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:JP,render:t}};fe.isValidElement=gm;fe.lazy=function(t){return{$$typeof:tA,_payload:{_status:-1,_result:t},_init:sA}};fe.memo=function(t,e){return{$$typeof:eA,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=zu.transition;zu.transition={};try{t()}finally{zu.transition=e}};fe.unstable_act=U1;fe.useCallback=function(t,e){return $t.current.useCallback(t,e)};fe.useContext=function(t){return $t.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return $t.current.useDeferredValue(t)};fe.useEffect=function(t,e){return $t.current.useEffect(t,e)};fe.useId=function(){return $t.current.useId()};fe.useImperativeHandle=function(t,e,n){return $t.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return $t.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return $t.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return $t.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return $t.current.useReducer(t,e,n)};fe.useRef=function(t){return $t.current.useRef(t)};fe.useState=function(t){return $t.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return $t.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return $t.current.useTransition()};fe.version="18.3.1";N1.exports=fe;var M=N1.exports;const Bt=b1(M),aA=HP({__proto__:null,default:Bt},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lA=M,uA=Symbol.for("react.element"),cA=Symbol.for("react.fragment"),dA=Object.prototype.hasOwnProperty,hA=lA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fA={key:!0,ref:!0,__self:!0,__source:!0};function z1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)dA.call(e,r)&&!fA.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:uA,type:t,key:s,ref:o,props:i,_owner:hA.current}}gd.Fragment=cA;gd.jsx=z1;gd.jsxs=z1;D1.exports=gd;var N=D1.exports,$1={exports:{}},hn={},W1={exports:{}},H1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,z){var Q=F.length;F.push(z);e:for(;0<Q;){var J=Q-1>>>1,H=F[J];if(0<i(H,z))F[J]=z,F[Q]=H,Q=J;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var z=F[0],Q=F.pop();if(Q!==z){F[0]=Q;e:for(var J=0,H=F.length,X=H>>>1;J<X;){var he=2*(J+1)-1,de=F[he],Z=he+1,q=F[Z];if(0>i(de,Q))Z<H&&0>i(q,de)?(F[J]=q,F[Z]=Q,J=Z):(F[J]=de,F[he]=Q,J=he);else if(Z<H&&0>i(q,Q))F[J]=q,F[Z]=Q,J=Z;else break e}}return z}function i(F,z){var Q=F.sortIndex-z.sortIndex;return Q!==0?Q:F.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,p=3,h=!1,g=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(F){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=F)r(u),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(u)}}function k(F){if(m=!1,E(F),!g)if(n(l)!==null)g=!0,K(S);else{var z=n(u);z!==null&&U(k,z.startTime-F)}}function S(F,z){g=!1,m&&(m=!1,w(y),y=-1),h=!0;var Q=p;try{for(E(z),f=n(l);f!==null&&(!(f.expirationTime>z)||F&&!A());){var J=f.callback;if(typeof J=="function"){f.callback=null,p=f.priorityLevel;var H=J(f.expirationTime<=z);z=t.unstable_now(),typeof H=="function"?f.callback=H:f===n(l)&&r(l),E(z)}else r(l);f=n(l)}if(f!==null)var X=!0;else{var he=n(u);he!==null&&U(k,he.startTime-z),X=!1}return X}finally{f=null,p=Q,h=!1}}var R=!1,T=null,y=-1,I=5,C=-1;function A(){return!(t.unstable_now()-C<I)}function b(){if(T!==null){var F=t.unstable_now();C=F;var z=!0;try{z=T(!0,F)}finally{z?D():(R=!1,T=null)}}else R=!1}var D;if(typeof x=="function")D=function(){x(b)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,O=B.port2;B.port1.onmessage=b,D=function(){O.postMessage(null)}}else D=function(){v(b,0)};function K(F){T=F,R||(R=!0,D())}function U(F,z){y=v(function(){F(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){g||h||(g=!0,K(S))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var Q=p;p=z;try{return F()}finally{p=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,z){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Q=p;p=F;try{return z()}finally{p=Q}},t.unstable_scheduleCallback=function(F,z,Q){var J=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?J+Q:J):Q=J,F){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Q+H,F={id:c++,callback:z,priorityLevel:F,startTime:Q,expirationTime:H,sortIndex:-1},Q>J?(F.sortIndex=Q,e(u,F),n(l)===null&&F===n(u)&&(m?(w(y),y=-1):m=!0,U(k,Q-J))):(F.sortIndex=H,e(l,F),g||h||(g=!0,K(S))),F},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(F){var z=p;return function(){var Q=p;p=z;try{return F.apply(this,arguments)}finally{p=Q}}}})(H1);W1.exports=H1;var pA=W1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mA=M,cn=pA;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var K1=new Set,Oa={};function ps(t,e){so(t,e),so(t+"Capture",e)}function so(t,e){for(Oa[t]=e,t=0;t<e.length;t++)K1.add(e[t])}var Pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pf=Object.prototype.hasOwnProperty,gA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ky={},by={};function vA(t){return Pf.call(by,t)?!0:Pf.call(ky,t)?!1:gA.test(t)?by[t]=!0:(ky[t]=!0,!1)}function yA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wA(t,e,n,r){if(e===null||typeof e>"u"||yA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Wt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gt[t]=new Wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gt[e]=new Wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gt[t]=new Wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gt[t]=new Wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gt[t]=new Wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gt[t]=new Wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gt[t]=new Wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gt[t]=new Wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gt[t]=new Wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var vm=/[\-:]([a-z])/g;function ym(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vm,ym);gt[e]=new Wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vm,ym);gt[e]=new Wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vm,ym);gt[e]=new Wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gt[t]=new Wt(t,1,!1,t.toLowerCase(),null,!1,!1)});gt.xlinkHref=new Wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gt[t]=new Wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function wm(t,e,n,r){var i=gt.hasOwnProperty(e)?gt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wA(e,n,i,r)&&(n=null),r||i===null?vA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vr=mA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pu=Symbol.for("react.element"),ks=Symbol.for("react.portal"),bs=Symbol.for("react.fragment"),xm=Symbol.for("react.strict_mode"),Af=Symbol.for("react.profiler"),G1=Symbol.for("react.provider"),q1=Symbol.for("react.context"),_m=Symbol.for("react.forward_ref"),Rf=Symbol.for("react.suspense"),kf=Symbol.for("react.suspense_list"),Em=Symbol.for("react.memo"),Kr=Symbol.for("react.lazy"),Q1=Symbol.for("react.offscreen"),Dy=Symbol.iterator;function qo(t){return t===null||typeof t!="object"?null:(t=Dy&&t[Dy]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,Sh;function ia(t){if(Sh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Sh=e&&e[1]||""}return`
`+Sh+t}var Ch=!1;function Ih(t,e){if(!t||Ch)return"";Ch=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ch=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ia(t):""}function xA(t){switch(t.tag){case 5:return ia(t.type);case 16:return ia("Lazy");case 13:return ia("Suspense");case 19:return ia("SuspenseList");case 0:case 2:case 15:return t=Ih(t.type,!1),t;case 11:return t=Ih(t.type.render,!1),t;case 1:return t=Ih(t.type,!0),t;default:return""}}function bf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bs:return"Fragment";case ks:return"Portal";case Af:return"Profiler";case xm:return"StrictMode";case Rf:return"Suspense";case kf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case q1:return(t.displayName||"Context")+".Consumer";case G1:return(t._context.displayName||"Context")+".Provider";case _m:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Em:return e=t.displayName||null,e!==null?e:bf(t.type)||"Memo";case Kr:e=t._payload,t=t._init;try{return bf(t(e))}catch{}}return null}function _A(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bf(e);case 8:return e===xm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Y1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function EA(t){var e=Y1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function mu(t){t._valueTracker||(t._valueTracker=EA(t))}function X1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Y1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function pc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Df(t,e){var n=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ny(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=yi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function J1(t,e){e=e.checked,e!=null&&wm(t,"checked",e,!1)}function Nf(t,e){J1(t,e);var n=yi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mf(t,e.type,yi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function My(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Mf(t,e,n){(e!=="number"||pc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sa=Array.isArray;function qs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Vf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Vy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(sa(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yi(n)}}function Z1(t,e){var n=yi(e.value),r=yi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ly(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function e_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?e_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gu,t_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gu=gu||document.createElement("div"),gu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var va={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TA=["Webkit","ms","Moz","O"];Object.keys(va).forEach(function(t){TA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),va[e]=va[t]})});function n_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||va.hasOwnProperty(t)&&va[t]?(""+e).trim():e+"px"}function r_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=n_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var SA=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Of(t,e){if(e){if(SA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Ff(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jf=null;function Tm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bf=null,Qs=null,Ys=null;function Oy(t){if(t=El(t)){if(typeof Bf!="function")throw Error(G(280));var e=t.stateNode;e&&(e=_d(e),Bf(t.stateNode,t.type,e))}}function i_(t){Qs?Ys?Ys.push(t):Ys=[t]:Qs=t}function s_(){if(Qs){var t=Qs,e=Ys;if(Ys=Qs=null,Oy(t),e)for(t=0;t<e.length;t++)Oy(e[t])}}function o_(t,e){return t(e)}function a_(){}var Ph=!1;function l_(t,e,n){if(Ph)return t(e,n);Ph=!0;try{return o_(t,e,n)}finally{Ph=!1,(Qs!==null||Ys!==null)&&(a_(),s_())}}function ja(t,e){var n=t.stateNode;if(n===null)return null;var r=_d(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var Uf=!1;if(Pr)try{var Qo={};Object.defineProperty(Qo,"passive",{get:function(){Uf=!0}}),window.addEventListener("test",Qo,Qo),window.removeEventListener("test",Qo,Qo)}catch{Uf=!1}function CA(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var ya=!1,mc=null,gc=!1,zf=null,IA={onError:function(t){ya=!0,mc=t}};function PA(t,e,n,r,i,s,o,a,l){ya=!1,mc=null,CA.apply(IA,arguments)}function AA(t,e,n,r,i,s,o,a,l){if(PA.apply(this,arguments),ya){if(ya){var u=mc;ya=!1,mc=null}else throw Error(G(198));gc||(gc=!0,zf=u)}}function ms(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function u_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Fy(t){if(ms(t)!==t)throw Error(G(188))}function RA(t){var e=t.alternate;if(!e){if(e=ms(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Fy(i),t;if(s===r)return Fy(i),e;s=s.sibling}throw Error(G(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function c_(t){return t=RA(t),t!==null?d_(t):null}function d_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=d_(t);if(e!==null)return e;t=t.sibling}return null}var h_=cn.unstable_scheduleCallback,jy=cn.unstable_cancelCallback,kA=cn.unstable_shouldYield,bA=cn.unstable_requestPaint,Ge=cn.unstable_now,DA=cn.unstable_getCurrentPriorityLevel,Sm=cn.unstable_ImmediatePriority,f_=cn.unstable_UserBlockingPriority,vc=cn.unstable_NormalPriority,NA=cn.unstable_LowPriority,p_=cn.unstable_IdlePriority,vd=null,Yn=null;function MA(t){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(vd,t,void 0,(t.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:OA,VA=Math.log,LA=Math.LN2;function OA(t){return t>>>=0,t===0?32:31-(VA(t)/LA|0)|0}var vu=64,yu=4194304;function oa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=oa(a):(s&=o,s!==0&&(r=oa(s)))}else o=n&~i,o!==0?r=oa(o):s!==0&&(r=oa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mn(e),i=1<<n,r|=t[n],e&=~i;return r}function FA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Mn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=FA(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function $f(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function m_(){var t=vu;return vu<<=1,!(vu&4194240)&&(vu=64),t}function Ah(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function xl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mn(e),t[e]=n}function BA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Mn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Cm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Te=0;function g_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var v_,Im,y_,w_,x_,Wf=!1,wu=[],si=null,oi=null,ai=null,Ba=new Map,Ua=new Map,Qr=[],UA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function By(t,e){switch(t){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":Ba.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ua.delete(e.pointerId)}}function Yo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=El(e),e!==null&&Im(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function zA(t,e,n,r,i){switch(e){case"focusin":return si=Yo(si,t,e,n,r,i),!0;case"dragenter":return oi=Yo(oi,t,e,n,r,i),!0;case"mouseover":return ai=Yo(ai,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ba.set(s,Yo(Ba.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ua.set(s,Yo(Ua.get(s)||null,t,e,n,r,i)),!0}return!1}function __(t){var e=Gi(t.target);if(e!==null){var n=ms(e);if(n!==null){if(e=n.tag,e===13){if(e=u_(n),e!==null){t.blockedOn=e,x_(t.priority,function(){y_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $u(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jf=r,n.target.dispatchEvent(r),jf=null}else return e=El(n),e!==null&&Im(e),t.blockedOn=n,!1;e.shift()}return!0}function Uy(t,e,n){$u(t)&&n.delete(e)}function $A(){Wf=!1,si!==null&&$u(si)&&(si=null),oi!==null&&$u(oi)&&(oi=null),ai!==null&&$u(ai)&&(ai=null),Ba.forEach(Uy),Ua.forEach(Uy)}function Xo(t,e){t.blockedOn===e&&(t.blockedOn=null,Wf||(Wf=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,$A)))}function za(t){function e(i){return Xo(i,t)}if(0<wu.length){Xo(wu[0],t);for(var n=1;n<wu.length;n++){var r=wu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(si!==null&&Xo(si,t),oi!==null&&Xo(oi,t),ai!==null&&Xo(ai,t),Ba.forEach(e),Ua.forEach(e),n=0;n<Qr.length;n++)r=Qr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qr.length&&(n=Qr[0],n.blockedOn===null);)__(n),n.blockedOn===null&&Qr.shift()}var Xs=Vr.ReactCurrentBatchConfig,wc=!0;function WA(t,e,n,r){var i=Te,s=Xs.transition;Xs.transition=null;try{Te=1,Pm(t,e,n,r)}finally{Te=i,Xs.transition=s}}function HA(t,e,n,r){var i=Te,s=Xs.transition;Xs.transition=null;try{Te=4,Pm(t,e,n,r)}finally{Te=i,Xs.transition=s}}function Pm(t,e,n,r){if(wc){var i=Hf(t,e,n,r);if(i===null)Fh(t,e,r,xc,n),By(t,r);else if(zA(i,t,e,n,r))r.stopPropagation();else if(By(t,r),e&4&&-1<UA.indexOf(t)){for(;i!==null;){var s=El(i);if(s!==null&&v_(s),s=Hf(t,e,n,r),s===null&&Fh(t,e,r,xc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Fh(t,e,r,null,n)}}var xc=null;function Hf(t,e,n,r){if(xc=null,t=Tm(r),t=Gi(t),t!==null)if(e=ms(t),e===null)t=null;else if(n=e.tag,n===13){if(t=u_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xc=t,null}function E_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DA()){case Sm:return 1;case f_:return 4;case vc:case NA:return 16;case p_:return 536870912;default:return 16}default:return 16}}var ti=null,Am=null,Wu=null;function T_(){if(Wu)return Wu;var t,e=Am,n=e.length,r,i="value"in ti?ti.value:ti.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Wu=i.slice(t,1<r?1-r:void 0)}function Hu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xu(){return!0}function zy(){return!1}function fn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?xu:zy,this.isPropagationStopped=zy,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xu)},persist:function(){},isPersistent:xu}),e}var Co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rm=fn(Co),_l=Be({},Co,{view:0,detail:0}),KA=fn(_l),Rh,kh,Jo,yd=Be({},_l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:km,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jo&&(Jo&&t.type==="mousemove"?(Rh=t.screenX-Jo.screenX,kh=t.screenY-Jo.screenY):kh=Rh=0,Jo=t),Rh)},movementY:function(t){return"movementY"in t?t.movementY:kh}}),$y=fn(yd),GA=Be({},yd,{dataTransfer:0}),qA=fn(GA),QA=Be({},_l,{relatedTarget:0}),bh=fn(QA),YA=Be({},Co,{animationName:0,elapsedTime:0,pseudoElement:0}),XA=fn(YA),JA=Be({},Co,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ZA=fn(JA),eR=Be({},Co,{data:0}),Wy=fn(eR),tR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rR[t])?!!e[t]:!1}function km(){return iR}var sR=Be({},_l,{key:function(t){if(t.key){var e=tR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:km,charCode:function(t){return t.type==="keypress"?Hu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),oR=fn(sR),aR=Be({},yd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hy=fn(aR),lR=Be({},_l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:km}),uR=fn(lR),cR=Be({},Co,{propertyName:0,elapsedTime:0,pseudoElement:0}),dR=fn(cR),hR=Be({},yd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fR=fn(hR),pR=[9,13,27,32],bm=Pr&&"CompositionEvent"in window,wa=null;Pr&&"documentMode"in document&&(wa=document.documentMode);var mR=Pr&&"TextEvent"in window&&!wa,S_=Pr&&(!bm||wa&&8<wa&&11>=wa),Ky=" ",Gy=!1;function C_(t,e){switch(t){case"keyup":return pR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function I_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ds=!1;function gR(t,e){switch(t){case"compositionend":return I_(e);case"keypress":return e.which!==32?null:(Gy=!0,Ky);case"textInput":return t=e.data,t===Ky&&Gy?null:t;default:return null}}function vR(t,e){if(Ds)return t==="compositionend"||!bm&&C_(t,e)?(t=T_(),Wu=Am=ti=null,Ds=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return S_&&e.locale!=="ko"?null:e.data;default:return null}}var yR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yR[t.type]:e==="textarea"}function P_(t,e,n,r){i_(r),e=_c(e,"onChange"),0<e.length&&(n=new Rm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xa=null,$a=null;function wR(t){F_(t,0)}function wd(t){var e=Vs(t);if(X1(e))return t}function xR(t,e){if(t==="change")return e}var A_=!1;if(Pr){var Dh;if(Pr){var Nh="oninput"in document;if(!Nh){var Qy=document.createElement("div");Qy.setAttribute("oninput","return;"),Nh=typeof Qy.oninput=="function"}Dh=Nh}else Dh=!1;A_=Dh&&(!document.documentMode||9<document.documentMode)}function Yy(){xa&&(xa.detachEvent("onpropertychange",R_),$a=xa=null)}function R_(t){if(t.propertyName==="value"&&wd($a)){var e=[];P_(e,$a,t,Tm(t)),l_(wR,e)}}function _R(t,e,n){t==="focusin"?(Yy(),xa=e,$a=n,xa.attachEvent("onpropertychange",R_)):t==="focusout"&&Yy()}function ER(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wd($a)}function TR(t,e){if(t==="click")return wd(e)}function SR(t,e){if(t==="input"||t==="change")return wd(e)}function CR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var On=typeof Object.is=="function"?Object.is:CR;function Wa(t,e){if(On(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Pf.call(e,i)||!On(t[i],e[i]))return!1}return!0}function Xy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jy(t,e){var n=Xy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xy(n)}}function k_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?k_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function b_(){for(var t=window,e=pc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=pc(t.document)}return e}function Dm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function IR(t){var e=b_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&k_(n.ownerDocument.documentElement,n)){if(r!==null&&Dm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Jy(n,s);var o=Jy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PR=Pr&&"documentMode"in document&&11>=document.documentMode,Ns=null,Kf=null,_a=null,Gf=!1;function Zy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gf||Ns==null||Ns!==pc(r)||(r=Ns,"selectionStart"in r&&Dm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_a&&Wa(_a,r)||(_a=r,r=_c(Kf,"onSelect"),0<r.length&&(e=new Rm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ns)))}function _u(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ms={animationend:_u("Animation","AnimationEnd"),animationiteration:_u("Animation","AnimationIteration"),animationstart:_u("Animation","AnimationStart"),transitionend:_u("Transition","TransitionEnd")},Mh={},D_={};Pr&&(D_=document.createElement("div").style,"AnimationEvent"in window||(delete Ms.animationend.animation,delete Ms.animationiteration.animation,delete Ms.animationstart.animation),"TransitionEvent"in window||delete Ms.transitionend.transition);function xd(t){if(Mh[t])return Mh[t];if(!Ms[t])return t;var e=Ms[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in D_)return Mh[t]=e[n];return t}var N_=xd("animationend"),M_=xd("animationiteration"),V_=xd("animationstart"),L_=xd("transitionend"),O_=new Map,e0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(t,e){O_.set(t,e),ps(e,[t])}for(var Vh=0;Vh<e0.length;Vh++){var Lh=e0[Vh],AR=Lh.toLowerCase(),RR=Lh[0].toUpperCase()+Lh.slice(1);Ii(AR,"on"+RR)}Ii(N_,"onAnimationEnd");Ii(M_,"onAnimationIteration");Ii(V_,"onAnimationStart");Ii("dblclick","onDoubleClick");Ii("focusin","onFocus");Ii("focusout","onBlur");Ii(L_,"onTransitionEnd");so("onMouseEnter",["mouseout","mouseover"]);so("onMouseLeave",["mouseout","mouseover"]);so("onPointerEnter",["pointerout","pointerover"]);so("onPointerLeave",["pointerout","pointerover"]);ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ps("onBeforeInput",["compositionend","keypress","textInput","paste"]);ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kR=new Set("cancel close invalid load scroll toggle".split(" ").concat(aa));function t0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,AA(r,e,void 0,t),t.currentTarget=null}function F_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;t0(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;t0(i,a,u),s=l}}}if(gc)throw t=zf,gc=!1,zf=null,t}function ke(t,e){var n=e[Jf];n===void 0&&(n=e[Jf]=new Set);var r=t+"__bubble";n.has(r)||(j_(e,t,2,!1),n.add(r))}function Oh(t,e,n){var r=0;e&&(r|=4),j_(n,t,r,e)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function Ha(t){if(!t[Eu]){t[Eu]=!0,K1.forEach(function(n){n!=="selectionchange"&&(kR.has(n)||Oh(n,!1,t),Oh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Eu]||(e[Eu]=!0,Oh("selectionchange",!1,e))}}function j_(t,e,n,r){switch(E_(e)){case 1:var i=WA;break;case 4:i=HA;break;default:i=Pm}n=i.bind(null,e,n,t),i=void 0,!Uf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Fh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Gi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}l_(function(){var u=s,c=Tm(n),f=[];e:{var p=O_.get(t);if(p!==void 0){var h=Rm,g=t;switch(t){case"keypress":if(Hu(n)===0)break e;case"keydown":case"keyup":h=oR;break;case"focusin":g="focus",h=bh;break;case"focusout":g="blur",h=bh;break;case"beforeblur":case"afterblur":h=bh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=$y;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=qA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=uR;break;case N_:case M_:case V_:h=XA;break;case L_:h=dR;break;case"scroll":h=KA;break;case"wheel":h=fR;break;case"copy":case"cut":case"paste":h=ZA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Hy}var m=(e&4)!==0,v=!m&&t==="scroll",w=m?p!==null?p+"Capture":null:p;m=[];for(var x=u,E;x!==null;){E=x;var k=E.stateNode;if(E.tag===5&&k!==null&&(E=k,w!==null&&(k=ja(x,w),k!=null&&m.push(Ka(x,k,E)))),v)break;x=x.return}0<m.length&&(p=new h(p,g,null,n,c),f.push({event:p,listeners:m}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",p&&n!==jf&&(g=n.relatedTarget||n.fromElement)&&(Gi(g)||g[Ar]))break e;if((h||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,h?(g=n.relatedTarget||n.toElement,h=u,g=g?Gi(g):null,g!==null&&(v=ms(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(h=null,g=u),h!==g)){if(m=$y,k="onMouseLeave",w="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=Hy,k="onPointerLeave",w="onPointerEnter",x="pointer"),v=h==null?p:Vs(h),E=g==null?p:Vs(g),p=new m(k,x+"leave",h,n,c),p.target=v,p.relatedTarget=E,k=null,Gi(c)===u&&(m=new m(w,x+"enter",g,n,c),m.target=E,m.relatedTarget=v,k=m),v=k,h&&g)t:{for(m=h,w=g,x=0,E=m;E;E=Is(E))x++;for(E=0,k=w;k;k=Is(k))E++;for(;0<x-E;)m=Is(m),x--;for(;0<E-x;)w=Is(w),E--;for(;x--;){if(m===w||w!==null&&m===w.alternate)break t;m=Is(m),w=Is(w)}m=null}else m=null;h!==null&&n0(f,p,h,m,!1),g!==null&&v!==null&&n0(f,v,g,m,!0)}}e:{if(p=u?Vs(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var S=xR;else if(qy(p))if(A_)S=SR;else{S=ER;var R=_R}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=TR);if(S&&(S=S(t,u))){P_(f,S,n,c);break e}R&&R(t,p,u),t==="focusout"&&(R=p._wrapperState)&&R.controlled&&p.type==="number"&&Mf(p,"number",p.value)}switch(R=u?Vs(u):window,t){case"focusin":(qy(R)||R.contentEditable==="true")&&(Ns=R,Kf=u,_a=null);break;case"focusout":_a=Kf=Ns=null;break;case"mousedown":Gf=!0;break;case"contextmenu":case"mouseup":case"dragend":Gf=!1,Zy(f,n,c);break;case"selectionchange":if(PR)break;case"keydown":case"keyup":Zy(f,n,c)}var T;if(bm)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ds?C_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(S_&&n.locale!=="ko"&&(Ds||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ds&&(T=T_()):(ti=c,Am="value"in ti?ti.value:ti.textContent,Ds=!0)),R=_c(u,y),0<R.length&&(y=new Wy(y,t,null,n,c),f.push({event:y,listeners:R}),T?y.data=T:(T=I_(n),T!==null&&(y.data=T)))),(T=mR?gR(t,n):vR(t,n))&&(u=_c(u,"onBeforeInput"),0<u.length&&(c=new Wy("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=T))}F_(f,e)})}function Ka(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _c(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ja(t,n),s!=null&&r.unshift(Ka(t,s,i)),s=ja(t,e),s!=null&&r.push(Ka(t,s,i))),t=t.return}return r}function Is(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function n0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=ja(n,s),l!=null&&o.unshift(Ka(n,l,a))):i||(l=ja(n,s),l!=null&&o.push(Ka(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var bR=/\r\n?/g,DR=/\u0000|\uFFFD/g;function r0(t){return(typeof t=="string"?t:""+t).replace(bR,`
`).replace(DR,"")}function Tu(t,e,n){if(e=r0(e),r0(t)!==e&&n)throw Error(G(425))}function Ec(){}var qf=null,Qf=null;function Yf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xf=typeof setTimeout=="function"?setTimeout:void 0,NR=typeof clearTimeout=="function"?clearTimeout:void 0,i0=typeof Promise=="function"?Promise:void 0,MR=typeof queueMicrotask=="function"?queueMicrotask:typeof i0<"u"?function(t){return i0.resolve(null).then(t).catch(VR)}:Xf;function VR(t){setTimeout(function(){throw t})}function jh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),za(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);za(e)}function li(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function s0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Io=Math.random().toString(36).slice(2),qn="__reactFiber$"+Io,Ga="__reactProps$"+Io,Ar="__reactContainer$"+Io,Jf="__reactEvents$"+Io,LR="__reactListeners$"+Io,OR="__reactHandles$"+Io;function Gi(t){var e=t[qn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ar]||n[qn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=s0(t);t!==null;){if(n=t[qn])return n;t=s0(t)}return e}t=n,n=t.parentNode}return null}function El(t){return t=t[qn]||t[Ar],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function _d(t){return t[Ga]||null}var Zf=[],Ls=-1;function Pi(t){return{current:t}}function be(t){0>Ls||(t.current=Zf[Ls],Zf[Ls]=null,Ls--)}function Ae(t,e){Ls++,Zf[Ls]=t.current,t.current=e}var wi={},Nt=Pi(wi),Yt=Pi(!1),rs=wi;function oo(t,e){var n=t.type.contextTypes;if(!n)return wi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Xt(t){return t=t.childContextTypes,t!=null}function Tc(){be(Yt),be(Nt)}function o0(t,e,n){if(Nt.current!==wi)throw Error(G(168));Ae(Nt,e),Ae(Yt,n)}function B_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(G(108,_A(t)||"Unknown",i));return Be({},n,r)}function Sc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wi,rs=Nt.current,Ae(Nt,t),Ae(Yt,Yt.current),!0}function a0(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=B_(t,e,rs),r.__reactInternalMemoizedMergedChildContext=t,be(Yt),be(Nt),Ae(Nt,t)):be(Yt),Ae(Yt,n)}var fr=null,Ed=!1,Bh=!1;function U_(t){fr===null?fr=[t]:fr.push(t)}function FR(t){Ed=!0,U_(t)}function Ai(){if(!Bh&&fr!==null){Bh=!0;var t=0,e=Te;try{var n=fr;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fr=null,Ed=!1}catch(i){throw fr!==null&&(fr=fr.slice(t+1)),h_(Sm,Ai),i}finally{Te=e,Bh=!1}}return null}var Os=[],Fs=0,Cc=null,Ic=0,_n=[],En=0,is=null,pr=1,mr="";function Ui(t,e){Os[Fs++]=Ic,Os[Fs++]=Cc,Cc=t,Ic=e}function z_(t,e,n){_n[En++]=pr,_n[En++]=mr,_n[En++]=is,is=t;var r=pr;t=mr;var i=32-Mn(r)-1;r&=~(1<<i),n+=1;var s=32-Mn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,pr=1<<32-Mn(e)+i|n<<i|r,mr=s+t}else pr=1<<s|n<<i|r,mr=t}function Nm(t){t.return!==null&&(Ui(t,1),z_(t,1,0))}function Mm(t){for(;t===Cc;)Cc=Os[--Fs],Os[Fs]=null,Ic=Os[--Fs],Os[Fs]=null;for(;t===is;)is=_n[--En],_n[En]=null,mr=_n[--En],_n[En]=null,pr=_n[--En],_n[En]=null}var un=null,an=null,Ne=!1,Nn=null;function $_(t,e){var n=Tn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function l0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,un=t,an=li(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,un=t,an=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=is!==null?{id:pr,overflow:mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Tn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,un=t,an=null,!0):!1;default:return!1}}function ep(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tp(t){if(Ne){var e=an;if(e){var n=e;if(!l0(t,e)){if(ep(t))throw Error(G(418));e=li(n.nextSibling);var r=un;e&&l0(t,e)?$_(r,n):(t.flags=t.flags&-4097|2,Ne=!1,un=t)}}else{if(ep(t))throw Error(G(418));t.flags=t.flags&-4097|2,Ne=!1,un=t}}}function u0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;un=t}function Su(t){if(t!==un)return!1;if(!Ne)return u0(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yf(t.type,t.memoizedProps)),e&&(e=an)){if(ep(t))throw W_(),Error(G(418));for(;e;)$_(t,e),e=li(e.nextSibling)}if(u0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){an=li(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}an=null}}else an=un?li(t.stateNode.nextSibling):null;return!0}function W_(){for(var t=an;t;)t=li(t.nextSibling)}function ao(){an=un=null,Ne=!1}function Vm(t){Nn===null?Nn=[t]:Nn.push(t)}var jR=Vr.ReactCurrentBatchConfig;function Zo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function Cu(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function c0(t){var e=t._init;return e(t._payload)}function H_(t){function e(w,x){if(t){var E=w.deletions;E===null?(w.deletions=[x],w.flags|=16):E.push(x)}}function n(w,x){if(!t)return null;for(;x!==null;)e(w,x),x=x.sibling;return null}function r(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function i(w,x){return w=hi(w,x),w.index=0,w.sibling=null,w}function s(w,x,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<x?(w.flags|=2,x):E):(w.flags|=2,x)):(w.flags|=1048576,x)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,x,E,k){return x===null||x.tag!==6?(x=Gh(E,w.mode,k),x.return=w,x):(x=i(x,E),x.return=w,x)}function l(w,x,E,k){var S=E.type;return S===bs?c(w,x,E.props.children,k,E.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Kr&&c0(S)===x.type)?(k=i(x,E.props),k.ref=Zo(w,x,E),k.return=w,k):(k=Ju(E.type,E.key,E.props,null,w.mode,k),k.ref=Zo(w,x,E),k.return=w,k)}function u(w,x,E,k){return x===null||x.tag!==4||x.stateNode.containerInfo!==E.containerInfo||x.stateNode.implementation!==E.implementation?(x=qh(E,w.mode,k),x.return=w,x):(x=i(x,E.children||[]),x.return=w,x)}function c(w,x,E,k,S){return x===null||x.tag!==7?(x=Zi(E,w.mode,k,S),x.return=w,x):(x=i(x,E),x.return=w,x)}function f(w,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Gh(""+x,w.mode,E),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case pu:return E=Ju(x.type,x.key,x.props,null,w.mode,E),E.ref=Zo(w,null,x),E.return=w,E;case ks:return x=qh(x,w.mode,E),x.return=w,x;case Kr:var k=x._init;return f(w,k(x._payload),E)}if(sa(x)||qo(x))return x=Zi(x,w.mode,E,null),x.return=w,x;Cu(w,x)}return null}function p(w,x,E,k){var S=x!==null?x.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return S!==null?null:a(w,x,""+E,k);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case pu:return E.key===S?l(w,x,E,k):null;case ks:return E.key===S?u(w,x,E,k):null;case Kr:return S=E._init,p(w,x,S(E._payload),k)}if(sa(E)||qo(E))return S!==null?null:c(w,x,E,k,null);Cu(w,E)}return null}function h(w,x,E,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return w=w.get(E)||null,a(x,w,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case pu:return w=w.get(k.key===null?E:k.key)||null,l(x,w,k,S);case ks:return w=w.get(k.key===null?E:k.key)||null,u(x,w,k,S);case Kr:var R=k._init;return h(w,x,E,R(k._payload),S)}if(sa(k)||qo(k))return w=w.get(E)||null,c(x,w,k,S,null);Cu(x,k)}return null}function g(w,x,E,k){for(var S=null,R=null,T=x,y=x=0,I=null;T!==null&&y<E.length;y++){T.index>y?(I=T,T=null):I=T.sibling;var C=p(w,T,E[y],k);if(C===null){T===null&&(T=I);break}t&&T&&C.alternate===null&&e(w,T),x=s(C,x,y),R===null?S=C:R.sibling=C,R=C,T=I}if(y===E.length)return n(w,T),Ne&&Ui(w,y),S;if(T===null){for(;y<E.length;y++)T=f(w,E[y],k),T!==null&&(x=s(T,x,y),R===null?S=T:R.sibling=T,R=T);return Ne&&Ui(w,y),S}for(T=r(w,T);y<E.length;y++)I=h(T,w,y,E[y],k),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?y:I.key),x=s(I,x,y),R===null?S=I:R.sibling=I,R=I);return t&&T.forEach(function(A){return e(w,A)}),Ne&&Ui(w,y),S}function m(w,x,E,k){var S=qo(E);if(typeof S!="function")throw Error(G(150));if(E=S.call(E),E==null)throw Error(G(151));for(var R=S=null,T=x,y=x=0,I=null,C=E.next();T!==null&&!C.done;y++,C=E.next()){T.index>y?(I=T,T=null):I=T.sibling;var A=p(w,T,C.value,k);if(A===null){T===null&&(T=I);break}t&&T&&A.alternate===null&&e(w,T),x=s(A,x,y),R===null?S=A:R.sibling=A,R=A,T=I}if(C.done)return n(w,T),Ne&&Ui(w,y),S;if(T===null){for(;!C.done;y++,C=E.next())C=f(w,C.value,k),C!==null&&(x=s(C,x,y),R===null?S=C:R.sibling=C,R=C);return Ne&&Ui(w,y),S}for(T=r(w,T);!C.done;y++,C=E.next())C=h(T,w,y,C.value,k),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?y:C.key),x=s(C,x,y),R===null?S=C:R.sibling=C,R=C);return t&&T.forEach(function(b){return e(w,b)}),Ne&&Ui(w,y),S}function v(w,x,E,k){if(typeof E=="object"&&E!==null&&E.type===bs&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case pu:e:{for(var S=E.key,R=x;R!==null;){if(R.key===S){if(S=E.type,S===bs){if(R.tag===7){n(w,R.sibling),x=i(R,E.props.children),x.return=w,w=x;break e}}else if(R.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Kr&&c0(S)===R.type){n(w,R.sibling),x=i(R,E.props),x.ref=Zo(w,R,E),x.return=w,w=x;break e}n(w,R);break}else e(w,R);R=R.sibling}E.type===bs?(x=Zi(E.props.children,w.mode,k,E.key),x.return=w,w=x):(k=Ju(E.type,E.key,E.props,null,w.mode,k),k.ref=Zo(w,x,E),k.return=w,w=k)}return o(w);case ks:e:{for(R=E.key;x!==null;){if(x.key===R)if(x.tag===4&&x.stateNode.containerInfo===E.containerInfo&&x.stateNode.implementation===E.implementation){n(w,x.sibling),x=i(x,E.children||[]),x.return=w,w=x;break e}else{n(w,x);break}else e(w,x);x=x.sibling}x=qh(E,w.mode,k),x.return=w,w=x}return o(w);case Kr:return R=E._init,v(w,x,R(E._payload),k)}if(sa(E))return g(w,x,E,k);if(qo(E))return m(w,x,E,k);Cu(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,x!==null&&x.tag===6?(n(w,x.sibling),x=i(x,E),x.return=w,w=x):(n(w,x),x=Gh(E,w.mode,k),x.return=w,w=x),o(w)):n(w,x)}return v}var lo=H_(!0),K_=H_(!1),Pc=Pi(null),Ac=null,js=null,Lm=null;function Om(){Lm=js=Ac=null}function Fm(t){var e=Pc.current;be(Pc),t._currentValue=e}function np(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Js(t,e){Ac=t,Lm=js=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qt=!0),t.firstContext=null)}function Cn(t){var e=t._currentValue;if(Lm!==t)if(t={context:t,memoizedValue:e,next:null},js===null){if(Ac===null)throw Error(G(308));js=t,Ac.dependencies={lanes:0,firstContext:t}}else js=js.next=t;return e}var qi=null;function jm(t){qi===null?qi=[t]:qi.push(t)}function G_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,jm(e)):(n.next=i.next,i.next=n),e.interleaved=n,Rr(t,r)}function Rr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gr=!1;function Bm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function q_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ui(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Rr(t,n)}return i=r.interleaved,i===null?(e.next=e,jm(r)):(e.next=i.next,i.next=e),r.interleaved=e,Rr(t,n)}function Ku(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cm(t,n)}}function d0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Rc(t,e,n,r){var i=t.updateQueue;Gr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,c=u=l=null,a=s;do{var p=a.lane,h=a.eventTime;if((r&p)===p){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,m=a;switch(p=e,h=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){f=g.call(h,f,p);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,p=typeof g=="function"?g.call(h,f,p):g,p==null)break e;f=Be({},f,p);break e;case 2:Gr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else h={eventTime:h,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=f):c=c.next=h,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);os|=o,t.lanes=o,t.memoizedState=f}}function h0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(G(191,i));i.call(r)}}}var Tl={},Xn=Pi(Tl),qa=Pi(Tl),Qa=Pi(Tl);function Qi(t){if(t===Tl)throw Error(G(174));return t}function Um(t,e){switch(Ae(Qa,e),Ae(qa,t),Ae(Xn,Tl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lf(e,t)}be(Xn),Ae(Xn,e)}function uo(){be(Xn),be(qa),be(Qa)}function Q_(t){Qi(Qa.current);var e=Qi(Xn.current),n=Lf(e,t.type);e!==n&&(Ae(qa,t),Ae(Xn,n))}function zm(t){qa.current===t&&(be(Xn),be(qa))}var Oe=Pi(0);function kc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Uh=[];function $m(){for(var t=0;t<Uh.length;t++)Uh[t]._workInProgressVersionPrimary=null;Uh.length=0}var Gu=Vr.ReactCurrentDispatcher,zh=Vr.ReactCurrentBatchConfig,ss=0,je=null,Xe=null,it=null,bc=!1,Ea=!1,Ya=0,BR=0;function Tt(){throw Error(G(321))}function Wm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!On(t[n],e[n]))return!1;return!0}function Hm(t,e,n,r,i,s){if(ss=s,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gu.current=t===null||t.memoizedState===null?WR:HR,t=n(r,i),Ea){s=0;do{if(Ea=!1,Ya=0,25<=s)throw Error(G(301));s+=1,it=Xe=null,e.updateQueue=null,Gu.current=KR,t=n(r,i)}while(Ea)}if(Gu.current=Dc,e=Xe!==null&&Xe.next!==null,ss=0,it=Xe=je=null,bc=!1,e)throw Error(G(300));return t}function Km(){var t=Ya!==0;return Ya=0,t}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?je.memoizedState=it=t:it=it.next=t,it}function In(){if(Xe===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var e=it===null?je.memoizedState:it.next;if(e!==null)it=e,Xe=t;else{if(t===null)throw Error(G(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},it===null?je.memoizedState=it=t:it=it.next=t}return it}function Xa(t,e){return typeof e=="function"?e(t):e}function $h(t){var e=In(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=Xe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((ss&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,je.lanes|=c,os|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,On(r,e.memoizedState)||(Qt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,je.lanes|=s,os|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Wh(t){var e=In(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);On(s,e.memoizedState)||(Qt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Y_(){}function X_(t,e){var n=je,r=In(),i=e(),s=!On(r.memoizedState,i);if(s&&(r.memoizedState=i,Qt=!0),r=r.queue,Gm(eE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||it!==null&&it.memoizedState.tag&1){if(n.flags|=2048,Ja(9,Z_.bind(null,n,r,i,e),void 0,null),ot===null)throw Error(G(349));ss&30||J_(n,e,i)}return i}function J_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Z_(t,e,n,r){e.value=n,e.getSnapshot=r,tE(e)&&nE(t)}function eE(t,e,n){return n(function(){tE(e)&&nE(t)})}function tE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!On(t,n)}catch{return!0}}function nE(t){var e=Rr(t,1);e!==null&&Vn(e,t,1,-1)}function f0(t){var e=Gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:t},e.queue=t,t=t.dispatch=$R.bind(null,je,t),[e.memoizedState,t]}function Ja(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function rE(){return In().memoizedState}function qu(t,e,n,r){var i=Gn();je.flags|=t,i.memoizedState=Ja(1|e,n,void 0,r===void 0?null:r)}function Td(t,e,n,r){var i=In();r=r===void 0?null:r;var s=void 0;if(Xe!==null){var o=Xe.memoizedState;if(s=o.destroy,r!==null&&Wm(r,o.deps)){i.memoizedState=Ja(e,n,s,r);return}}je.flags|=t,i.memoizedState=Ja(1|e,n,s,r)}function p0(t,e){return qu(8390656,8,t,e)}function Gm(t,e){return Td(2048,8,t,e)}function iE(t,e){return Td(4,2,t,e)}function sE(t,e){return Td(4,4,t,e)}function oE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function aE(t,e,n){return n=n!=null?n.concat([t]):null,Td(4,4,oE.bind(null,e,t),n)}function qm(){}function lE(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function uE(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cE(t,e,n){return ss&21?(On(n,e)||(n=m_(),je.lanes|=n,os|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=n)}function UR(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=zh.transition;zh.transition={};try{t(!1),e()}finally{Te=n,zh.transition=r}}function dE(){return In().memoizedState}function zR(t,e,n){var r=di(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hE(t))fE(e,n);else if(n=G_(t,e,n,r),n!==null){var i=zt();Vn(n,t,r,i),pE(n,e,r)}}function $R(t,e,n){var r=di(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hE(t))fE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,On(a,o)){var l=e.interleaved;l===null?(i.next=i,jm(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=G_(t,e,i,r),n!==null&&(i=zt(),Vn(n,t,r,i),pE(n,e,r))}}function hE(t){var e=t.alternate;return t===je||e!==null&&e===je}function fE(t,e){Ea=bc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function pE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cm(t,n)}}var Dc={readContext:Cn,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},WR={readContext:Cn,useCallback:function(t,e){return Gn().memoizedState=[t,e===void 0?null:e],t},useContext:Cn,useEffect:p0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qu(4194308,4,oE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qu(4194308,4,t,e)},useInsertionEffect:function(t,e){return qu(4,2,t,e)},useMemo:function(t,e){var n=Gn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=zR.bind(null,je,t),[r.memoizedState,t]},useRef:function(t){var e=Gn();return t={current:t},e.memoizedState=t},useState:f0,useDebugValue:qm,useDeferredValue:function(t){return Gn().memoizedState=t},useTransition:function(){var t=f0(!1),e=t[0];return t=UR.bind(null,t[1]),Gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=je,i=Gn();if(Ne){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),ot===null)throw Error(G(349));ss&30||J_(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,p0(eE.bind(null,r,s,t),[t]),r.flags|=2048,Ja(9,Z_.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Gn(),e=ot.identifierPrefix;if(Ne){var n=mr,r=pr;n=(r&~(1<<32-Mn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ya++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=BR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},HR={readContext:Cn,useCallback:lE,useContext:Cn,useEffect:Gm,useImperativeHandle:aE,useInsertionEffect:iE,useLayoutEffect:sE,useMemo:uE,useReducer:$h,useRef:rE,useState:function(){return $h(Xa)},useDebugValue:qm,useDeferredValue:function(t){var e=In();return cE(e,Xe.memoizedState,t)},useTransition:function(){var t=$h(Xa)[0],e=In().memoizedState;return[t,e]},useMutableSource:Y_,useSyncExternalStore:X_,useId:dE,unstable_isNewReconciler:!1},KR={readContext:Cn,useCallback:lE,useContext:Cn,useEffect:Gm,useImperativeHandle:aE,useInsertionEffect:iE,useLayoutEffect:sE,useMemo:uE,useReducer:Wh,useRef:rE,useState:function(){return Wh(Xa)},useDebugValue:qm,useDeferredValue:function(t){var e=In();return Xe===null?e.memoizedState=t:cE(e,Xe.memoizedState,t)},useTransition:function(){var t=Wh(Xa)[0],e=In().memoizedState;return[t,e]},useMutableSource:Y_,useSyncExternalStore:X_,useId:dE,unstable_isNewReconciler:!1};function kn(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sd={isMounted:function(t){return(t=t._reactInternals)?ms(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=zt(),i=di(t),s=xr(r,i);s.payload=e,n!=null&&(s.callback=n),e=ui(t,s,i),e!==null&&(Vn(e,t,i,r),Ku(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=zt(),i=di(t),s=xr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ui(t,s,i),e!==null&&(Vn(e,t,i,r),Ku(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=zt(),r=di(t),i=xr(n,r);i.tag=2,e!=null&&(i.callback=e),e=ui(t,i,r),e!==null&&(Vn(e,t,r,n),Ku(e,t,r))}};function m0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Wa(n,r)||!Wa(i,s):!0}function mE(t,e,n){var r=!1,i=wi,s=e.contextType;return typeof s=="object"&&s!==null?s=Cn(s):(i=Xt(e)?rs:Nt.current,r=e.contextTypes,s=(r=r!=null)?oo(t,i):wi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function g0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sd.enqueueReplaceState(e,e.state,null)}function ip(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Bm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Cn(s):(s=Xt(e)?rs:Nt.current,i.context=oo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(rp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Sd.enqueueReplaceState(i,i.state,null),Rc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function co(t,e){try{var n="",r=e;do n+=xA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Hh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var GR=typeof WeakMap=="function"?WeakMap:Map;function gE(t,e,n){n=xr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Mc||(Mc=!0,mp=r),sp(t,e)},n}function vE(t,e,n){n=xr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){sp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){sp(t,e),typeof r!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function v0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new GR;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=ak.bind(null,t,e,n),e.then(t,t))}function y0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function w0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xr(-1,1),e.tag=2,ui(n,e,1))),n.lanes|=1),t)}var qR=Vr.ReactCurrentOwner,Qt=!1;function jt(t,e,n,r){e.child=t===null?K_(e,null,n,r):lo(e,t.child,n,r)}function x0(t,e,n,r,i){n=n.render;var s=e.ref;return Js(e,i),r=Hm(t,e,n,r,s,i),n=Km(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kr(t,e,i)):(Ne&&n&&Nm(e),e.flags|=1,jt(t,e,r,i),e.child)}function _0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!ng(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,yE(t,e,s,r,i)):(t=Ju(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Wa,n(o,r)&&t.ref===e.ref)return kr(t,e,i)}return e.flags|=1,t=hi(s,r),t.ref=e.ref,t.return=e,e.child=t}function yE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Wa(s,r)&&t.ref===e.ref)if(Qt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Qt=!0);else return e.lanes=t.lanes,kr(t,e,i)}return op(t,e,n,r,i)}function wE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Us,on),on|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(Us,on),on|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ae(Us,on),on|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ae(Us,on),on|=r;return jt(t,e,i,n),e.child}function xE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function op(t,e,n,r,i){var s=Xt(n)?rs:Nt.current;return s=oo(e,s),Js(e,i),n=Hm(t,e,n,r,s,i),r=Km(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kr(t,e,i)):(Ne&&r&&Nm(e),e.flags|=1,jt(t,e,n,i),e.child)}function E0(t,e,n,r,i){if(Xt(n)){var s=!0;Sc(e)}else s=!1;if(Js(e,i),e.stateNode===null)Qu(t,e),mE(e,n,r),ip(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Cn(u):(u=Xt(n)?rs:Nt.current,u=oo(e,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&g0(e,o,r,u),Gr=!1;var p=e.memoizedState;o.state=p,Rc(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Yt.current||Gr?(typeof c=="function"&&(rp(e,n,c,r),l=e.memoizedState),(a=Gr||m0(e,n,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,q_(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:kn(e.type,a),o.props=u,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Cn(l):(l=Xt(n)?rs:Nt.current,l=oo(e,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&g0(e,o,r,l),Gr=!1,p=e.memoizedState,o.state=p,Rc(e,r,o,i);var g=e.memoizedState;a!==f||p!==g||Yt.current||Gr?(typeof h=="function"&&(rp(e,n,h,r),g=e.memoizedState),(u=Gr||m0(e,n,u,r,p,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return ap(t,e,n,r,s,i)}function ap(t,e,n,r,i,s){xE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&a0(e,n,!1),kr(t,e,s);r=e.stateNode,qR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=lo(e,t.child,null,s),e.child=lo(e,null,a,s)):jt(t,e,a,s),e.memoizedState=r.state,i&&a0(e,n,!0),e.child}function _E(t){var e=t.stateNode;e.pendingContext?o0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&o0(t,e.context,!1),Um(t,e.containerInfo)}function T0(t,e,n,r,i){return ao(),Vm(i),e.flags|=256,jt(t,e,n,r),e.child}var lp={dehydrated:null,treeContext:null,retryLane:0};function up(t){return{baseLanes:t,cachePool:null,transitions:null}}function EE(t,e,n){var r=e.pendingProps,i=Oe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ae(Oe,i&1),t===null)return tp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Pd(o,r,0,null),t=Zi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=up(n),e.memoizedState=lp,t):Qm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return QR(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=hi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=hi(a,s):(s=Zi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?up(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=lp,r}return s=t.child,t=s.sibling,r=hi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Qm(t,e){return e=Pd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Iu(t,e,n,r){return r!==null&&Vm(r),lo(e,t.child,null,n),t=Qm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function QR(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Hh(Error(G(422))),Iu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Pd({mode:"visible",children:r.children},i,0,null),s=Zi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&lo(e,t.child,null,o),e.child.memoizedState=up(o),e.memoizedState=lp,s);if(!(e.mode&1))return Iu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(G(419)),r=Hh(s,r,void 0),Iu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Qt||a){if(r=ot,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Rr(t,i),Vn(r,t,i,-1))}return tg(),r=Hh(Error(G(421))),Iu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=lk.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,an=li(i.nextSibling),un=e,Ne=!0,Nn=null,t!==null&&(_n[En++]=pr,_n[En++]=mr,_n[En++]=is,pr=t.id,mr=t.overflow,is=e),e=Qm(e,r.children),e.flags|=4096,e)}function S0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),np(t.return,e,n)}function Kh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function TE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(jt(t,e,r.children,n),r=Oe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&S0(t,n,e);else if(t.tag===19)S0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(Oe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&kc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Kh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&kc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Kh(e,!0,n,null,s);break;case"together":Kh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),os|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=hi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function YR(t,e,n){switch(e.tag){case 3:_E(e),ao();break;case 5:Q_(e);break;case 1:Xt(e.type)&&Sc(e);break;case 4:Um(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ae(Pc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(Oe,Oe.current&1),e.flags|=128,null):n&e.child.childLanes?EE(t,e,n):(Ae(Oe,Oe.current&1),t=kr(t,e,n),t!==null?t.sibling:null);Ae(Oe,Oe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return TE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ae(Oe,Oe.current),r)break;return null;case 22:case 23:return e.lanes=0,wE(t,e,n)}return kr(t,e,n)}var SE,cp,CE,IE;SE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cp=function(){};CE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Qi(Xn.current);var s=null;switch(n){case"input":i=Df(t,i),r=Df(t,r),s=[];break;case"select":i=Be({},i,{value:void 0}),r=Be({},r,{value:void 0}),s=[];break;case"textarea":i=Vf(t,i),r=Vf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ec)}Of(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Oa.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Oa.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ke("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};IE=function(t,e,n,r){n!==r&&(e.flags|=4)};function ea(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function St(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function XR(t,e,n){var r=e.pendingProps;switch(Mm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(e),null;case 1:return Xt(e.type)&&Tc(),St(e),null;case 3:return r=e.stateNode,uo(),be(Yt),be(Nt),$m(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Su(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nn!==null&&(yp(Nn),Nn=null))),cp(t,e),St(e),null;case 5:zm(e);var i=Qi(Qa.current);if(n=e.type,t!==null&&e.stateNode!=null)CE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return St(e),null}if(t=Qi(Xn.current),Su(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[qn]=e,r[Ga]=s,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(i=0;i<aa.length;i++)ke(aa[i],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":Ny(r,s),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ke("invalid",r);break;case"textarea":Vy(r,s),ke("invalid",r)}Of(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Tu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Tu(r.textContent,a,t),i=["children",""+a]):Oa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":mu(r),My(r,s,!0);break;case"textarea":mu(r),Ly(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ec)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=e_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[qn]=e,t[Ga]=r,SE(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ff(n,r),n){case"dialog":ke("cancel",t),ke("close",t),i=r;break;case"iframe":case"object":case"embed":ke("load",t),i=r;break;case"video":case"audio":for(i=0;i<aa.length;i++)ke(aa[i],t);i=r;break;case"source":ke("error",t),i=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),i=r;break;case"details":ke("toggle",t),i=r;break;case"input":Ny(t,r),i=Df(t,r),ke("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Be({},r,{value:void 0}),ke("invalid",t);break;case"textarea":Vy(t,r),i=Vf(t,r),ke("invalid",t);break;default:i=r}Of(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?r_(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&t_(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Fa(t,l):typeof l=="number"&&Fa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Oa.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ke("scroll",t):l!=null&&wm(t,s,l,o))}switch(n){case"input":mu(t),My(t,r,!1);break;case"textarea":mu(t),Ly(t);break;case"option":r.value!=null&&t.setAttribute("value",""+yi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?qs(t,!!r.multiple,s,!1):r.defaultValue!=null&&qs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ec)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return St(e),null;case 6:if(t&&e.stateNode!=null)IE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=Qi(Qa.current),Qi(Xn.current),Su(e)){if(r=e.stateNode,n=e.memoizedProps,r[qn]=e,(s=r.nodeValue!==n)&&(t=un,t!==null))switch(t.tag){case 3:Tu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Tu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qn]=e,e.stateNode=r}return St(e),null;case 13:if(be(Oe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&an!==null&&e.mode&1&&!(e.flags&128))W_(),ao(),e.flags|=98560,s=!1;else if(s=Su(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(G(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(G(317));s[qn]=e}else ao(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;St(e),s=!1}else Nn!==null&&(yp(Nn),Nn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Oe.current&1?tt===0&&(tt=3):tg())),e.updateQueue!==null&&(e.flags|=4),St(e),null);case 4:return uo(),cp(t,e),t===null&&Ha(e.stateNode.containerInfo),St(e),null;case 10:return Fm(e.type._context),St(e),null;case 17:return Xt(e.type)&&Tc(),St(e),null;case 19:if(be(Oe),s=e.memoizedState,s===null)return St(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ea(s,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=kc(t),o!==null){for(e.flags|=128,ea(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(Oe,Oe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ge()>ho&&(e.flags|=128,r=!0,ea(s,!1),e.lanes=4194304)}else{if(!r)if(t=kc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ea(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ne)return St(e),null}else 2*Ge()-s.renderingStartTime>ho&&n!==1073741824&&(e.flags|=128,r=!0,ea(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ge(),e.sibling=null,n=Oe.current,Ae(Oe,r?n&1|2:n&1),e):(St(e),null);case 22:case 23:return eg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?on&1073741824&&(St(e),e.subtreeFlags&6&&(e.flags|=8192)):St(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function JR(t,e){switch(Mm(e),e.tag){case 1:return Xt(e.type)&&Tc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return uo(),be(Yt),be(Nt),$m(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zm(e),null;case 13:if(be(Oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));ao()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Oe),null;case 4:return uo(),null;case 10:return Fm(e.type._context),null;case 22:case 23:return eg(),null;case 24:return null;default:return null}}var Pu=!1,At=!1,ZR=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Bs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(t,e,r)}else n.current=null}function dp(t,e,n){try{n()}catch(r){$e(t,e,r)}}var C0=!1;function ek(t,e){if(qf=wc,t=b_(),Dm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=t,p=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)p=f,f=h;for(;;){if(f===t)break t;if(p===n&&++u===i&&(a=o),p===s&&++c===r&&(l=o),(h=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qf={focusedElem:t,selectionRange:n},wc=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,v=g.memoizedState,w=e.stateNode,x=w.getSnapshotBeforeUpdate(e.elementType===e.type?m:kn(e.type,m),v);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(k){$e(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return g=C0,C0=!1,g}function Ta(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&dp(e,n,s)}i=i.next}while(i!==r)}}function Cd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function hp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function PE(t){var e=t.alternate;e!==null&&(t.alternate=null,PE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qn],delete e[Ga],delete e[Jf],delete e[LR],delete e[OR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function AE(t){return t.tag===5||t.tag===3||t.tag===4}function I0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||AE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ec));else if(r!==4&&(t=t.child,t!==null))for(fp(t,e,n),t=t.sibling;t!==null;)fp(t,e,n),t=t.sibling}function pp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(pp(t,e,n),t=t.sibling;t!==null;)pp(t,e,n),t=t.sibling}var ct=null,Dn=!1;function $r(t,e,n){for(n=n.child;n!==null;)RE(t,e,n),n=n.sibling}function RE(t,e,n){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(vd,n)}catch{}switch(n.tag){case 5:At||Bs(n,e);case 6:var r=ct,i=Dn;ct=null,$r(t,e,n),ct=r,Dn=i,ct!==null&&(Dn?(t=ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ct.removeChild(n.stateNode));break;case 18:ct!==null&&(Dn?(t=ct,n=n.stateNode,t.nodeType===8?jh(t.parentNode,n):t.nodeType===1&&jh(t,n),za(t)):jh(ct,n.stateNode));break;case 4:r=ct,i=Dn,ct=n.stateNode.containerInfo,Dn=!0,$r(t,e,n),ct=r,Dn=i;break;case 0:case 11:case 14:case 15:if(!At&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&dp(n,e,o),i=i.next}while(i!==r)}$r(t,e,n);break;case 1:if(!At&&(Bs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){$e(n,e,a)}$r(t,e,n);break;case 21:$r(t,e,n);break;case 22:n.mode&1?(At=(r=At)||n.memoizedState!==null,$r(t,e,n),At=r):$r(t,e,n);break;default:$r(t,e,n)}}function P0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ZR),e.forEach(function(r){var i=uk.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Rn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ct=a.stateNode,Dn=!1;break e;case 3:ct=a.stateNode.containerInfo,Dn=!0;break e;case 4:ct=a.stateNode.containerInfo,Dn=!0;break e}a=a.return}if(ct===null)throw Error(G(160));RE(s,o,i),ct=null,Dn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){$e(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kE(e,t),e=e.sibling}function kE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Rn(e,t),Hn(t),r&4){try{Ta(3,t,t.return),Cd(3,t)}catch(m){$e(t,t.return,m)}try{Ta(5,t,t.return)}catch(m){$e(t,t.return,m)}}break;case 1:Rn(e,t),Hn(t),r&512&&n!==null&&Bs(n,n.return);break;case 5:if(Rn(e,t),Hn(t),r&512&&n!==null&&Bs(n,n.return),t.flags&32){var i=t.stateNode;try{Fa(i,"")}catch(m){$e(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&J1(i,s),Ff(a,o);var u=Ff(a,s);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?r_(i,f):c==="dangerouslySetInnerHTML"?t_(i,f):c==="children"?Fa(i,f):wm(i,c,f,u)}switch(a){case"input":Nf(i,s);break;case"textarea":Z1(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?qs(i,!!s.multiple,h,!1):p!==!!s.multiple&&(s.defaultValue!=null?qs(i,!!s.multiple,s.defaultValue,!0):qs(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ga]=s}catch(m){$e(t,t.return,m)}}break;case 6:if(Rn(e,t),Hn(t),r&4){if(t.stateNode===null)throw Error(G(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){$e(t,t.return,m)}}break;case 3:if(Rn(e,t),Hn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{za(e.containerInfo)}catch(m){$e(t,t.return,m)}break;case 4:Rn(e,t),Hn(t);break;case 13:Rn(e,t),Hn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Jm=Ge())),r&4&&P0(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(At=(u=At)||c,Rn(e,t),At=u):Rn(e,t),Hn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(ee=t,c=t.child;c!==null;){for(f=ee=c;ee!==null;){switch(p=ee,h=p.child,p.tag){case 0:case 11:case 14:case 15:Ta(4,p,p.return);break;case 1:Bs(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){$e(r,n,m)}}break;case 5:Bs(p,p.return);break;case 22:if(p.memoizedState!==null){R0(f);continue}}h!==null?(h.return=p,ee=h):R0(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=n_("display",o))}catch(m){$e(t,t.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){$e(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Rn(e,t),Hn(t),r&4&&P0(t);break;case 21:break;default:Rn(e,t),Hn(t)}}function Hn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(AE(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Fa(i,""),r.flags&=-33);var s=I0(t);pp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=I0(t);fp(t,a,o);break;default:throw Error(G(161))}}catch(l){$e(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tk(t,e,n){ee=t,bE(t)}function bE(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var i=ee,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Pu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||At;a=Pu;var u=At;if(Pu=o,(At=l)&&!u)for(ee=i;ee!==null;)o=ee,l=o.child,o.tag===22&&o.memoizedState!==null?k0(i):l!==null?(l.return=o,ee=l):k0(i);for(;s!==null;)ee=s,bE(s),s=s.sibling;ee=i,Pu=a,At=u}A0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ee=s):A0(t)}}function A0(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:At||Cd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!At)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:kn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&h0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}h0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&za(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}At||e.flags&512&&hp(e)}catch(p){$e(e,e.return,p)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function R0(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function k0(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cd(4,e)}catch(l){$e(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){$e(e,i,l)}}var s=e.return;try{hp(e)}catch(l){$e(e,s,l)}break;case 5:var o=e.return;try{hp(e)}catch(l){$e(e,o,l)}}}catch(l){$e(e,e.return,l)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var nk=Math.ceil,Nc=Vr.ReactCurrentDispatcher,Ym=Vr.ReactCurrentOwner,Sn=Vr.ReactCurrentBatchConfig,ve=0,ot=null,Qe=null,pt=0,on=0,Us=Pi(0),tt=0,Za=null,os=0,Id=0,Xm=0,Sa=null,Gt=null,Jm=0,ho=1/0,hr=null,Mc=!1,mp=null,ci=null,Au=!1,ni=null,Vc=0,Ca=0,gp=null,Yu=-1,Xu=0;function zt(){return ve&6?Ge():Yu!==-1?Yu:Yu=Ge()}function di(t){return t.mode&1?ve&2&&pt!==0?pt&-pt:jR.transition!==null?(Xu===0&&(Xu=m_()),Xu):(t=Te,t!==0||(t=window.event,t=t===void 0?16:E_(t.type)),t):1}function Vn(t,e,n,r){if(50<Ca)throw Ca=0,gp=null,Error(G(185));xl(t,n,r),(!(ve&2)||t!==ot)&&(t===ot&&(!(ve&2)&&(Id|=n),tt===4&&Yr(t,pt)),Jt(t,r),n===1&&ve===0&&!(e.mode&1)&&(ho=Ge()+500,Ed&&Ai()))}function Jt(t,e){var n=t.callbackNode;jA(t,e);var r=yc(t,t===ot?pt:0);if(r===0)n!==null&&jy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&jy(n),e===1)t.tag===0?FR(b0.bind(null,t)):U_(b0.bind(null,t)),MR(function(){!(ve&6)&&Ai()}),n=null;else{switch(g_(r)){case 1:n=Sm;break;case 4:n=f_;break;case 16:n=vc;break;case 536870912:n=p_;break;default:n=vc}n=jE(n,DE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function DE(t,e){if(Yu=-1,Xu=0,ve&6)throw Error(G(327));var n=t.callbackNode;if(Zs()&&t.callbackNode!==n)return null;var r=yc(t,t===ot?pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Lc(t,r);else{e=r;var i=ve;ve|=2;var s=ME();(ot!==t||pt!==e)&&(hr=null,ho=Ge()+500,Ji(t,e));do try{sk();break}catch(a){NE(t,a)}while(!0);Om(),Nc.current=s,ve=i,Qe!==null?e=0:(ot=null,pt=0,e=tt)}if(e!==0){if(e===2&&(i=$f(t),i!==0&&(r=i,e=vp(t,i))),e===1)throw n=Za,Ji(t,0),Yr(t,r),Jt(t,Ge()),n;if(e===6)Yr(t,r);else{if(i=t.current.alternate,!(r&30)&&!rk(i)&&(e=Lc(t,r),e===2&&(s=$f(t),s!==0&&(r=s,e=vp(t,s))),e===1))throw n=Za,Ji(t,0),Yr(t,r),Jt(t,Ge()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:zi(t,Gt,hr);break;case 3:if(Yr(t,r),(r&130023424)===r&&(e=Jm+500-Ge(),10<e)){if(yc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){zt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Xf(zi.bind(null,t,Gt,hr),e);break}zi(t,Gt,hr);break;case 4:if(Yr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Mn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nk(r/1960))-r,10<r){t.timeoutHandle=Xf(zi.bind(null,t,Gt,hr),r);break}zi(t,Gt,hr);break;case 5:zi(t,Gt,hr);break;default:throw Error(G(329))}}}return Jt(t,Ge()),t.callbackNode===n?DE.bind(null,t):null}function vp(t,e){var n=Sa;return t.current.memoizedState.isDehydrated&&(Ji(t,e).flags|=256),t=Lc(t,e),t!==2&&(e=Gt,Gt=n,e!==null&&yp(e)),t}function yp(t){Gt===null?Gt=t:Gt.push.apply(Gt,t)}function rk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!On(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yr(t,e){for(e&=~Xm,e&=~Id,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mn(e),r=1<<n;t[n]=-1,e&=~r}}function b0(t){if(ve&6)throw Error(G(327));Zs();var e=yc(t,0);if(!(e&1))return Jt(t,Ge()),null;var n=Lc(t,e);if(t.tag!==0&&n===2){var r=$f(t);r!==0&&(e=r,n=vp(t,r))}if(n===1)throw n=Za,Ji(t,0),Yr(t,e),Jt(t,Ge()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zi(t,Gt,hr),Jt(t,Ge()),null}function Zm(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(ho=Ge()+500,Ed&&Ai())}}function as(t){ni!==null&&ni.tag===0&&!(ve&6)&&Zs();var e=ve;ve|=1;var n=Sn.transition,r=Te;try{if(Sn.transition=null,Te=1,t)return t()}finally{Te=r,Sn.transition=n,ve=e,!(ve&6)&&Ai()}}function eg(){on=Us.current,be(Us)}function Ji(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,NR(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(Mm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Tc();break;case 3:uo(),be(Yt),be(Nt),$m();break;case 5:zm(r);break;case 4:uo();break;case 13:be(Oe);break;case 19:be(Oe);break;case 10:Fm(r.type._context);break;case 22:case 23:eg()}n=n.return}if(ot=t,Qe=t=hi(t.current,null),pt=on=e,tt=0,Za=null,Xm=Id=os=0,Gt=Sa=null,qi!==null){for(e=0;e<qi.length;e++)if(n=qi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}qi=null}return t}function NE(t,e){do{var n=Qe;try{if(Om(),Gu.current=Dc,bc){for(var r=je.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}bc=!1}if(ss=0,it=Xe=je=null,Ea=!1,Ya=0,Ym.current=null,n===null||n.return===null){tt=1,Za=e,Qe=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=pt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=y0(o);if(h!==null){h.flags&=-257,w0(h,o,a,s,e),h.mode&1&&v0(s,u,e),e=h,l=u;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){v0(s,u,e),tg();break e}l=Error(G(426))}}else if(Ne&&a.mode&1){var v=y0(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),w0(v,o,a,s,e),Vm(co(l,a));break e}}s=l=co(l,a),tt!==4&&(tt=2),Sa===null?Sa=[s]:Sa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=gE(s,l,e);d0(s,w);break e;case 1:a=l;var x=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ci===null||!ci.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=vE(s,a,e);d0(s,k);break e}}s=s.return}while(s!==null)}LE(n)}catch(S){e=S,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function ME(){var t=Nc.current;return Nc.current=Dc,t===null?Dc:t}function tg(){(tt===0||tt===3||tt===2)&&(tt=4),ot===null||!(os&268435455)&&!(Id&268435455)||Yr(ot,pt)}function Lc(t,e){var n=ve;ve|=2;var r=ME();(ot!==t||pt!==e)&&(hr=null,Ji(t,e));do try{ik();break}catch(i){NE(t,i)}while(!0);if(Om(),ve=n,Nc.current=r,Qe!==null)throw Error(G(261));return ot=null,pt=0,tt}function ik(){for(;Qe!==null;)VE(Qe)}function sk(){for(;Qe!==null&&!kA();)VE(Qe)}function VE(t){var e=FE(t.alternate,t,on);t.memoizedProps=t.pendingProps,e===null?LE(t):Qe=e,Ym.current=null}function LE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=JR(n,e),n!==null){n.flags&=32767,Qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Qe=null;return}}else if(n=XR(n,e,on),n!==null){Qe=n;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);tt===0&&(tt=5)}function zi(t,e,n){var r=Te,i=Sn.transition;try{Sn.transition=null,Te=1,ok(t,e,n,r)}finally{Sn.transition=i,Te=r}return null}function ok(t,e,n,r){do Zs();while(ni!==null);if(ve&6)throw Error(G(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(BA(t,s),t===ot&&(Qe=ot=null,pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Au||(Au=!0,jE(vc,function(){return Zs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Sn.transition,Sn.transition=null;var o=Te;Te=1;var a=ve;ve|=4,Ym.current=null,ek(t,n),kE(n,t),IR(Qf),wc=!!qf,Qf=qf=null,t.current=n,tk(n),bA(),ve=a,Te=o,Sn.transition=s}else t.current=n;if(Au&&(Au=!1,ni=t,Vc=i),s=t.pendingLanes,s===0&&(ci=null),MA(n.stateNode),Jt(t,Ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Mc)throw Mc=!1,t=mp,mp=null,t;return Vc&1&&t.tag!==0&&Zs(),s=t.pendingLanes,s&1?t===gp?Ca++:(Ca=0,gp=t):Ca=0,Ai(),null}function Zs(){if(ni!==null){var t=g_(Vc),e=Sn.transition,n=Te;try{if(Sn.transition=null,Te=16>t?16:t,ni===null)var r=!1;else{if(t=ni,ni=null,Vc=0,ve&6)throw Error(G(331));var i=ve;for(ve|=4,ee=t.current;ee!==null;){var s=ee,o=s.child;if(ee.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ee=u;ee!==null;){var c=ee;switch(c.tag){case 0:case 11:case 15:Ta(8,c,s)}var f=c.child;if(f!==null)f.return=c,ee=f;else for(;ee!==null;){c=ee;var p=c.sibling,h=c.return;if(PE(c),c===u){ee=null;break}if(p!==null){p.return=h,ee=p;break}ee=h}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ee=o;else e:for(;ee!==null;){if(s=ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ta(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,ee=w;break e}ee=s.return}}var x=t.current;for(ee=x;ee!==null;){o=ee;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,ee=E;else e:for(o=x;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Cd(9,a)}}catch(S){$e(a,a.return,S)}if(a===o){ee=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,ee=k;break e}ee=a.return}}if(ve=i,Ai(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(vd,t)}catch{}r=!0}return r}finally{Te=n,Sn.transition=e}}return!1}function D0(t,e,n){e=co(n,e),e=gE(t,e,1),t=ui(t,e,1),e=zt(),t!==null&&(xl(t,1,e),Jt(t,e))}function $e(t,e,n){if(t.tag===3)D0(t,t,n);else for(;e!==null;){if(e.tag===3){D0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ci===null||!ci.has(r))){t=co(n,t),t=vE(e,t,1),e=ui(e,t,1),t=zt(),e!==null&&(xl(e,1,t),Jt(e,t));break}}e=e.return}}function ak(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=zt(),t.pingedLanes|=t.suspendedLanes&n,ot===t&&(pt&n)===n&&(tt===4||tt===3&&(pt&130023424)===pt&&500>Ge()-Jm?Ji(t,0):Xm|=n),Jt(t,e)}function OE(t,e){e===0&&(t.mode&1?(e=yu,yu<<=1,!(yu&130023424)&&(yu=4194304)):e=1);var n=zt();t=Rr(t,e),t!==null&&(xl(t,e,n),Jt(t,n))}function lk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),OE(t,n)}function uk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),OE(t,n)}var FE;FE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yt.current)Qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qt=!1,YR(t,e,n);Qt=!!(t.flags&131072)}else Qt=!1,Ne&&e.flags&1048576&&z_(e,Ic,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Qu(t,e),t=e.pendingProps;var i=oo(e,Nt.current);Js(e,n),i=Hm(null,e,r,t,i,n);var s=Km();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xt(r)?(s=!0,Sc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Bm(e),i.updater=Sd,e.stateNode=i,i._reactInternals=e,ip(e,r,t,n),e=ap(null,e,r,!0,s,n)):(e.tag=0,Ne&&s&&Nm(e),jt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Qu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=dk(r),t=kn(r,t),i){case 0:e=op(null,e,r,t,n);break e;case 1:e=E0(null,e,r,t,n);break e;case 11:e=x0(null,e,r,t,n);break e;case 14:e=_0(null,e,r,kn(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),op(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),E0(t,e,r,i,n);case 3:e:{if(_E(e),t===null)throw Error(G(387));r=e.pendingProps,s=e.memoizedState,i=s.element,q_(t,e),Rc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=co(Error(G(423)),e),e=T0(t,e,r,n,i);break e}else if(r!==i){i=co(Error(G(424)),e),e=T0(t,e,r,n,i);break e}else for(an=li(e.stateNode.containerInfo.firstChild),un=e,Ne=!0,Nn=null,n=K_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ao(),r===i){e=kr(t,e,n);break e}jt(t,e,r,n)}e=e.child}return e;case 5:return Q_(e),t===null&&tp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Yf(r,i)?o=null:s!==null&&Yf(r,s)&&(e.flags|=32),xE(t,e),jt(t,e,o,n),e.child;case 6:return t===null&&tp(e),null;case 13:return EE(t,e,n);case 4:return Um(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=lo(e,null,r,n):jt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),x0(t,e,r,i,n);case 7:return jt(t,e,e.pendingProps,n),e.child;case 8:return jt(t,e,e.pendingProps.children,n),e.child;case 12:return jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ae(Pc,r._currentValue),r._currentValue=o,s!==null)if(On(s.value,o)){if(s.children===i.children&&!Yt.current){e=kr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=xr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),np(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(G(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),np(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}jt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Js(e,n),i=Cn(i),r=r(i),e.flags|=1,jt(t,e,r,n),e.child;case 14:return r=e.type,i=kn(r,e.pendingProps),i=kn(r.type,i),_0(t,e,r,i,n);case 15:return yE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),Qu(t,e),e.tag=1,Xt(r)?(t=!0,Sc(e)):t=!1,Js(e,n),mE(e,r,i),ip(e,r,i,n),ap(null,e,r,!0,t,n);case 19:return TE(t,e,n);case 22:return wE(t,e,n)}throw Error(G(156,e.tag))};function jE(t,e){return h_(t,e)}function ck(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(t,e,n,r){return new ck(t,e,n,r)}function ng(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dk(t){if(typeof t=="function")return ng(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_m)return 11;if(t===Em)return 14}return 2}function hi(t,e){var n=t.alternate;return n===null?(n=Tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ju(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")ng(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case bs:return Zi(n.children,i,s,e);case xm:o=8,i|=8;break;case Af:return t=Tn(12,n,e,i|2),t.elementType=Af,t.lanes=s,t;case Rf:return t=Tn(13,n,e,i),t.elementType=Rf,t.lanes=s,t;case kf:return t=Tn(19,n,e,i),t.elementType=kf,t.lanes=s,t;case Q1:return Pd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case G1:o=10;break e;case q1:o=9;break e;case _m:o=11;break e;case Em:o=14;break e;case Kr:o=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=Tn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Zi(t,e,n,r){return t=Tn(7,t,r,e),t.lanes=n,t}function Pd(t,e,n,r){return t=Tn(22,t,r,e),t.elementType=Q1,t.lanes=n,t.stateNode={isHidden:!1},t}function Gh(t,e,n){return t=Tn(6,t,null,e),t.lanes=n,t}function qh(t,e,n){return e=Tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hk(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ah(0),this.expirationTimes=Ah(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ah(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function rg(t,e,n,r,i,s,o,a,l){return t=new hk(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Tn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bm(s),t}function fk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ks,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function BE(t){if(!t)return wi;t=t._reactInternals;e:{if(ms(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(Xt(n))return B_(t,n,e)}return e}function UE(t,e,n,r,i,s,o,a,l){return t=rg(n,r,!0,t,i,s,o,a,l),t.context=BE(null),n=t.current,r=zt(),i=di(n),s=xr(r,i),s.callback=e??null,ui(n,s,i),t.current.lanes=i,xl(t,i,r),Jt(t,r),t}function Ad(t,e,n,r){var i=e.current,s=zt(),o=di(i);return n=BE(n),e.context===null?e.context=n:e.pendingContext=n,e=xr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ui(i,e,o),t!==null&&(Vn(t,i,o,s),Ku(t,i,o)),o}function Oc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function N0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ig(t,e){N0(t,e),(t=t.alternate)&&N0(t,e)}function pk(){return null}var zE=typeof reportError=="function"?reportError:function(t){console.error(t)};function sg(t){this._internalRoot=t}Rd.prototype.render=sg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Ad(t,e,null,null)};Rd.prototype.unmount=sg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;as(function(){Ad(null,t,null,null)}),e[Ar]=null}};function Rd(t){this._internalRoot=t}Rd.prototype.unstable_scheduleHydration=function(t){if(t){var e=w_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qr.length&&e!==0&&e<Qr[n].priority;n++);Qr.splice(n,0,t),n===0&&__(t)}};function og(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function M0(){}function mk(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Oc(o);s.call(u)}}var o=UE(e,r,t,0,null,!1,!1,"",M0);return t._reactRootContainer=o,t[Ar]=o.current,Ha(t.nodeType===8?t.parentNode:t),as(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Oc(l);a.call(u)}}var l=rg(t,0,!1,null,null,!1,!1,"",M0);return t._reactRootContainer=l,t[Ar]=l.current,Ha(t.nodeType===8?t.parentNode:t),as(function(){Ad(e,l,n,r)}),l}function bd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Oc(o);a.call(l)}}Ad(e,o,t,i)}else o=mk(n,e,t,i,r);return Oc(o)}v_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=oa(e.pendingLanes);n!==0&&(Cm(e,n|1),Jt(e,Ge()),!(ve&6)&&(ho=Ge()+500,Ai()))}break;case 13:as(function(){var r=Rr(t,1);if(r!==null){var i=zt();Vn(r,t,1,i)}}),ig(t,1)}};Im=function(t){if(t.tag===13){var e=Rr(t,134217728);if(e!==null){var n=zt();Vn(e,t,134217728,n)}ig(t,134217728)}};y_=function(t){if(t.tag===13){var e=di(t),n=Rr(t,e);if(n!==null){var r=zt();Vn(n,t,e,r)}ig(t,e)}};w_=function(){return Te};x_=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};Bf=function(t,e,n){switch(e){case"input":if(Nf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_d(r);if(!i)throw Error(G(90));X1(r),Nf(r,i)}}}break;case"textarea":Z1(t,n);break;case"select":e=n.value,e!=null&&qs(t,!!n.multiple,e,!1)}};o_=Zm;a_=as;var gk={usingClientEntryPoint:!1,Events:[El,Vs,_d,i_,s_,Zm]},ta={findFiberByHostInstance:Gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vk={bundleType:ta.bundleType,version:ta.version,rendererPackageName:ta.rendererPackageName,rendererConfig:ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=c_(t),t===null?null:t.stateNode},findFiberByHostInstance:ta.findFiberByHostInstance||pk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ru.isDisabled&&Ru.supportsFiber)try{vd=Ru.inject(vk),Yn=Ru}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gk;hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!og(e))throw Error(G(200));return fk(t,e,null,n)};hn.createRoot=function(t,e){if(!og(t))throw Error(G(299));var n=!1,r="",i=zE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=rg(t,1,!1,null,null,n,!1,r,i),t[Ar]=e.current,Ha(t.nodeType===8?t.parentNode:t),new sg(e)};hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=c_(e),t=t===null?null:t.stateNode,t};hn.flushSync=function(t){return as(t)};hn.hydrate=function(t,e,n){if(!kd(e))throw Error(G(200));return bd(null,t,e,!0,n)};hn.hydrateRoot=function(t,e,n){if(!og(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=zE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=UE(e,null,t,1,n??null,i,!1,s,o),t[Ar]=e.current,Ha(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Rd(e)};hn.render=function(t,e,n){if(!kd(e))throw Error(G(200));return bd(null,t,e,!1,n)};hn.unmountComponentAtNode=function(t){if(!kd(t))throw Error(G(40));return t._reactRootContainer?(as(function(){bd(null,null,t,!1,function(){t._reactRootContainer=null,t[Ar]=null})}),!0):!1};hn.unstable_batchedUpdates=Zm;hn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!kd(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return bd(t,e,n,!1,r)};hn.version="18.3.1-next-f1338f8080-20240426";function $E(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($E)}catch(t){console.error(t)}}$E(),$1.exports=hn;var Ki=$1.exports,WE,V0=Ki;WE=V0.createRoot,V0.hydrateRoot;const HE=M.createContext(),yk=({children:t})=>{const[e,n]=M.useState(!1),r=()=>n(i=>!i);return N.jsx(HE.Provider,{value:{menuOpen:e,setMenuOpen:n,toggleMenu:r},children:t})},KE=()=>M.useContext(HE);/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function el(){return el=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},el.apply(this,arguments)}var ri;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ri||(ri={}));const L0="popstate";function wk(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=gs(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),wp("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof s=="string"?s:Fc(s))}function r(i,s){ag(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return _k(e,n,r,t)}function Ye(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ag(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xk(){return Math.random().toString(36).substr(2,8)}function O0(t,e){return{usr:t.state,key:t.key,idx:e}}function wp(t,e,n,r){return n===void 0&&(n=null),el({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?gs(e):e,{state:n,key:e&&e.key||r||xk()})}function Fc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function gs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function _k(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ri.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(el({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=ri.Pop;let v=c(),w=v==null?null:v-u;u=v,l&&l({action:a,location:m.location,delta:w})}function p(v,w){a=ri.Push;let x=wp(m.location,v,w);n&&n(x,v),u=c()+1;let E=O0(x,u),k=m.createHref(x);try{o.pushState(E,"",k)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(k)}s&&l&&l({action:a,location:m.location,delta:1})}function h(v,w){a=ri.Replace;let x=wp(m.location,v,w);n&&n(x,v),u=c();let E=O0(x,u),k=m.createHref(x);o.replaceState(E,"",k),s&&l&&l({action:a,location:m.location,delta:0})}function g(v){let w=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof v=="string"?v:Fc(v);return x=x.replace(/ $/,"%20"),Ye(w,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,w)}let m={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(L0,f),l=v,()=>{i.removeEventListener(L0,f),l=null}},createHref(v){return e(i,v)},createURL:g,encodeLocation(v){let w=g(v);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:h,go(v){return o.go(v)}};return m}var F0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(F0||(F0={}));function Ek(t,e,n){return n===void 0&&(n="/"),Tk(t,e,n,!1)}function Tk(t,e,n,r){let i=typeof e=="string"?gs(e):e,s=lg(i.pathname||"/",n);if(s==null)return null;let o=GE(t);Sk(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=Vk(s);a=Nk(o[l],u,r)}return a}function GE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ye(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=fi([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(Ye(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),GE(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:bk(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of qE(s.path))i(s,o,l)}),e}function qE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=qE(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Sk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Dk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Ck=/^:[\w-]+$/,Ik=3,Pk=2,Ak=1,Rk=10,kk=-2,j0=t=>t==="*";function bk(t,e){let n=t.split("/"),r=n.length;return n.some(j0)&&(r+=kk),e&&(r+=Pk),n.filter(i=>!j0(i)).reduce((i,s)=>i+(Ck.test(s)?Ik:s===""?Ak:Rk),r)}function Dk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Nk(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",f=B0({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),p=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=B0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:fi([s,f.pathname]),pathnameBase:jk(fi([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=fi([s,f.pathnameBase]))}return o}function B0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Mk(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,f)=>{let{paramName:p,isOptional:h}=c;if(p==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const g=a[f];return h&&!g?u[p]=void 0:u[p]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function Mk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ag(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Vk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ag(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function lg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Lk(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?gs(t):t;return{pathname:n?n.startsWith("/")?n:Ok(n,e):e,search:Bk(r),hash:Uk(i)}}function Ok(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Qh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Fk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function QE(t,e){let n=Fk(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function YE(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=gs(t):(i=el({},t),Ye(!i.pathname||!i.pathname.includes("?"),Qh("?","pathname","search",i)),Ye(!i.pathname||!i.pathname.includes("#"),Qh("#","pathname","hash",i)),Ye(!i.search||!i.search.includes("#"),Qh("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=Lk(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const fi=t=>t.join("/").replace(/\/\/+/g,"/"),jk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Bk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Uk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function zk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const XE=["post","put","patch","delete"];new Set(XE);const $k=["get",...XE];new Set($k);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tl(){return tl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tl.apply(this,arguments)}const ug=M.createContext(null),Wk=M.createContext(null),vs=M.createContext(null),Dd=M.createContext(null),ys=M.createContext({outlet:null,matches:[],isDataRoute:!1}),JE=M.createContext(null);function Hk(t,e){let{relative:n}=e===void 0?{}:e;Sl()||Ye(!1);let{basename:r,navigator:i}=M.useContext(vs),{hash:s,pathname:o,search:a}=eT(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:fi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Sl(){return M.useContext(Dd)!=null}function Po(){return Sl()||Ye(!1),M.useContext(Dd).location}function ZE(t){M.useContext(vs).static||M.useLayoutEffect(t)}function Cl(){let{isDataRoute:t}=M.useContext(ys);return t?ib():Kk()}function Kk(){Sl()||Ye(!1);let t=M.useContext(ug),{basename:e,future:n,navigator:r}=M.useContext(vs),{matches:i}=M.useContext(ys),{pathname:s}=Po(),o=JSON.stringify(QE(i,n.v7_relativeSplatPath)),a=M.useRef(!1);return ZE(()=>{a.current=!0}),M.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=YE(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:fi([e,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[e,r,o,s,t])}function eT(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(vs),{matches:i}=M.useContext(ys),{pathname:s}=Po(),o=JSON.stringify(QE(i,r.v7_relativeSplatPath));return M.useMemo(()=>YE(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function Gk(t,e){return qk(t,e)}function qk(t,e,n,r){Sl()||Ye(!1);let{navigator:i}=M.useContext(vs),{matches:s}=M.useContext(ys),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Po(),c;if(e){var f;let v=typeof e=="string"?gs(e):e;l==="/"||(f=v.pathname)!=null&&f.startsWith(l)||Ye(!1),c=v}else c=u;let p=c.pathname||"/",h=p;if(l!=="/"){let v=l.replace(/^\//,"").split("/");h="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=Ek(t,{pathname:h}),m=Zk(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:fi([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:fi([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,r);return e&&m?M.createElement(Dd.Provider,{value:{location:tl({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:ri.Pop}},m):m}function Qk(){let t=rb(),e=zk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,null)}const Yk=M.createElement(Qk,null);class Xk extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(ys.Provider,{value:this.props.routeContext},M.createElement(JE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Jk(t){let{routeContext:e,match:n,children:r}=t,i=M.useContext(ug);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(ys.Provider,{value:e},r)}function Zk(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||Ye(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:p,errors:h}=n,g=f.route.loader&&p[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||g){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,f,p)=>{let h,g=!1,m=null,v=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||Yk,l&&(u<0&&p===0?(g=!0,v=null):u===p&&(g=!0,v=f.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),x=()=>{let E;return h?E=m:g?E=v:f.route.Component?E=M.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=c,M.createElement(Jk,{match:f,routeContext:{outlet:c,matches:w,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?M.createElement(Xk,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}var tT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(tT||{}),jc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(jc||{});function eb(t){let e=M.useContext(ug);return e||Ye(!1),e}function tb(t){let e=M.useContext(Wk);return e||Ye(!1),e}function nb(t){let e=M.useContext(ys);return e||Ye(!1),e}function nT(t){let e=nb(),n=e.matches[e.matches.length-1];return n.route.id||Ye(!1),n.route.id}function rb(){var t;let e=M.useContext(JE),n=tb(jc.UseRouteError),r=nT(jc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function ib(){let{router:t}=eb(tT.UseNavigateStable),e=nT(jc.UseNavigateStable),n=M.useRef(!1);return ZE(()=>{n.current=!0}),M.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,tl({fromRouteId:e},s)))},[t,e])}function Zu(t){Ye(!1)}function sb(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ri.Pop,navigator:s,static:o=!1,future:a}=t;Sl()&&Ye(!1);let l=e.replace(/^\/*/,"/"),u=M.useMemo(()=>({basename:l,navigator:s,static:o,future:tl({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=gs(r));let{pathname:c="/",search:f="",hash:p="",state:h=null,key:g="default"}=r,m=M.useMemo(()=>{let v=lg(c,l);return v==null?null:{location:{pathname:v,search:f,hash:p,state:h,key:g},navigationType:i}},[l,c,f,p,h,g,i]);return m==null?null:M.createElement(vs.Provider,{value:u},M.createElement(Dd.Provider,{children:n,value:m}))}function ob(t){let{children:e,location:n}=t;return Gk(xp(e),n)}new Promise(()=>{});function xp(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,i)=>{if(!M.isValidElement(r))return;let s=[...e,i];if(r.type===M.Fragment){n.push.apply(n,xp(r.props.children,s));return}r.type!==Zu&&Ye(!1),!r.props.index||!r.props.children||Ye(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=xp(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _p(){return _p=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_p.apply(this,arguments)}function ab(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function lb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ub(t,e){return t.button===0&&(!e||e==="_self")&&!lb(t)}const cb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],db="6";try{window.__reactRouterVersion=db}catch{}const hb="startTransition",U0=aA[hb];function fb(t){let{basename:e,children:n,future:r,window:i}=t,s=M.useRef();s.current==null&&(s.current=wk({window:i,v5Compat:!0}));let o=s.current,[a,l]=M.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=M.useCallback(f=>{u&&U0?U0(()=>l(f)):l(f)},[l,u]);return M.useLayoutEffect(()=>o.listen(c),[o,c]),M.createElement(sb,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const pb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gb=M.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,unstable_viewTransition:f}=e,p=ab(e,cb),{basename:h}=M.useContext(vs),g,m=!1;if(typeof u=="string"&&mb.test(u)&&(g=u,pb))try{let E=new URL(window.location.href),k=u.startsWith("//")?new URL(E.protocol+u):new URL(u),S=lg(k.pathname,h);k.origin===E.origin&&S!=null?u=S+k.search+k.hash:m=!0}catch{}let v=Hk(u,{relative:i}),w=vb(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,unstable_viewTransition:f});function x(E){r&&r(E),E.defaultPrevented||w(E)}return M.createElement("a",_p({},p,{href:g||v,onClick:m||s?r:x,ref:n,target:l}))});var z0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(z0||(z0={}));var $0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($0||($0={}));function vb(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Cl(),u=Po(),c=eT(t,{relative:o});return M.useCallback(f=>{if(ub(f,n)){f.preventDefault();let p=r!==void 0?r:Fc(u)===Fc(c);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,c,r,i,n,t,s,o,a])}var W0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yb=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},iT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,h=u&63;l||(h=64,o||(p=64)),r.push(n[c],n[f],n[p],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new wb;const p=s<<2|a>>4;if(r.push(p),u!==64){const h=a<<4&240|u>>2;if(r.push(h),f!==64){const g=u<<6&192|f;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xb=function(t){const e=rT(t);return iT.encodeByteArray(e,!0)},Bc=function(t){return xb(t).replace(/\./g,"")},sT=function(t){try{return iT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=()=>_b().__FIREBASE_DEFAULTS__,Tb=()=>{if(typeof process>"u"||typeof W0>"u")return;const t=W0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Sb=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sT(t[1]);return e&&JSON.parse(e)},Nd=()=>{try{return Eb()||Tb()||Sb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},oT=t=>{var e,n;return(n=(e=Nd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Cb=t=>{const e=oT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},aT=()=>{var t;return(t=Nd())===null||t===void 0?void 0:t.config},lT=t=>{var e;return(e=Nd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Bc(JSON.stringify(n)),Bc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ab(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function Rb(){var t;const e=(t=Nd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Db(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Nb(){const t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Mb(){return!Rb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vb(){try{return typeof indexedDB=="object"}catch{return!1}}function Lb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="FirebaseError";class Lr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Ob,Object.setPrototypeOf(this,Lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Il.prototype.create)}}class Il{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Fb(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Lr(i,a,r)}}function Fb(t,e){return t.replace(jb,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const jb=/\{\$([^}]+)}/g;function Bb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Uc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(H0(s)&&H0(o)){if(!Uc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function H0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function la(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ua(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Ub(t,e){const n=new zb(t,e);return n.subscribe.bind(n)}class zb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$b(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Yh),i.error===void 0&&(i.error=Yh),i.complete===void 0&&(i.complete=Yh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $b(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Yh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class ls{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ib;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Kb(e))try{this.getOrInitializeService({instanceIdentifier:$i})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=$i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$i){return this.instances.has(e)}getOptions(e=$i){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Hb(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$i){return this.component?this.component.multipleInstances?e:$i:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Hb(t){return t===$i?void 0:t}function Kb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Wb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const qb={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},Qb=me.INFO,Yb={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},Xb=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Yb[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cg{constructor(e){this.name=e,this._logLevel=Qb,this._logHandler=Xb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const Jb=(t,e)=>e.some(n=>t instanceof n);let K0,G0;function Zb(){return K0||(K0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function e2(){return G0||(G0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uT=new WeakMap,Ep=new WeakMap,cT=new WeakMap,Xh=new WeakMap,dg=new WeakMap;function t2(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(pi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&uT.set(n,t)}).catch(()=>{}),dg.set(e,t),e}function n2(t){if(Ep.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ep.set(t,e)}let Tp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ep.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function r2(t){Tp=t(Tp)}function i2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Jh(this),e,...n);return cT.set(r,e.sort?e.sort():[e]),pi(r)}:e2().includes(t)?function(...e){return t.apply(Jh(this),e),pi(uT.get(this))}:function(...e){return pi(t.apply(Jh(this),e))}}function s2(t){return typeof t=="function"?i2(t):(t instanceof IDBTransaction&&n2(t),Jb(t,Zb())?new Proxy(t,Tp):t)}function pi(t){if(t instanceof IDBRequest)return t2(t);if(Xh.has(t))return Xh.get(t);const e=s2(t);return e!==t&&(Xh.set(t,e),dg.set(e,t)),e}const Jh=t=>dg.get(t);function o2(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=pi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(pi(o.result),l.oldVersion,l.newVersion,pi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const a2=["get","getKey","getAll","getAllKeys","count"],l2=["put","add","delete","clear"],Zh=new Map;function q0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zh.get(e))return Zh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=l2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||a2.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Zh.set(e,s),s}r2(t=>({...t,get:(e,n,r)=>q0(e,n)||t.get(e,n,r),has:(e,n)=>!!q0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(c2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function c2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sp="@firebase/app",Q0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new cg("@firebase/app"),d2="@firebase/app-compat",h2="@firebase/analytics-compat",f2="@firebase/analytics",p2="@firebase/app-check-compat",m2="@firebase/app-check",g2="@firebase/auth",v2="@firebase/auth-compat",y2="@firebase/database",w2="@firebase/data-connect",x2="@firebase/database-compat",_2="@firebase/functions",E2="@firebase/functions-compat",T2="@firebase/installations",S2="@firebase/installations-compat",C2="@firebase/messaging",I2="@firebase/messaging-compat",P2="@firebase/performance",A2="@firebase/performance-compat",R2="@firebase/remote-config",k2="@firebase/remote-config-compat",b2="@firebase/storage",D2="@firebase/storage-compat",N2="@firebase/firestore",M2="@firebase/vertexai-preview",V2="@firebase/firestore-compat",L2="firebase",O2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp="[DEFAULT]",F2={[Sp]:"fire-core",[d2]:"fire-core-compat",[f2]:"fire-analytics",[h2]:"fire-analytics-compat",[m2]:"fire-app-check",[p2]:"fire-app-check-compat",[g2]:"fire-auth",[v2]:"fire-auth-compat",[y2]:"fire-rtdb",[w2]:"fire-data-connect",[x2]:"fire-rtdb-compat",[_2]:"fire-fn",[E2]:"fire-fn-compat",[T2]:"fire-iid",[S2]:"fire-iid-compat",[C2]:"fire-fcm",[I2]:"fire-fcm-compat",[P2]:"fire-perf",[A2]:"fire-perf-compat",[R2]:"fire-rc",[k2]:"fire-rc-compat",[b2]:"fire-gcs",[D2]:"fire-gcs-compat",[N2]:"fire-fst",[V2]:"fire-fst-compat",[M2]:"fire-vertex","fire-js":"fire-js",[L2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=new Map,j2=new Map,Ip=new Map;function Y0(t,e){try{t.container.addComponent(e)}catch(n){br.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fo(t){const e=t.name;if(Ip.has(e))return br.debug(`There were multiple attempts to register component ${e}.`),!1;Ip.set(e,t);for(const n of zc.values())Y0(n,t);for(const n of j2.values())Y0(n,t);return!0}function hg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mi=new Il("app","Firebase",B2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=O2;function dT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Cp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw mi.create("bad-app-name",{appName:String(i)});if(n||(n=aT()),!n)throw mi.create("no-options");const s=zc.get(i);if(s){if(Uc(n,s.options)&&Uc(r,s.config))return s;throw mi.create("duplicate-app",{appName:i})}const o=new Gb(i);for(const l of Ip.values())o.addComponent(l);const a=new U2(n,r,o);return zc.set(i,a),a}function hT(t=Cp){const e=zc.get(t);if(!e&&t===Cp&&aT())return dT();if(!e)throw mi.create("no-app",{appName:t});return e}function gi(t,e,n){var r;let i=(r=F2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),br.warn(a.join(" "));return}fo(new ls(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2="firebase-heartbeat-database",$2=1,nl="firebase-heartbeat-store";let ef=null;function fT(){return ef||(ef=o2(z2,$2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(nl)}catch(n){console.warn(n)}}}}).catch(t=>{throw mi.create("idb-open",{originalErrorMessage:t.message})})),ef}async function W2(t){try{const n=(await fT()).transaction(nl),r=await n.objectStore(nl).get(pT(t));return await n.done,r}catch(e){if(e instanceof Lr)br.warn(e.message);else{const n=mi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});br.warn(n.message)}}}async function X0(t,e){try{const r=(await fT()).transaction(nl,"readwrite");await r.objectStore(nl).put(e,pT(t)),await r.done}catch(n){if(n instanceof Lr)br.warn(n.message);else{const r=mi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});br.warn(r.message)}}}function pT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=1024,K2=30*24*60*60*1e3;class G2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Q2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=J0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=K2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){br.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=J0(),{heartbeatsToSend:r,unsentEntries:i}=q2(this._heartbeatsCache.heartbeats),s=Bc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return br.warn(n),""}}}function J0(){return new Date().toISOString().substring(0,10)}function q2(t,e=H2){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Z0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Z0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Q2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vb()?Lb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await W2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return X0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return X0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Z0(t){return Bc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t){fo(new ls("platform-logger",e=>new u2(e),"PRIVATE")),fo(new ls("heartbeat",e=>new G2(e),"PRIVATE")),gi(Sp,Q0,t),gi(Sp,Q0,"esm2017"),gi("fire-js","")}Y2("");var ew=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var es,mT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,y){function I(){}I.prototype=y.prototype,T.D=y.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(C,A,b){for(var D=Array(arguments.length-2),B=2;B<arguments.length;B++)D[B-2]=arguments[B];return y.prototype[A].apply(C,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,y,I){I||(I=0);var C=Array(16);if(typeof y=="string")for(var A=0;16>A;++A)C[A]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(A=0;16>A;++A)C[A]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=T.g[0],I=T.g[1],A=T.g[2];var b=T.g[3],D=y+(b^I&(A^b))+C[0]+3614090360&4294967295;y=I+(D<<7&4294967295|D>>>25),D=b+(A^y&(I^A))+C[1]+3905402710&4294967295,b=y+(D<<12&4294967295|D>>>20),D=A+(I^b&(y^I))+C[2]+606105819&4294967295,A=b+(D<<17&4294967295|D>>>15),D=I+(y^A&(b^y))+C[3]+3250441966&4294967295,I=A+(D<<22&4294967295|D>>>10),D=y+(b^I&(A^b))+C[4]+4118548399&4294967295,y=I+(D<<7&4294967295|D>>>25),D=b+(A^y&(I^A))+C[5]+1200080426&4294967295,b=y+(D<<12&4294967295|D>>>20),D=A+(I^b&(y^I))+C[6]+2821735955&4294967295,A=b+(D<<17&4294967295|D>>>15),D=I+(y^A&(b^y))+C[7]+4249261313&4294967295,I=A+(D<<22&4294967295|D>>>10),D=y+(b^I&(A^b))+C[8]+1770035416&4294967295,y=I+(D<<7&4294967295|D>>>25),D=b+(A^y&(I^A))+C[9]+2336552879&4294967295,b=y+(D<<12&4294967295|D>>>20),D=A+(I^b&(y^I))+C[10]+4294925233&4294967295,A=b+(D<<17&4294967295|D>>>15),D=I+(y^A&(b^y))+C[11]+2304563134&4294967295,I=A+(D<<22&4294967295|D>>>10),D=y+(b^I&(A^b))+C[12]+1804603682&4294967295,y=I+(D<<7&4294967295|D>>>25),D=b+(A^y&(I^A))+C[13]+4254626195&4294967295,b=y+(D<<12&4294967295|D>>>20),D=A+(I^b&(y^I))+C[14]+2792965006&4294967295,A=b+(D<<17&4294967295|D>>>15),D=I+(y^A&(b^y))+C[15]+1236535329&4294967295,I=A+(D<<22&4294967295|D>>>10),D=y+(A^b&(I^A))+C[1]+4129170786&4294967295,y=I+(D<<5&4294967295|D>>>27),D=b+(I^A&(y^I))+C[6]+3225465664&4294967295,b=y+(D<<9&4294967295|D>>>23),D=A+(y^I&(b^y))+C[11]+643717713&4294967295,A=b+(D<<14&4294967295|D>>>18),D=I+(b^y&(A^b))+C[0]+3921069994&4294967295,I=A+(D<<20&4294967295|D>>>12),D=y+(A^b&(I^A))+C[5]+3593408605&4294967295,y=I+(D<<5&4294967295|D>>>27),D=b+(I^A&(y^I))+C[10]+38016083&4294967295,b=y+(D<<9&4294967295|D>>>23),D=A+(y^I&(b^y))+C[15]+3634488961&4294967295,A=b+(D<<14&4294967295|D>>>18),D=I+(b^y&(A^b))+C[4]+3889429448&4294967295,I=A+(D<<20&4294967295|D>>>12),D=y+(A^b&(I^A))+C[9]+568446438&4294967295,y=I+(D<<5&4294967295|D>>>27),D=b+(I^A&(y^I))+C[14]+3275163606&4294967295,b=y+(D<<9&4294967295|D>>>23),D=A+(y^I&(b^y))+C[3]+4107603335&4294967295,A=b+(D<<14&4294967295|D>>>18),D=I+(b^y&(A^b))+C[8]+1163531501&4294967295,I=A+(D<<20&4294967295|D>>>12),D=y+(A^b&(I^A))+C[13]+2850285829&4294967295,y=I+(D<<5&4294967295|D>>>27),D=b+(I^A&(y^I))+C[2]+4243563512&4294967295,b=y+(D<<9&4294967295|D>>>23),D=A+(y^I&(b^y))+C[7]+1735328473&4294967295,A=b+(D<<14&4294967295|D>>>18),D=I+(b^y&(A^b))+C[12]+2368359562&4294967295,I=A+(D<<20&4294967295|D>>>12),D=y+(I^A^b)+C[5]+4294588738&4294967295,y=I+(D<<4&4294967295|D>>>28),D=b+(y^I^A)+C[8]+2272392833&4294967295,b=y+(D<<11&4294967295|D>>>21),D=A+(b^y^I)+C[11]+1839030562&4294967295,A=b+(D<<16&4294967295|D>>>16),D=I+(A^b^y)+C[14]+4259657740&4294967295,I=A+(D<<23&4294967295|D>>>9),D=y+(I^A^b)+C[1]+2763975236&4294967295,y=I+(D<<4&4294967295|D>>>28),D=b+(y^I^A)+C[4]+1272893353&4294967295,b=y+(D<<11&4294967295|D>>>21),D=A+(b^y^I)+C[7]+4139469664&4294967295,A=b+(D<<16&4294967295|D>>>16),D=I+(A^b^y)+C[10]+3200236656&4294967295,I=A+(D<<23&4294967295|D>>>9),D=y+(I^A^b)+C[13]+681279174&4294967295,y=I+(D<<4&4294967295|D>>>28),D=b+(y^I^A)+C[0]+3936430074&4294967295,b=y+(D<<11&4294967295|D>>>21),D=A+(b^y^I)+C[3]+3572445317&4294967295,A=b+(D<<16&4294967295|D>>>16),D=I+(A^b^y)+C[6]+76029189&4294967295,I=A+(D<<23&4294967295|D>>>9),D=y+(I^A^b)+C[9]+3654602809&4294967295,y=I+(D<<4&4294967295|D>>>28),D=b+(y^I^A)+C[12]+3873151461&4294967295,b=y+(D<<11&4294967295|D>>>21),D=A+(b^y^I)+C[15]+530742520&4294967295,A=b+(D<<16&4294967295|D>>>16),D=I+(A^b^y)+C[2]+3299628645&4294967295,I=A+(D<<23&4294967295|D>>>9),D=y+(A^(I|~b))+C[0]+4096336452&4294967295,y=I+(D<<6&4294967295|D>>>26),D=b+(I^(y|~A))+C[7]+1126891415&4294967295,b=y+(D<<10&4294967295|D>>>22),D=A+(y^(b|~I))+C[14]+2878612391&4294967295,A=b+(D<<15&4294967295|D>>>17),D=I+(b^(A|~y))+C[5]+4237533241&4294967295,I=A+(D<<21&4294967295|D>>>11),D=y+(A^(I|~b))+C[12]+1700485571&4294967295,y=I+(D<<6&4294967295|D>>>26),D=b+(I^(y|~A))+C[3]+2399980690&4294967295,b=y+(D<<10&4294967295|D>>>22),D=A+(y^(b|~I))+C[10]+4293915773&4294967295,A=b+(D<<15&4294967295|D>>>17),D=I+(b^(A|~y))+C[1]+2240044497&4294967295,I=A+(D<<21&4294967295|D>>>11),D=y+(A^(I|~b))+C[8]+1873313359&4294967295,y=I+(D<<6&4294967295|D>>>26),D=b+(I^(y|~A))+C[15]+4264355552&4294967295,b=y+(D<<10&4294967295|D>>>22),D=A+(y^(b|~I))+C[6]+2734768916&4294967295,A=b+(D<<15&4294967295|D>>>17),D=I+(b^(A|~y))+C[13]+1309151649&4294967295,I=A+(D<<21&4294967295|D>>>11),D=y+(A^(I|~b))+C[4]+4149444226&4294967295,y=I+(D<<6&4294967295|D>>>26),D=b+(I^(y|~A))+C[11]+3174756917&4294967295,b=y+(D<<10&4294967295|D>>>22),D=A+(y^(b|~I))+C[2]+718787259&4294967295,A=b+(D<<15&4294967295|D>>>17),D=I+(b^(A|~y))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(A+(D<<21&4294967295|D>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+b&4294967295}r.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var I=y-this.blockSize,C=this.B,A=this.h,b=0;b<y;){if(A==0)for(;b<=I;)i(this,T,b),b+=this.blockSize;if(typeof T=="string"){for(;b<y;)if(C[A++]=T.charCodeAt(b++),A==this.blockSize){i(this,C),A=0;break}}else for(;b<y;)if(C[A++]=T[b++],A==this.blockSize){i(this,C),A=0;break}}this.h=A,this.o+=y},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var I=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=I&255,I/=256;for(this.u(T),T=Array(16),y=I=0;4>y;++y)for(var C=0;32>C;C+=8)T[I++]=this.g[y]>>>C&255;return T};function s(T,y){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=y(T)}function o(T,y){this.h=y;for(var I=[],C=!0,A=T.length-1;0<=A;A--){var b=T[A]|0;C&&b==y||(I[A]=b,C=!1)}this.g=I}var a={};function l(T){return-128<=T&&128>T?s(T,function(y){return new o([y|0],0>y?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return v(u(-T));for(var y=[],I=1,C=0;T>=I;C++)y[C]=T/I|0,I*=4294967296;return new o(y,0)}function c(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return v(c(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(y,8)),C=f,A=0;A<T.length;A+=8){var b=Math.min(8,T.length-A),D=parseInt(T.substring(A,A+b),y);8>b?(b=u(Math.pow(y,b)),C=C.j(b).add(u(D))):(C=C.j(I),C=C.add(u(D)))}return C}var f=l(0),p=l(1),h=l(16777216);t=o.prototype,t.m=function(){if(m(this))return-v(this).m();for(var T=0,y=1,I=0;I<this.g.length;I++){var C=this.i(I);T+=(0<=C?C:4294967296+C)*y,y*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(g(this))return"0";if(m(this))return"-"+v(this).toString(T);for(var y=u(Math.pow(T,6)),I=this,C="";;){var A=k(I,y).g;I=w(I,A.j(y));var b=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=A,g(I))return b+C;for(;6>b.length;)b="0"+b;C=b+C}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function g(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function m(T){return T.h==-1}t.l=function(T){return T=w(this,T),m(T)?-1:g(T)?0:1};function v(T){for(var y=T.g.length,I=[],C=0;C<y;C++)I[C]=~T.g[C];return new o(I,~T.h).add(p)}t.abs=function(){return m(this)?v(this):this},t.add=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],C=0,A=0;A<=y;A++){var b=C+(this.i(A)&65535)+(T.i(A)&65535),D=(b>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);C=D>>>16,b&=65535,D&=65535,I[A]=D<<16|b}return new o(I,I[I.length-1]&-2147483648?-1:0)};function w(T,y){return T.add(v(y))}t.j=function(T){if(g(this)||g(T))return f;if(m(this))return m(T)?v(this).j(v(T)):v(v(this).j(T));if(m(T))return v(this.j(v(T)));if(0>this.l(h)&&0>T.l(h))return u(this.m()*T.m());for(var y=this.g.length+T.g.length,I=[],C=0;C<2*y;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(var A=0;A<T.g.length;A++){var b=this.i(C)>>>16,D=this.i(C)&65535,B=T.i(A)>>>16,O=T.i(A)&65535;I[2*C+2*A]+=D*O,x(I,2*C+2*A),I[2*C+2*A+1]+=b*O,x(I,2*C+2*A+1),I[2*C+2*A+1]+=D*B,x(I,2*C+2*A+1),I[2*C+2*A+2]+=b*B,x(I,2*C+2*A+2)}for(C=0;C<y;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=y;C<2*y;C++)I[C]=0;return new o(I,0)};function x(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function E(T,y){this.g=T,this.h=y}function k(T,y){if(g(y))throw Error("division by zero");if(g(T))return new E(f,f);if(m(T))return y=k(v(T),y),new E(v(y.g),v(y.h));if(m(y))return y=k(T,v(y)),new E(v(y.g),y.h);if(30<T.g.length){if(m(T)||m(y))throw Error("slowDivide_ only works with positive integers.");for(var I=p,C=y;0>=C.l(T);)I=S(I),C=S(C);var A=R(I,1),b=R(C,1);for(C=R(C,2),I=R(I,2);!g(C);){var D=b.add(C);0>=D.l(T)&&(A=A.add(I),b=D),C=R(C,1),I=R(I,1)}return y=w(T,A.j(y)),new E(A,y)}for(A=f;0<=T.l(y);){for(I=Math.max(1,Math.floor(T.m()/y.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),b=u(I),D=b.j(y);m(D)||0<D.l(T);)I-=C,b=u(I),D=b.j(y);g(b)&&(b=p),A=A.add(b),T=w(T,D)}return new E(A,T)}t.A=function(T){return k(this,T).h},t.and=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],C=0;C<y;C++)I[C]=this.i(C)&T.i(C);return new o(I,this.h&T.h)},t.or=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],C=0;C<y;C++)I[C]=this.i(C)|T.i(C);return new o(I,this.h|T.h)},t.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],C=0;C<y;C++)I[C]=this.i(C)^T.i(C);return new o(I,this.h^T.h)};function S(T){for(var y=T.g.length+1,I=[],C=0;C<y;C++)I[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(I,T.h)}function R(T,y){var I=y>>5;y%=32;for(var C=T.g.length-I,A=[],b=0;b<C;b++)A[b]=0<y?T.i(b+I)>>>y|T.i(b+I+1)<<32-y:T.i(b+I);return new o(A,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,mT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,es=o}).apply(typeof ew<"u"?ew:typeof self<"u"?self:typeof window<"u"?window:{});var ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gT,ca,vT,ec,Pp,yT,wT,xT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,_,P){return d==Array.prototype||d==Object.prototype||(d[_]=P.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ku=="object"&&ku];for(var _=0;_<d.length;++_){var P=d[_];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=n(this);function i(d,_){if(_)e:{var P=r;d=d.split(".");for(var V=0;V<d.length-1;V++){var L=d[V];if(!(L in P))break e;P=P[L]}d=d[d.length-1],V=P[d],_=_(V),_!=V&&_!=null&&e(P,d,{configurable:!0,writable:!0,value:_})}}function s(d,_){d instanceof String&&(d+="");var P=0,V=!1,L={next:function(){if(!V&&P<d.length){var j=P++;return{value:_(j,d[j]),done:!1}}return V=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(d){return d||function(){return s(this,function(_,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var _=typeof d;return _=_!="object"?_:d?Array.isArray(d)?"array":_:"null",_=="array"||_=="object"&&typeof d.length=="number"}function u(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function c(d,_,P){return d.call.apply(d.bind,arguments)}function f(d,_,P){if(!d)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,V),d.apply(_,L)}}return function(){return d.apply(_,arguments)}}function p(d,_,P){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,p.apply(null,arguments)}function h(d,_){var P=Array.prototype.slice.call(arguments,1);return function(){var V=P.slice();return V.push.apply(V,arguments),d.apply(this,V)}}function g(d,_){function P(){}P.prototype=_.prototype,d.aa=_.prototype,d.prototype=new P,d.prototype.constructor=d,d.Qb=function(V,L,j){for(var Y=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)Y[Pe-2]=arguments[Pe];return _.prototype[L].apply(V,Y)}}function m(d){const _=d.length;if(0<_){const P=Array(_);for(let V=0;V<_;V++)P[V]=d[V];return P}return[]}function v(d,_){for(let P=1;P<arguments.length;P++){const V=arguments[P];if(l(V)){const L=d.length||0,j=V.length||0;d.length=L+j;for(let Y=0;Y<j;Y++)d[L+Y]=V[Y]}else d.push(V)}}class w{constructor(_,P){this.i=_,this.j=P,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function x(d){return/^[\s\xa0]*$/.test(d)}function E(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function k(d){return k[" "](d),d}k[" "]=function(){};var S=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function R(d,_,P){for(const V in d)_.call(P,d[V],V,d)}function T(d,_){for(const P in d)_.call(void 0,d[P],P,d)}function y(d){const _={};for(const P in d)_[P]=d[P];return _}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(d,_){let P,V;for(let L=1;L<arguments.length;L++){V=arguments[L];for(P in V)d[P]=V[P];for(let j=0;j<I.length;j++)P=I[j],Object.prototype.hasOwnProperty.call(V,P)&&(d[P]=V[P])}}function A(d){var _=1;d=d.split(":");const P=[];for(;0<_&&d.length;)P.push(d.shift()),_--;return d.length&&P.push(d.join(":")),P}function b(d){a.setTimeout(()=>{throw d},0)}function D(){var d=z;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class B{constructor(){this.h=this.g=null}add(_,P){const V=O.get();V.set(_,P),this.h?this.h.next=V:this.g=V,this.h=V}}var O=new w(()=>new K,d=>d.reset());class K{constructor(){this.next=this.g=this.h=null}set(_,P){this.h=_,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let U,F=!1,z=new B,Q=()=>{const d=a.Promise.resolve(void 0);U=()=>{d.then(J)}};var J=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(P){b(P)}var _=O;_.j(d),100>_.h&&(_.h++,d.next=_.g,_.g=d)}F=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var he=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const P=()=>{};a.addEventListener("test",P,_),a.removeEventListener("test",P,_)}catch{}return d}();function de(d,_){if(X.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var P=this.type=d.type,V=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget){if(S){e:{try{k(_.nodeName);var L=!0;break e}catch{}L=!1}L||(_=null)}}else P=="mouseover"?_=d.fromElement:P=="mouseout"&&(_=d.toElement);this.relatedTarget=_,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Z[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&de.aa.h.call(this)}}g(de,X);var Z={2:"touch",3:"pen",4:"mouse"};de.prototype.h=function(){de.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var q="closure_listenable_"+(1e6*Math.random()|0),te=0;function xe(d,_,P,V,L){this.listener=d,this.proxy=null,this.src=_,this.type=P,this.capture=!!V,this.ha=L,this.key=++te,this.da=this.fa=!1}function ie(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ie(d){this.src=d,this.g={},this.h=0}Ie.prototype.add=function(d,_,P,V,L){var j=d.toString();d=this.g[j],d||(d=this.g[j]=[],this.h++);var Y=Ht(d,_,V,L);return-1<Y?(_=d[Y],P||(_.fa=!1)):(_=new xe(_,this.src,j,!!V,L),_.fa=P,d.push(_)),_};function _e(d,_){var P=_.type;if(P in d.g){var V=d.g[P],L=Array.prototype.indexOf.call(V,_,void 0),j;(j=0<=L)&&Array.prototype.splice.call(V,L,1),j&&(ie(_),d.g[P].length==0&&(delete d.g[P],d.h--))}}function Ht(d,_,P,V){for(var L=0;L<d.length;++L){var j=d[L];if(!j.da&&j.listener==_&&j.capture==!!P&&j.ha==V)return L}return-1}var Lt="closure_lm_"+(1e6*Math.random()|0),pn={};function mn(d,_,P,V,L){if(Array.isArray(_)){for(var j=0;j<_.length;j++)mn(d,_[j],P,V,L);return null}return P=Vi(P),d&&d[q]?d.K(_,P,u(V)?!!V.capture:!!V,L):Mi(d,_,P,!1,V,L)}function Mi(d,_,P,V,L,j){if(!_)throw Error("Invalid event type");var Y=u(L)?!!L.capture:!!L,Pe=lr(d);if(Pe||(d[Lt]=Pe=new Ie(d)),P=Pe.add(_,P,V,Y,j),P.proxy)return P;if(V=Or(),P.proxy=V,V.src=d,V.listener=P,d.addEventListener)he||(L=Y),L===void 0&&(L=!1),d.addEventListener(_.toString(),V,L);else if(d.attachEvent)d.attachEvent(Pn(_.toString()),V);else if(d.addListener&&d.removeListener)d.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return P}function Or(){function d(P){return _.call(d.src,d.listener,P)}const _=ar;return d}function yt(d,_,P,V,L){if(Array.isArray(_))for(var j=0;j<_.length;j++)yt(d,_[j],P,V,L);else V=u(V)?!!V.capture:!!V,P=Vi(P),d&&d[q]?(d=d.i,_=String(_).toString(),_ in d.g&&(j=d.g[_],P=Ht(j,P,V,L),-1<P&&(ie(j[P]),Array.prototype.splice.call(j,P,1),j.length==0&&(delete d.g[_],d.h--)))):d&&(d=lr(d))&&(_=d.g[_.toString()],d=-1,_&&(d=Ht(_,P,V,L)),(P=-1<d?_[d]:null)&&Ot(P))}function Ot(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[q])_e(_.i,d);else{var P=d.type,V=d.proxy;_.removeEventListener?_.removeEventListener(P,V,d.capture):_.detachEvent?_.detachEvent(Pn(P),V):_.addListener&&_.removeListener&&_.removeListener(V),(P=lr(_))?(_e(P,d),P.h==0&&(P.src=null,_[Lt]=null)):ie(d)}}}function Pn(d){return d in pn?pn[d]:pn[d]="on"+d}function ar(d,_){if(d.da)d=!0;else{_=new de(_,this);var P=d.listener,V=d.ha||d.src;d.fa&&Ot(d),d=P.call(V,_)}return d}function lr(d){return d=d[Lt],d instanceof Ie?d:null}var ur="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vi(d){return typeof d=="function"?d:(d[ur]||(d[ur]=function(_){return d.handleEvent(_)}),d[ur])}function Ve(){H.call(this),this.i=new Ie(this),this.M=this,this.F=null}g(Ve,H),Ve.prototype[q]=!0,Ve.prototype.removeEventListener=function(d,_,P,V){yt(this,d,_,P,V)};function De(d,_){var P,V=d.F;if(V)for(P=[];V;V=V.F)P.push(V);if(d=d.M,V=_.type||_,typeof _=="string")_=new X(_,d);else if(_ instanceof X)_.target=_.target||d;else{var L=_;_=new X(V,d),C(_,L)}if(L=!0,P)for(var j=P.length-1;0<=j;j--){var Y=_.g=P[j];L=tn(Y,V,!0,_)&&L}if(Y=_.g=d,L=tn(Y,V,!0,_)&&L,L=tn(Y,V,!1,_)&&L,P)for(j=0;j<P.length;j++)Y=_.g=P[j],L=tn(Y,V,!1,_)&&L}Ve.prototype.N=function(){if(Ve.aa.N.call(this),this.i){var d=this.i,_;for(_ in d.g){for(var P=d.g[_],V=0;V<P.length;V++)ie(P[V]);delete d.g[_],d.h--}}this.F=null},Ve.prototype.K=function(d,_,P,V){return this.i.add(String(d),_,!1,P,V)},Ve.prototype.L=function(d,_,P,V){return this.i.add(String(d),_,!0,P,V)};function tn(d,_,P,V){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();for(var L=!0,j=0;j<_.length;++j){var Y=_[j];if(Y&&!Y.da&&Y.capture==P){var Pe=Y.listener,ut=Y.ha||Y.src;Y.fa&&_e(d.i,Y),L=Pe.call(ut,V)!==!1&&L}}return L&&!V.defaultPrevented}function nn(d,_,P){if(typeof d=="function")P&&(d=p(d,P));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(d,_||0)}function Un(d){d.g=nn(()=>{d.g=null,d.i&&(d.i=!1,Un(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class zn extends H{constructor(_,P){super(),this.m=_,this.l=P,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Un(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fr(d){H.call(this),this.h=d,this.g={}}g(Fr,H);var Gl=[];function ql(d){R(d.g,function(_,P){this.g.hasOwnProperty(P)&&Ot(_)},d),d.g={}}Fr.prototype.N=function(){Fr.aa.N.call(this),ql(this)},Fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Es=a.JSON.stringify,uh=a.JSON.parse,Ql=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Fo(){}Fo.prototype.h=null;function Yl(d){return d.h||(d.h=d.i())}function Xl(){}var Le={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function at(){X.call(this,"d")}g(at,X);function lt(){X.call(this,"c")}g(lt,X);var wt={},Ft=null;function xt(){return Ft=Ft||new Ve}wt.La="serverreachability";function rn(d){X.call(this,wt.La,d)}g(rn,X);function gn(d){const _=xt();De(_,new rn(_))}wt.STAT_EVENT="statevent";function Kt(d,_){X.call(this,wt.STAT_EVENT,d),this.stat=_}g(Kt,X);function We(d){const _=xt();De(_,new Kt(_,d))}wt.Ma="timingevent";function jr(d,_){X.call(this,wt.Ma,d),this.size=_}g(jr,X);function $n(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},_)}function Wn(){this.g=!0}Wn.prototype.xa=function(){this.g=!1};function Jl(d,_,P,V,L,j){d.info(function(){if(d.g)if(j)for(var Y="",Pe=j.split("&"),ut=0;ut<Pe.length;ut++){var ye=Pe[ut].split("=");if(1<ye.length){var _t=ye[0];ye=ye[1];var Et=_t.split("_");Y=2<=Et.length&&Et[1]=="type"?Y+(_t+"="+ye+"&"):Y+(_t+"=redacted&")}}else Y=null;else Y=j;return"XMLHTTP REQ ("+V+") [attempt "+L+"]: "+_+`
`+P+`
`+Y})}function Li(d,_,P,V,L,j,Y){d.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+L+"]: "+_+`
`+P+`
`+j+" "+Y})}function vn(d,_,P,V){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+CP(d,P)+(V?" "+V:"")})}function jo(d,_){d.info(function(){return"TIMEOUT: "+_})}Wn.prototype.info=function(){};function CP(d,_){if(!d.g)return _;if(!_)return null;try{var P=JSON.parse(_);if(P){for(d=0;d<P.length;d++)if(Array.isArray(P[d])){var V=P[d];if(!(2>V.length)){var L=V[1];if(Array.isArray(L)&&!(1>L.length)){var j=L[0];if(j!="noop"&&j!="stop"&&j!="close")for(var Y=1;Y<L.length;Y++)L[Y]=""}}}}return Es(P)}catch{return _}}var Zl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ch;function eu(){}g(eu,Fo),eu.prototype.g=function(){return new XMLHttpRequest},eu.prototype.i=function(){return{}},ch=new eu;function Br(d,_,P,V){this.j=d,this.i=_,this.l=P,this.R=V||1,this.U=new Fr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $v}function $v(){this.i=null,this.g="",this.h=!1}var Wv={},dh={};function hh(d,_,P){d.L=1,d.v=iu(cr(_)),d.m=P,d.P=!0,Hv(d,null)}function Hv(d,_){d.F=Date.now(),tu(d),d.A=cr(d.v);var P=d.A,V=d.R;Array.isArray(V)||(V=[String(V)]),sy(P.i,"t",V),d.C=0,P=d.j.J,d.h=new $v,d.g=Ty(d.j,P?_:null,!d.m),0<d.O&&(d.M=new zn(p(d.Y,d,d.g),d.O)),_=d.U,P=d.g,V=d.ca;var L="readystatechange";Array.isArray(L)||(L&&(Gl[0]=L.toString()),L=Gl);for(var j=0;j<L.length;j++){var Y=mn(P,L[j],V||_.handleEvent,!1,_.h||_);if(!Y)break;_.g[Y.key]=Y}_=d.H?y(d.H):{},d.m?(d.u||(d.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,_)):(d.u="GET",d.g.ea(d.A,d.u,null,_)),gn(),Jl(d.i,d.u,d.A,d.l,d.R,d.m)}Br.prototype.ca=function(d){d=d.target;const _=this.M;_&&dr(d)==3?_.j():this.Y(d)},Br.prototype.Y=function(d){try{if(d==this.g)e:{const Et=dr(this.g);var _=this.g.Ba();const Cs=this.g.Z();if(!(3>Et)&&(Et!=3||this.g&&(this.h.h||this.g.oa()||hy(this.g)))){this.J||Et!=4||_==7||(_==8||0>=Cs?gn(3):gn(2)),fh(this);var P=this.g.Z();this.X=P;t:if(Kv(this)){var V=hy(this.g);d="";var L=V.length,j=dr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Oi(this),Bo(this);var Y="";break t}this.h.i=new a.TextDecoder}for(_=0;_<L;_++)this.h.h=!0,d+=this.h.i.decode(V[_],{stream:!(j&&_==L-1)});V.length=0,this.h.g+=d,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=P==200,Li(this.i,this.u,this.A,this.l,this.R,Et,P),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,ut=this.g;if((Pe=ut.g?ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Pe)){var ye=Pe;break t}}ye=null}if(P=ye)vn(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ph(this,P);else{this.o=!1,this.s=3,We(12),Oi(this),Bo(this);break e}}if(this.P){P=!0;let An;for(;!this.J&&this.C<Y.length;)if(An=IP(this,Y),An==dh){Et==4&&(this.s=4,We(14),P=!1),vn(this.i,this.l,null,"[Incomplete Response]");break}else if(An==Wv){this.s=4,We(15),vn(this.i,this.l,Y,"[Invalid Chunk]"),P=!1;break}else vn(this.i,this.l,An,null),ph(this,An);if(Kv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||Y.length!=0||this.h.h||(this.s=1,We(16),P=!1),this.o=this.o&&P,!P)vn(this.i,this.l,Y,"[Invalid Chunked Response]"),Oi(this),Bo(this);else if(0<Y.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),xh(_t),_t.M=!0,We(11))}}else vn(this.i,this.l,Y,null),ph(this,Y);Et==4&&Oi(this),this.o&&!this.J&&(Et==4?wy(this.j,this):(this.o=!1,tu(this)))}else $P(this.g),P==400&&0<Y.indexOf("Unknown SID")?(this.s=3,We(12)):(this.s=0,We(13)),Oi(this),Bo(this)}}}catch{}finally{}};function Kv(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function IP(d,_){var P=d.C,V=_.indexOf(`
`,P);return V==-1?dh:(P=Number(_.substring(P,V)),isNaN(P)?Wv:(V+=1,V+P>_.length?dh:(_=_.slice(V,V+P),d.C=V+P,_)))}Br.prototype.cancel=function(){this.J=!0,Oi(this)};function tu(d){d.S=Date.now()+d.I,Gv(d,d.I)}function Gv(d,_){if(d.B!=null)throw Error("WatchDog timer not null");d.B=$n(p(d.ba,d),_)}function fh(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Br.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(jo(this.i,this.A),this.L!=2&&(gn(),We(17)),Oi(this),this.s=2,Bo(this)):Gv(this,this.S-d)};function Bo(d){d.j.G==0||d.J||wy(d.j,d)}function Oi(d){fh(d);var _=d.M;_&&typeof _.ma=="function"&&_.ma(),d.M=null,ql(d.U),d.g&&(_=d.g,d.g=null,_.abort(),_.ma())}function ph(d,_){try{var P=d.j;if(P.G!=0&&(P.g==d||mh(P.h,d))){if(!d.K&&mh(P.h,d)&&P.G==3){try{var V=P.Da.g.parse(_)}catch{V=null}if(Array.isArray(V)&&V.length==3){var L=V;if(L[0]==0){e:if(!P.u){if(P.g)if(P.g.F+3e3<d.F)cu(P),lu(P);else break e;wh(P),We(18)}}else P.za=L[1],0<P.za-P.T&&37500>L[2]&&P.F&&P.v==0&&!P.C&&(P.C=$n(p(P.Za,P),6e3));if(1>=Yv(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else ji(P,11)}else if((d.K||P.g==d)&&cu(P),!x(_))for(L=P.Da.g.parse(_),_=0;_<L.length;_++){let ye=L[_];if(P.T=ye[0],ye=ye[1],P.G==2)if(ye[0]=="c"){P.K=ye[1],P.ia=ye[2];const _t=ye[3];_t!=null&&(P.la=_t,P.j.info("VER="+P.la));const Et=ye[4];Et!=null&&(P.Aa=Et,P.j.info("SVER="+P.Aa));const Cs=ye[5];Cs!=null&&typeof Cs=="number"&&0<Cs&&(V=1.5*Cs,P.L=V,P.j.info("backChannelRequestTimeoutMs_="+V)),V=P;const An=d.g;if(An){const hu=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hu){var j=V.h;j.g||hu.indexOf("spdy")==-1&&hu.indexOf("quic")==-1&&hu.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(gh(j,j.h),j.h=null))}if(V.D){const _h=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;_h&&(V.ya=_h,Re(V.I,V.D,_h))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-d.F,P.j.info("Handshake RTT: "+P.R+"ms")),V=P;var Y=d;if(V.qa=Ey(V,V.J?V.ia:null,V.W),Y.K){Xv(V.h,Y);var Pe=Y,ut=V.L;ut&&(Pe.I=ut),Pe.B&&(fh(Pe),tu(Pe)),V.g=Y}else vy(V);0<P.i.length&&uu(P)}else ye[0]!="stop"&&ye[0]!="close"||ji(P,7);else P.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?ji(P,7):yh(P):ye[0]!="noop"&&P.l&&P.l.ta(ye),P.v=0)}}gn(4)}catch{}}var PP=class{constructor(d,_){this.g=d,this.map=_}};function qv(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qv(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Yv(d){return d.h?1:d.g?d.g.size:0}function mh(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function gh(d,_){d.g?d.g.add(_):d.h=_}function Xv(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}qv.prototype.cancel=function(){if(this.i=Jv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Jv(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const P of d.g.values())_=_.concat(P.D);return _}return m(d.i)}function AP(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var _=[],P=d.length,V=0;V<P;V++)_.push(d[V]);return _}_=[],P=0;for(V in d)_[P++]=d[V];return _}function RP(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var _=[];d=d.length;for(var P=0;P<d;P++)_.push(P);return _}_=[],P=0;for(const V in d)_[P++]=V;return _}}}function Zv(d,_){if(d.forEach&&typeof d.forEach=="function")d.forEach(_,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,_,void 0);else for(var P=RP(d),V=AP(d),L=V.length,j=0;j<L;j++)_.call(void 0,V[j],P&&P[j],d)}var ey=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kP(d,_){if(d){d=d.split("&");for(var P=0;P<d.length;P++){var V=d[P].indexOf("="),L=null;if(0<=V){var j=d[P].substring(0,V);L=d[P].substring(V+1)}else j=d[P];_(j,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Fi(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Fi){this.h=d.h,nu(this,d.j),this.o=d.o,this.g=d.g,ru(this,d.s),this.l=d.l;var _=d.i,P=new $o;P.i=_.i,_.g&&(P.g=new Map(_.g),P.h=_.h),ty(this,P),this.m=d.m}else d&&(_=String(d).match(ey))?(this.h=!1,nu(this,_[1]||"",!0),this.o=Uo(_[2]||""),this.g=Uo(_[3]||"",!0),ru(this,_[4]),this.l=Uo(_[5]||"",!0),ty(this,_[6]||"",!0),this.m=Uo(_[7]||"")):(this.h=!1,this.i=new $o(null,this.h))}Fi.prototype.toString=function(){var d=[],_=this.j;_&&d.push(zo(_,ny,!0),":");var P=this.g;return(P||_=="file")&&(d.push("//"),(_=this.o)&&d.push(zo(_,ny,!0),"@"),d.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&d.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&d.push("/"),d.push(zo(P,P.charAt(0)=="/"?NP:DP,!0))),(P=this.i.toString())&&d.push("?",P),(P=this.m)&&d.push("#",zo(P,VP)),d.join("")};function cr(d){return new Fi(d)}function nu(d,_,P){d.j=P?Uo(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function ru(d,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);d.s=_}else d.s=null}function ty(d,_,P){_ instanceof $o?(d.i=_,LP(d.i,d.h)):(P||(_=zo(_,MP)),d.i=new $o(_,d.h))}function Re(d,_,P){d.i.set(_,P)}function iu(d){return Re(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Uo(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function zo(d,_,P){return typeof d=="string"?(d=encodeURI(d).replace(_,bP),P&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function bP(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var ny=/[#\/\?@]/g,DP=/[#\?:]/g,NP=/[#\?]/g,MP=/[#\?@]/g,VP=/#/g;function $o(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Ur(d){d.g||(d.g=new Map,d.h=0,d.i&&kP(d.i,function(_,P){d.add(decodeURIComponent(_.replace(/\+/g," ")),P)}))}t=$o.prototype,t.add=function(d,_){Ur(this),this.i=null,d=Ts(this,d);var P=this.g.get(d);return P||this.g.set(d,P=[]),P.push(_),this.h+=1,this};function ry(d,_){Ur(d),_=Ts(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function iy(d,_){return Ur(d),_=Ts(d,_),d.g.has(_)}t.forEach=function(d,_){Ur(this),this.g.forEach(function(P,V){P.forEach(function(L){d.call(_,L,V,this)},this)},this)},t.na=function(){Ur(this);const d=Array.from(this.g.values()),_=Array.from(this.g.keys()),P=[];for(let V=0;V<_.length;V++){const L=d[V];for(let j=0;j<L.length;j++)P.push(_[V])}return P},t.V=function(d){Ur(this);let _=[];if(typeof d=="string")iy(this,d)&&(_=_.concat(this.g.get(Ts(this,d))));else{d=Array.from(this.g.values());for(let P=0;P<d.length;P++)_=_.concat(d[P])}return _},t.set=function(d,_){return Ur(this),this.i=null,d=Ts(this,d),iy(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},t.get=function(d,_){return d?(d=this.V(d),0<d.length?String(d[0]):_):_};function sy(d,_,P){ry(d,_),0<P.length&&(d.i=null,d.g.set(Ts(d,_),m(P)),d.h+=P.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(var P=0;P<_.length;P++){var V=_[P];const j=encodeURIComponent(String(V)),Y=this.V(V);for(V=0;V<Y.length;V++){var L=j;Y[V]!==""&&(L+="="+encodeURIComponent(String(Y[V]))),d.push(L)}}return this.i=d.join("&")};function Ts(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function LP(d,_){_&&!d.j&&(Ur(d),d.i=null,d.g.forEach(function(P,V){var L=V.toLowerCase();V!=L&&(ry(this,V),sy(this,L,P))},d)),d.j=_}function OP(d,_){const P=new Wn;if(a.Image){const V=new Image;V.onload=h(zr,P,"TestLoadImage: loaded",!0,_,V),V.onerror=h(zr,P,"TestLoadImage: error",!1,_,V),V.onabort=h(zr,P,"TestLoadImage: abort",!1,_,V),V.ontimeout=h(zr,P,"TestLoadImage: timeout",!1,_,V),a.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=d}else _(!1)}function FP(d,_){const P=new Wn,V=new AbortController,L=setTimeout(()=>{V.abort(),zr(P,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:V.signal}).then(j=>{clearTimeout(L),j.ok?zr(P,"TestPingServer: ok",!0,_):zr(P,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(L),zr(P,"TestPingServer: error",!1,_)})}function zr(d,_,P,V,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),V(P)}catch{}}function jP(){this.g=new Ql}function BP(d,_,P){const V=P||"";try{Zv(d,function(L,j){let Y=L;u(L)&&(Y=Es(L)),_.push(V+j+"="+encodeURIComponent(Y))})}catch(L){throw _.push(V+"type="+encodeURIComponent("_badmap")),L}}function su(d){this.l=d.Ub||null,this.j=d.eb||!1}g(su,Fo),su.prototype.g=function(){return new ou(this.l,this.j)},su.prototype.i=function(d){return function(){return d}}({});function ou(d,_){Ve.call(this),this.D=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(ou,Ve),t=ou.prototype,t.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=_,this.readyState=1,Ho(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(_.body=d),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wo(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ho(this)),this.g&&(this.readyState=3,Ho(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;oy(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function oy(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?Wo(this):Ho(this),this.readyState==3&&oy(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Wo(this))},t.Qa=function(d){this.g&&(this.response=d,Wo(this))},t.ga=function(){this.g&&Wo(this)};function Wo(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Ho(d)}t.setRequestHeader=function(d,_){this.u.append(d,_)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var P=_.next();!P.done;)P=P.value,d.push(P[0]+": "+P[1]),P=_.next();return d.join(`\r
`)};function Ho(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ou.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ay(d){let _="";return R(d,function(P,V){_+=V,_+=":",_+=P,_+=`\r
`}),_}function vh(d,_,P){e:{for(V in P){var V=!1;break e}V=!0}V||(P=ay(P),typeof d=="string"?P!=null&&encodeURIComponent(String(P)):Re(d,_,P))}function ze(d){Ve.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(ze,Ve);var UP=/^https?$/i,zP=["POST","PUT"];t=ze.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,_,P,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ch.g(),this.v=this.o?Yl(this.o):Yl(ch),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(j){ly(this,j);return}if(d=P||"",P=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var L in V)P.set(L,V[L]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const j of V.keys())P.set(j,V.get(j));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(P.keys()).find(j=>j.toLowerCase()=="content-type"),L=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(zP,_,void 0))||V||L||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,Y]of P)this.g.setRequestHeader(j,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{dy(this),this.u=!0,this.g.send(d),this.u=!1}catch(j){ly(this,j)}};function ly(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.m=5,uy(d),au(d)}function uy(d){d.A||(d.A=!0,De(d,"complete"),De(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,De(this,"complete"),De(this,"abort"),au(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),au(this,!0)),ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?cy(this):this.bb())},t.bb=function(){cy(this)};function cy(d){if(d.h&&typeof o<"u"&&(!d.v[1]||dr(d)!=4||d.Z()!=2)){if(d.u&&dr(d)==4)nn(d.Ea,0,d);else if(De(d,"readystatechange"),dr(d)==4){d.h=!1;try{const Y=d.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var P;if(!(P=_)){var V;if(V=Y===0){var L=String(d.D).match(ey)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),V=!UP.test(L?L.toLowerCase():"")}P=V}if(P)De(d,"complete"),De(d,"success");else{d.m=6;try{var j=2<dr(d)?d.g.statusText:""}catch{j=""}d.l=j+" ["+d.Z()+"]",uy(d)}}finally{au(d)}}}}function au(d,_){if(d.g){dy(d);const P=d.g,V=d.v[0]?()=>{}:null;d.g=null,d.v=null,_||De(d,"ready");try{P.onreadystatechange=V}catch{}}}function dy(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function dr(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<dr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),uh(_)}};function hy(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function $P(d){const _={};d=(d.g&&2<=dr(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<d.length;V++){if(x(d[V]))continue;var P=A(d[V]);const L=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const j=_[L]||[];_[L]=j,j.push(P)}T(_,function(V){return V.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ko(d,_,P){return P&&P.internalChannelParams&&P.internalChannelParams[d]||_}function fy(d){this.Aa=0,this.i=[],this.j=new Wn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ko("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ko("baseRetryDelayMs",5e3,d),this.cb=Ko("retryDelaySeedMs",1e4,d),this.Wa=Ko("forwardChannelMaxRetries",2,d),this.wa=Ko("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new qv(d&&d.concurrentRequestLimit),this.Da=new jP,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=fy.prototype,t.la=8,t.G=1,t.connect=function(d,_,P,V){We(0),this.W=d,this.H=_||{},P&&V!==void 0&&(this.H.OSID=P,this.H.OAID=V),this.F=this.X,this.I=Ey(this,null,this.W),uu(this)};function yh(d){if(py(d),d.G==3){var _=d.U++,P=cr(d.I);if(Re(P,"SID",d.K),Re(P,"RID",_),Re(P,"TYPE","terminate"),Go(d,P),_=new Br(d,d.j,_),_.L=2,_.v=iu(cr(P)),P=!1,a.navigator&&a.navigator.sendBeacon)try{P=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!P&&a.Image&&(new Image().src=_.v,P=!0),P||(_.g=Ty(_.j,null),_.g.ea(_.v)),_.F=Date.now(),tu(_)}_y(d)}function lu(d){d.g&&(xh(d),d.g.cancel(),d.g=null)}function py(d){lu(d),d.u&&(a.clearTimeout(d.u),d.u=null),cu(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function uu(d){if(!Qv(d.h)&&!d.s){d.s=!0;var _=d.Ga;U||Q(),F||(U(),F=!0),z.add(_,d),d.B=0}}function WP(d,_){return Yv(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=_.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=$n(p(d.Ga,d,_),xy(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const L=new Br(this,this.j,d);let j=this.o;if(this.S&&(j?(j=y(j),C(j,this.S)):j=this.S),this.m!==null||this.O||(L.H=j,j=null),this.P)e:{for(var _=0,P=0;P<this.i.length;P++){t:{var V=this.i[P];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(_+=V,4096<_){_=P;break e}if(_===4096||P===this.i.length-1){_=P+1;break e}}_=1e3}else _=1e3;_=gy(this,L,_),P=cr(this.I),Re(P,"RID",d),Re(P,"CVER",22),this.D&&Re(P,"X-HTTP-Session-Id",this.D),Go(this,P),j&&(this.O?_="headers="+encodeURIComponent(String(ay(j)))+"&"+_:this.m&&vh(P,this.m,j)),gh(this.h,L),this.Ua&&Re(P,"TYPE","init"),this.P?(Re(P,"$req",_),Re(P,"SID","null"),L.T=!0,hh(L,P,null)):hh(L,P,_),this.G=2}}else this.G==3&&(d?my(this,d):this.i.length==0||Qv(this.h)||my(this))};function my(d,_){var P;_?P=_.l:P=d.U++;const V=cr(d.I);Re(V,"SID",d.K),Re(V,"RID",P),Re(V,"AID",d.T),Go(d,V),d.m&&d.o&&vh(V,d.m,d.o),P=new Br(d,d.j,P,d.B+1),d.m===null&&(P.H=d.o),_&&(d.i=_.D.concat(d.i)),_=gy(d,P,1e3),P.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),gh(d.h,P),hh(P,V,_)}function Go(d,_){d.H&&R(d.H,function(P,V){Re(_,V,P)}),d.l&&Zv({},function(P,V){Re(_,V,P)})}function gy(d,_,P){P=Math.min(d.i.length,P);var V=d.l?p(d.l.Na,d.l,d):null;e:{var L=d.i;let j=-1;for(;;){const Y=["count="+P];j==-1?0<P?(j=L[0].g,Y.push("ofs="+j)):j=0:Y.push("ofs="+j);let Pe=!0;for(let ut=0;ut<P;ut++){let ye=L[ut].g;const _t=L[ut].map;if(ye-=j,0>ye)j=Math.max(0,L[ut].g-100),Pe=!1;else try{BP(_t,Y,"req"+ye+"_")}catch{V&&V(_t)}}if(Pe){V=Y.join("&");break e}}}return d=d.i.splice(0,P),_.D=d,V}function vy(d){if(!d.g&&!d.u){d.Y=1;var _=d.Fa;U||Q(),F||(U(),F=!0),z.add(_,d),d.v=0}}function wh(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=$n(p(d.Fa,d),xy(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,yy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=$n(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,We(10),lu(this),yy(this))};function xh(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function yy(d){d.g=new Br(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var _=cr(d.qa);Re(_,"RID","rpc"),Re(_,"SID",d.K),Re(_,"AID",d.T),Re(_,"CI",d.F?"0":"1"),!d.F&&d.ja&&Re(_,"TO",d.ja),Re(_,"TYPE","xmlhttp"),Go(d,_),d.m&&d.o&&vh(_,d.m,d.o),d.L&&(d.g.I=d.L);var P=d.g;d=d.ia,P.L=1,P.v=iu(cr(_)),P.m=null,P.P=!0,Hv(P,d)}t.Za=function(){this.C!=null&&(this.C=null,lu(this),wh(this),We(19))};function cu(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function wy(d,_){var P=null;if(d.g==_){cu(d),xh(d),d.g=null;var V=2}else if(mh(d.h,_))P=_.D,Xv(d.h,_),V=1;else return;if(d.G!=0){if(_.o)if(V==1){P=_.m?_.m.length:0,_=Date.now()-_.F;var L=d.B;V=xt(),De(V,new jr(V,P)),uu(d)}else vy(d);else if(L=_.s,L==3||L==0&&0<_.X||!(V==1&&WP(d,_)||V==2&&wh(d)))switch(P&&0<P.length&&(_=d.h,_.i=_.i.concat(P)),L){case 1:ji(d,5);break;case 4:ji(d,10);break;case 3:ji(d,6);break;default:ji(d,2)}}}function xy(d,_){let P=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(P*=2),P*_}function ji(d,_){if(d.j.info("Error code "+_),_==2){var P=p(d.fb,d),V=d.Xa;const L=!V;V=new Fi(V||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||nu(V,"https"),iu(V),L?OP(V.toString(),P):FP(V.toString(),P)}else We(2);d.G=0,d.l&&d.l.sa(_),_y(d),py(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),We(2)):(this.j.info("Failed to ping google.com"),We(1))};function _y(d){if(d.G=0,d.ka=[],d.l){const _=Jv(d.h);(_.length!=0||d.i.length!=0)&&(v(d.ka,_),v(d.ka,d.i),d.h.i.length=0,m(d.i),d.i.length=0),d.l.ra()}}function Ey(d,_,P){var V=P instanceof Fi?cr(P):new Fi(P);if(V.g!="")_&&(V.g=_+"."+V.g),ru(V,V.s);else{var L=a.location;V=L.protocol,_=_?_+"."+L.hostname:L.hostname,L=+L.port;var j=new Fi(null);V&&nu(j,V),_&&(j.g=_),L&&ru(j,L),P&&(j.l=P),V=j}return P=d.D,_=d.ya,P&&_&&Re(V,P,_),Re(V,"VER",d.la),Go(d,V),V}function Ty(d,_,P){if(_&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Ca&&!d.pa?new ze(new su({eb:P})):new ze(d.pa),_.Ha(d.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sy(){}t=Sy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function du(){}du.prototype.g=function(d,_){return new sn(d,_)};function sn(d,_){Ve.call(this),this.g=new fy(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(d?d["X-WebChannel-Client-Profile"]=_.va:d={"X-WebChannel-Client-Profile":_.va}),this.g.S=d,(d=_&&_.Sb)&&!x(d)&&(this.g.m=d),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!x(_)&&(this.g.D=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new Ss(this)}g(sn,Ve),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){yh(this.g)},sn.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var P={};P.__data__=d,d=P}else this.u&&(P={},P.__data__=Es(d),d=P);_.i.push(new PP(_.Ya++,d)),_.G==3&&uu(_)},sn.prototype.N=function(){this.g.l=null,delete this.j,yh(this.g),delete this.g,sn.aa.N.call(this)};function Cy(d){at.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const P in _){d=P;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}g(Cy,at);function Iy(){lt.call(this),this.status=1}g(Iy,lt);function Ss(d){this.g=d}g(Ss,Sy),Ss.prototype.ua=function(){De(this.g,"a")},Ss.prototype.ta=function(d){De(this.g,new Cy(d))},Ss.prototype.sa=function(d){De(this.g,new Iy)},Ss.prototype.ra=function(){De(this.g,"b")},du.prototype.createWebChannel=du.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,xT=function(){return new du},wT=function(){return xt()},yT=wt,Pp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zl.NO_ERROR=0,Zl.TIMEOUT=8,Zl.HTTP_ERROR=6,ec=Zl,zv.COMPLETE="complete",vT=zv,Xl.EventType=Le,Le.OPEN="a",Le.CLOSE="b",Le.ERROR="c",Le.MESSAGE="d",Ve.prototype.listen=Ve.prototype.K,ca=Xl,ze.prototype.listenOnce=ze.prototype.L,ze.prototype.getLastError=ze.prototype.Ka,ze.prototype.getLastErrorCode=ze.prototype.Ba,ze.prototype.getStatus=ze.prototype.Z,ze.prototype.getResponseJson=ze.prototype.Oa,ze.prototype.getResponseText=ze.prototype.oa,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Ha,gT=ze}).apply(typeof ku<"u"?ku:typeof self<"u"?self:typeof window<"u"?window:{});const tw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pt.UNAUTHENTICATED=new Pt(null),Pt.GOOGLE_CREDENTIALS=new Pt("google-credentials-uid"),Pt.FIRST_PARTY=new Pt("first-party-uid"),Pt.MOCK_USER=new Pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ro="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new cg("@firebase/firestore");function na(){return us.logLevel}function ne(t,...e){if(us.logLevel<=me.DEBUG){const n=e.map(fg);us.debug(`Firestore (${Ro}): ${t}`,...n)}}function Dr(t,...e){if(us.logLevel<=me.ERROR){const n=e.map(fg);us.error(`Firestore (${Ro}): ${t}`,...n)}}function po(t,...e){if(us.logLevel<=me.WARN){const n=e.map(fg);us.warn(`Firestore (${Ro}): ${t}`,...n)}}function fg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t="Unexpected state"){const e=`FIRESTORE (${Ro}) INTERNAL ASSERTION FAILED: `+t;throw Dr(e),new Error(e)}function Se(t,e){t||le()}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Lr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class X2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Pt.UNAUTHENTICATED))}shutdown(){}}class J2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Z2{constructor(e){this.t=e,this.currentUser=Pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new _r,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new _r)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string"),new _T(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string"),new Pt(e)}}class eD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class tD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new eD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Se(this.o===void 0);const r=s=>{s.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se(typeof n.token=="string"),this.R=n.token,new nD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=iD(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function we(t,e){return t<e?-1:t>e?1:0}function mo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new re($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new nt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new nt(0,0))}static max(){return new ue(new nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(),r===void 0?r=e.length-n:r>e.length-n&&le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return rl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Me extends rl{construct(e,n,r){return new Me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Me(n)}static emptyPath(){return new Me([])}}const sD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ft extends rl{construct(e,n,r){return new ft(e,n,r)}static isValidIdentifier(e){return sD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ft(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new re($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new re($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new re($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new re($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ft(n)}static emptyPath(){return new ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(Me.fromString(e))}static fromName(e){return new se(Me.fromString(e).popFirst(5))}static empty(){return new se(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Me(e.slice()))}}function oD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new xi(i,se.empty(),e)}function aD(t){return new xi(t.readTime,t.key,-1)}class xi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xi(ue.min(),se.empty(),-1)}static max(){return new xi(ue.max(),se.empty(),-1)}}function lD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==uD)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,r)=>{n(e)})}static reject(e){return new W((n,r)=>{r(e)})}static waitFor(e){return new W((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next(i=>i?W.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new W((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new W((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function dD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Rl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}pg.oe=-1;function Md(t){return t==null}function $c(t){return t===0&&1/t==-1/0}function hD(t){return typeof t=="number"&&Number.isInteger(t)&&!$c(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ws(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function TT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||ht.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bu(this.root,e,this.comparator,!1)}getReverseIterator(){return new bu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bu(this.root,e,this.comparator,!0)}}class bu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ht.RED,this.left=i??ht.EMPTY,this.right=s??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ht(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ht.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1;ht.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rw(this.data.getIterator())}getIteratorFrom(e){return new rw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mt(this.comparator);return n.data=e,n}}class rw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new ln([])}unionWith(e){let n=new mt(ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return mo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ST("Invalid base64 string: "+s):s}}(e);return new vt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const fD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _i(t){if(Se(!!t),typeof t=="string"){let e=0;const n=fD.exec(t);if(Se(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function cs(t){return typeof t=="string"?vt.fromBase64String(t):vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function gg(t){const e=t.mapValue.fields.__previous_value__;return mg(e)?gg(e):e}function il(t){const e=_i(t.mapValue.fields.__local_write_time__.timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class sl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new sl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mg(t)?4:gD(t)?9007199254740991:mD(t)?10:11:le()}function ir(t,e){if(t===e)return!0;const n=ds(t);if(n!==ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return il(t).isEqual(il(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=_i(i.timestampValue),a=_i(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return cs(i.bytesValue).isEqual(cs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ke(i.geoPointValue.latitude)===Ke(s.geoPointValue.latitude)&&Ke(i.geoPointValue.longitude)===Ke(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ke(i.integerValue)===Ke(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ke(i.doubleValue),a=Ke(s.doubleValue);return o===a?$c(o)===$c(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return mo(t.arrayValue.values||[],e.arrayValue.values||[],ir);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(nw(o)!==nw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ir(o[l],a[l])))return!1;return!0}(t,e);default:return le()}}function ol(t,e){return(t.values||[]).find(n=>ir(n,e))!==void 0}function go(t,e){if(t===e)return 0;const n=ds(t),r=ds(e);if(n!==r)return we(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ke(s.integerValue||s.doubleValue),l=Ke(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return iw(t.timestampValue,e.timestampValue);case 4:return iw(il(t),il(e));case 5:return we(t.stringValue,e.stringValue);case 6:return function(s,o){const a=cs(s),l=cs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=we(a[u],l[u]);if(c!==0)return c}return we(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=we(Ke(s.latitude),Ke(o.latitude));return a!==0?a:we(Ke(s.longitude),Ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return sw(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,c;const f=s.fields||{},p=o.fields||{},h=(a=f.value)===null||a===void 0?void 0:a.arrayValue,g=(l=p.value)===null||l===void 0?void 0:l.arrayValue,m=we(((u=h==null?void 0:h.values)===null||u===void 0?void 0:u.length)||0,((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0);return m!==0?m:sw(h,g)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Du.mapValue&&o===Du.mapValue)return 0;if(s===Du.mapValue)return 1;if(o===Du.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let f=0;f<l.length&&f<c.length;++f){const p=we(l[f],c[f]);if(p!==0)return p;const h=go(a[l[f]],u[c[f]]);if(h!==0)return h}return we(l.length,c.length)}(t.mapValue,e.mapValue);default:throw le()}}function iw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);const n=_i(t),r=_i(e),i=we(n.seconds,r.seconds);return i!==0?i:we(n.nanos,r.nanos)}function sw(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=go(n[i],r[i]);if(s)return s}return we(n.length,r.length)}function vo(t){return Ap(t)}function Ap(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=_i(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return cs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Ap(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Ap(n.fields[o])}`;return i+"}"}(t.mapValue):le()}function Rp(t){return!!t&&"integerValue"in t}function vg(t){return!!t&&"arrayValue"in t}function ow(t){return!!t&&"nullValue"in t}function aw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tc(t){return!!t&&"mapValue"in t}function mD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ia(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ws(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ia(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ia(t.arrayValue.values[n]);return e}return Object.assign({},t)}function gD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.value=e}static empty(){return new qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!tc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ia(n)}setAll(e){let n=ft.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ia(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());tc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ir(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];tc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ws(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new qt(Ia(this.value))}}function CT(t){const e=[];return ws(t.fields,(n,r)=>{const i=new ft([n]);if(tc(r)){const s=CT(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Rt(e,0,ue.min(),ue.min(),ue.min(),qt.empty(),0)}static newFoundDocument(e,n,r,i){return new Rt(e,1,n,ue.min(),r,i,0)}static newNoDocument(e,n){return new Rt(e,2,n,ue.min(),ue.min(),qt.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,ue.min(),ue.min(),qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n){this.position=e,this.inclusive=n}}function lw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=se.comparator(se.fromName(o.referenceValue),n.key):r=go(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function uw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ir(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n="asc"){this.field=e,this.dir=n}}function vD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{}class et extends IT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new wD(e,n,r):n==="array-contains"?new ED(e,r):n==="in"?new TD(e,r):n==="not-in"?new SD(e,r):n==="array-contains-any"?new CD(e,r):new et(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xD(e,r):new _D(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(go(n,this.value)):n!==null&&ds(this.value)===ds(n)&&this.matchesComparison(go(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sr extends IT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new sr(e,n)}matches(e){return PT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function PT(t){return t.op==="and"}function AT(t){return yD(t)&&PT(t)}function yD(t){for(const e of t.filters)if(e instanceof sr)return!1;return!0}function kp(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+vo(t.value);if(AT(t))return t.filters.map(e=>kp(e)).join(",");{const e=t.filters.map(n=>kp(n)).join(",");return`${t.op}(${e})`}}function RT(t,e){return t instanceof et?function(r,i){return i instanceof et&&r.op===i.op&&r.field.isEqual(i.field)&&ir(r.value,i.value)}(t,e):t instanceof sr?function(r,i){return i instanceof sr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&RT(o,i.filters[a]),!0):!1}(t,e):void le()}function kT(t){return t instanceof et?function(n){return`${n.field.canonicalString()} ${n.op} ${vo(n.value)}`}(t):t instanceof sr?function(n){return n.op.toString()+" {"+n.getFilters().map(kT).join(" ,")+"}"}(t):"Filter"}class wD extends et{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class xD extends et{constructor(e,n){super(e,"in",n),this.keys=bT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class _D extends et{constructor(e,n){super(e,"not-in",n),this.keys=bT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>se.fromName(r.referenceValue))}class ED extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vg(n)&&ol(n.arrayValue,this.value)}}class TD extends et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ol(this.value.arrayValue,n)}}class SD extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ol(this.value.arrayValue,n)}}class CD extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ol(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function cw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new ID(t,e,n,r,i,s,o)}function yg(t){const e=ce(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>kp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Md(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vo(r)).join(",")),e.ue=n}return e.ue}function wg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uw(t.startAt,e.startAt)&&uw(t.endAt,e.endAt)}function bp(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function PD(t,e,n,r,i,s,o,a){return new Vd(t,e,n,r,i,s,o,a)}function xg(t){return new Vd(t)}function dw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function AD(t){return t.collectionGroup!==null}function Pa(t){const e=ce(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new mt(ft.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Hc(s,r))}),n.has(ft.keyField().canonicalString())||e.ce.push(new Hc(ft.keyField(),r))}return e.ce}function Jn(t){const e=ce(t);return e.le||(e.le=RD(e,Pa(t))),e.le}function RD(t,e){if(t.limitType==="F")return cw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Hc(i.field,s)});const n=t.endAt?new Wc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Wc(t.startAt.position,t.startAt.inclusive):null;return cw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Dp(t,e,n){return new Vd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ld(t,e){return wg(Jn(t),Jn(e))&&t.limitType===e.limitType}function DT(t){return`${yg(Jn(t))}|lt:${t.limitType}`}function Ps(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>kT(i)).join(", ")}]`),Md(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>vo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>vo(i)).join(",")),`Target(${r})`}(Jn(t))}; limitType=${t.limitType})`}function Od(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):se.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Pa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=lw(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Pa(r),i)||r.endAt&&!function(o,a,l){const u=lw(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Pa(r),i))}(t,e)}function kD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NT(t){return(e,n)=>{let r=!1;for(const i of Pa(t)){const s=bD(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function bD(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?go(l,u):le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ws(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return TT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=new Ue(se.comparator);function Nr(){return DD}const MT=new Ue(se.comparator);function da(...t){let e=MT;for(const n of t)e=e.insert(n.key,n);return e}function VT(t){let e=MT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yi(){return Aa()}function LT(){return Aa()}function Aa(){return new ko(t=>t.toString(),(t,e)=>t.isEqual(e))}const ND=new Ue(se.comparator),MD=new mt(se.comparator);function pe(...t){let e=MD;for(const n of t)e=e.add(n);return e}const VD=new mt(we);function LD(){return VD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$c(e)?"-0":e}}function OT(t){return{integerValue:""+t}}function OD(t,e){return hD(e)?OT(e):_g(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(){this._=void 0}}function FD(t,e,n){return t instanceof Kc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&mg(s)&&(s=gg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof al?jT(t,e):t instanceof ll?BT(t,e):function(i,s){const o=FT(i,s),a=hw(o)+hw(i.Pe);return Rp(o)&&Rp(i.Pe)?OT(a):_g(i.serializer,a)}(t,e)}function jD(t,e,n){return t instanceof al?jT(t,e):t instanceof ll?BT(t,e):n}function FT(t,e){return t instanceof Gc?function(r){return Rp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Kc extends Fd{}class al extends Fd{constructor(e){super(),this.elements=e}}function jT(t,e){const n=UT(e);for(const r of t.elements)n.some(i=>ir(i,r))||n.push(r);return{arrayValue:{values:n}}}class ll extends Fd{constructor(e){super(),this.elements=e}}function BT(t,e){let n=UT(e);for(const r of t.elements)n=n.filter(i=>!ir(i,r));return{arrayValue:{values:n}}}class Gc extends Fd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function hw(t){return Ke(t.integerValue||t.doubleValue)}function UT(t){return vg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function BD(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof al&&i instanceof al||r instanceof ll&&i instanceof ll?mo(r.elements,i.elements,ir):r instanceof Gc&&i instanceof Gc?ir(r.Pe,i.Pe):r instanceof Kc&&i instanceof Kc}(t.transform,e.transform)}class UD{constructor(e,n){this.version=e,this.transformResults=n}}class Ln{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ln}static exists(e){return new Ln(void 0,e)}static updateTime(e){return new Ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class jd{}function zT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Eg(t.key,Ln.none()):new kl(t.key,t.data,Ln.none());{const n=t.data,r=qt.empty();let i=new mt(ft.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ri(t.key,r,new ln(i.toArray()),Ln.none())}}function zD(t,e,n){t instanceof kl?function(i,s,o){const a=i.value.clone(),l=pw(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ri?function(i,s,o){if(!nc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=pw(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll($T(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ra(t,e,n,r){return t instanceof kl?function(s,o,a,l){if(!nc(s.precondition,o))return a;const u=s.value.clone(),c=mw(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ri?function(s,o,a,l){if(!nc(s.precondition,o))return a;const u=mw(s.fieldTransforms,l,o),c=o.data;return c.setAll($T(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return nc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function $D(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=FT(r.transform,i||null);s!=null&&(n===null&&(n=qt.empty()),n.set(r.field,s))}return n||null}function fw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&mo(r,i,(s,o)=>BD(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class kl extends jd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ri extends jd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function $T(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function pw(t,e,n){const r=new Map;Se(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,jD(o,a,n[i]))}return r}function mw(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,FD(s,o,e))}return r}class Eg extends jd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WD extends jd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&zD(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ra(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ra(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=LT();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=zT(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&mo(this.mutations,e.mutations,(n,r)=>fw(n,r))&&mo(this.baseMutations,e.baseMutations,(n,r)=>fw(n,r))}}class Tg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Se(e.mutations.length===r.length);let i=function(){return ND}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Tg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,ge;function qD(t){switch(t){default:return le();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function WT(t){if(t===void 0)return Dr("GRPC error has no .code"),$.UNKNOWN;switch(t){case qe.OK:return $.OK;case qe.CANCELLED:return $.CANCELLED;case qe.UNKNOWN:return $.UNKNOWN;case qe.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case qe.INTERNAL:return $.INTERNAL;case qe.UNAVAILABLE:return $.UNAVAILABLE;case qe.UNAUTHENTICATED:return $.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case qe.NOT_FOUND:return $.NOT_FOUND;case qe.ALREADY_EXISTS:return $.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return $.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case qe.ABORTED:return $.ABORTED;case qe.OUT_OF_RANGE:return $.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return $.UNIMPLEMENTED;case qe.DATA_LOSS:return $.DATA_LOSS;default:return le()}}(ge=qe||(qe={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=new es([4294967295,4294967295],0);function gw(t){const e=QD().encode(t),n=new mT;return n.update(e),new Uint8Array(n.digest())}function vw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new es([n,r],0),new es([i,s],0)]}class Sg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ha(`Invalid padding: ${n}`);if(r<0)throw new ha(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ha(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ha(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=es.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(es.fromNumber(r)));return i.compare(YD)===1&&(i=new es([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=gw(e),[r,i]=vw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Sg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=gw(e),[r,i]=vw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ha extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,bl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Bd(ue.min(),i,new Ue(we),Nr(),pe())}}class bl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new bl(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class HT{constructor(e,n){this.targetId=e,this.me=n}}class KT{constructor(e,n,r=vt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class yw{constructor(){this.fe=0,this.ge=xw(),this.pe=vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),n=pe(),r=pe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:le()}}),new bl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=xw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class XD{constructor(e){this.Le=e,this.Be=new Map,this.ke=Nr(),this.qe=ww(),this.Qe=new Ue(we)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(bp(s))if(r===0){const o=new se(s.path);this.Ue(n,o,Rt.newNoDocument(o,ue.min()))}else Se(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=cs(r).toUint8Array()}catch(l){if(l instanceof ST)return po("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Sg(o,i,s)}catch(l){return po(l instanceof ha?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&bp(a.target)){const l=new se(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Rt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=pe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Bd(e,n,this.Qe,this.ke,r);return this.ke=Nr(),this.qe=ww(),this.Qe=new Ue(we),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new yw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new mt(we),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new yw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function ww(){return new Ue(se.comparator)}function xw(){return new Ue(se.comparator)}const JD={asc:"ASCENDING",desc:"DESCENDING"},ZD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eN={and:"AND",or:"OR"};class tN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Np(t,e){return t.useProto3Json||Md(e)?e:{value:e}}function qc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nN(t,e){return qc(t,e.toTimestamp())}function Zn(t){return Se(!!t),ue.fromTimestamp(function(n){const r=_i(n);return new nt(r.seconds,r.nanos)}(t))}function Cg(t,e){return Mp(t,e).canonicalString()}function Mp(t,e){const n=function(i){return new Me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function qT(t){const e=Me.fromString(t);return Se(ZT(e)),e}function Vp(t,e){return Cg(t.databaseId,e.path)}function tf(t,e){const n=qT(e);if(n.get(1)!==t.databaseId.projectId)throw new re($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(YT(n))}function QT(t,e){return Cg(t.databaseId,e)}function rN(t){const e=qT(t);return e.length===4?Me.emptyPath():YT(e)}function Lp(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YT(t){return Se(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function _w(t,e,n){return{name:Vp(t,e),fields:n.value.mapValue.fields}}function iN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:le()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(Se(c===void 0||typeof c=="string"),vt.fromBase64String(c||"")):(Se(c===void 0||c instanceof Buffer||c instanceof Uint8Array),vt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?$.UNKNOWN:WT(u.code);return new re(c,u.message||"")}(o);n=new KT(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=tf(t,r.document.name),s=Zn(r.document.updateTime),o=r.document.createTime?Zn(r.document.createTime):ue.min(),a=new qt({mapValue:{fields:r.document.fields}}),l=Rt.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new rc(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=tf(t,r.document),s=r.readTime?Zn(r.readTime):ue.min(),o=Rt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new rc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=tf(t,r.document),s=r.removedTargetIds||[];n=new rc([],s,i,null)}else{if(!("filter"in e))return le();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new GD(i,s),a=r.targetId;n=new HT(a,o)}}return n}function sN(t,e){let n;if(e instanceof kl)n={update:_w(t,e.key,e.value)};else if(e instanceof Eg)n={delete:Vp(t,e.key)};else if(e instanceof Ri)n={update:_w(t,e.key,e.data),updateMask:pN(e.fieldMask)};else{if(!(e instanceof WD))return le();n={verify:Vp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Kc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof al)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ll)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw le()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:nN(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:le()}(t,e.precondition)),n}function oN(t,e){return t&&t.length>0?(Se(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Zn(i.updateTime):Zn(s);return o.isEqual(ue.min())&&(o=Zn(s)),new UD(o,i.transformResults||[])}(n,e))):[]}function aN(t,e){return{documents:[QT(t,e.path)]}}function lN(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QT(t,i);const s=function(u){if(u.length!==0)return JT(sr.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(p){return{field:As(p.field),direction:dN(p.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Np(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function uN(t){let e=rN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Se(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(f){const p=XT(f);return p instanceof sr&&AT(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(g){return new Hc(Rs(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Md(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,h=f.values||[];return new Wc(h,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,h=f.values||[];return new Wc(h,p)}(n.endAt)),PD(e,i,o,s,a,"F",l,u)}function cN(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Rs(n.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Rs(n.unaryFilter.field);return et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Rs(n.unaryFilter.field);return et.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Rs(n.unaryFilter.field);return et.create(o,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(t):t.fieldFilter!==void 0?function(n){return et.create(Rs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sr.create(n.compositeFilter.filters.map(r=>XT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le()}}(n.compositeFilter.op))}(t):le()}function dN(t){return JD[t]}function hN(t){return ZD[t]}function fN(t){return eN[t]}function As(t){return{fieldPath:t.canonicalString()}}function Rs(t){return ft.fromServerFormat(t.fieldPath)}function JT(t){return t instanceof et?function(n){if(n.op==="=="){if(aw(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NAN"}};if(ow(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(aw(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NAN"}};if(ow(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:As(n.field),op:hN(n.op),value:n.value}}}(t):t instanceof sr?function(n){const r=n.getFilters().map(i=>JT(i));return r.length===1?r[0]:{compositeFilter:{op:fN(n.op),filters:r}}}(t):le()}function pN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ZT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n,r,i,s=ue.min(),o=ue.min(),a=vt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.ct=e}}function gN(t){const e=uN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this.un=new yN}addToCollectionParentIndex(e,n){return this.un.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(xi.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(xi.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class yN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new mt(Me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mt(Me.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new yo(0)}static kn(){return new yo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(){this.changes=new ko(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ra(r.mutation,i,ln.empty(),nt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const i=Yi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=da();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Yi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Nr();const o=Aa(),a=function(){return Aa()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Ri)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),Ra(c.mutation,u,c.mutation.getFieldMask(),nt.now())):o.set(u.key,ln.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var f;return a.set(u,new xN(c,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Aa();let i=new Ue((o,a)=>o-a),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||ln.empty();c=a.applyToLocalView(u,c),r.set(l,c);const f=(i.get(a.batchId)||pe()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,f=LT();c.forEach(p=>{if(!s.has(p)){const h=zT(n.get(p),r.get(p));h!==null&&f.set(p,h),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):AD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):W.resolve(Yi());let a=-1,l=s;return o.next(u=>W.forEach(u,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?W.resolve():this.remoteDocumentCache.getEntry(e,c).next(p=>{l=l.insert(c,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,pe())).next(c=>({batchId:a,changes:VT(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(r=>{let i=da();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=da();return this.indexManager.getCollectionParents(e,s).next(a=>W.forEach(a,l=>{const u=function(f,p){return new Vd(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,Rt.newInvalidDocument(c)))});let a=da();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&Ra(c.mutation,u,ln.empty(),nt.now()),Od(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return W.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Zn(i.createTime)}}(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:gN(i.bundledQuery),readTime:Zn(i.readTime)}}(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.overlays=new Ue(se.comparator),this.Ir=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yi();return W.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),W.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const i=Yi(),s=n.length+1,o=new se(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return W.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ue((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=Yi(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=Yi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return W.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new KD(n,r));let s=this.Ir.get(n);s===void 0&&(s=pe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(){this.Tr=new mt(rt.Er),this.dr=new mt(rt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new rt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new rt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new se(new Me([])),r=new rt(n,e),i=new rt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new se(new Me([])),r=new rt(n,e),i=new rt(n,e+1);let s=pe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new rt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return se.comparator(e.key,n.key)||we(e.wr,n.wr)}static Ar(e,n){return we(e.wr,n.wr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new mt(rt.Er)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new HD(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new rt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,n){return W.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rt(n,0),i=new rt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new mt(we);return n.forEach(i=>{const s=new rt(i,0),o=new rt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),W.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;se.isDocumentKey(s)||(s=s.child(""));const o=new rt(new se(s),0);let a=new mt(we);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),W.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Se(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return W.forEach(n.mutations,i=>{const s=new rt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new rt(n,0),i=this.br.firstAfterOrEqual(r);return W.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.Mr=e,this.docs=function(){return new Ue(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=Nr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Rt.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Nr();const o=n.path,a=new se(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||lD(aD(c),r)<=0||(i.has(c.key)||Od(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,n,r,i){le()}Or(e,n){return W.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new PN(this)}getSize(e){return W.resolve(this.size)}}class PN extends wN{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),W.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.persistence=e,this.Nr=new ko(n=>yg(n),wg),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ig,this.targetCount=0,this.kr=yo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),W.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new yo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Kn(n),W.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),W.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,n){this.qr={},this.overlays={},this.Qr=new pg(0),this.Kr=!1,this.Kr=!0,this.$r=new SN,this.referenceDelegate=e(this),this.Ur=new AN(this),this.indexManager=new vN,this.remoteDocumentCache=function(i){return new IN(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new mN(n),this.Gr=new EN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new TN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new CN(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const i=new kN(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return W.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class kN extends cD{constructor(e){super(),this.currentSequenceNumber=e}}class Pg{constructor(e){this.persistence=e,this.Jr=new Ig,this.Yr=null}static Zr(e){return new Pg(e)}get Xr(){if(this.Yr)return this.Yr;throw le()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),W.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.Xr,r=>{const i=se.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ue.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return W.or([()=>W.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=pe(),i=pe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ag(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Mb()?8:dD(Mt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new bN;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(na()<=me.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Ps(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),W.resolve()):(na()<=me.DEBUG&&ne("QueryEngine","Query:",Ps(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(na()<=me.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Ps(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(n))):W.resolve())}Yi(e,n){if(dw(n))return W.resolve(null);let r=Jn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Dp(n,null,"F"),r=Jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=pe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,Dp(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return dw(n)||i.isEqual(ue.min())?W.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?W.resolve(null):(na()<=me.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ps(n)),this.rs(e,o,n,oD(i,-1)).next(a=>a))})}ts(e,n){let r=new mt(NT(e));return n.forEach((i,s)=>{Od(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return na()<=me.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Ps(n)),this.Ji.getDocumentsMatchingQuery(e,n,xi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ue(we),this._s=new ko(s=>yg(s),wg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _N(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function MN(t,e,n,r){return new NN(t,e,n,r)}async function eS(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=pe();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function VN(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const f=u.batch,p=f.keys();let h=W.resolve();return p.forEach(g=>{h=h.next(()=>c.getEntry(l,g)).next(m=>{const v=u.docVersions.get(g);Se(v!==null),m.version.compareTo(v)<0&&(f.applyToRemoteDocument(m,u),m.isValidDocument()&&(m.setReadTime(u.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function tS(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function LN(t,e){const n=ce(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((c,f)=>{const p=i.get(f);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,c.addedDocuments,f)));let h=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?h=h.withResumeToken(vt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,v,w){return m.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,h,c)&&a.push(n.Ur.updateTargetData(s,h))});let l=Nr(),u=pe();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(ON(s,o,e.documentUpdates).next(c=>{l=c.Ps,u=c.Is})),!r.isEqual(ue.min())){const c=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return W.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function ON(t,e,n){let r=pe(),i=pe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Nr();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ne("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function FN(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jN(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new ii(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Op(t,e,n){const r=ce(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Rl(o))throw o;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Ew(t,e,n){const r=ce(t);let i=ue.min(),s=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const f=ce(l),p=f._s.get(c);return p!==void 0?W.resolve(f.os.get(p)):f.Ur.getTargetData(u,c)}(r,o,Jn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ue.min(),n?s:pe())).next(a=>(BN(r,kD(e),a),{documents:a,Ts:s})))}function BN(t,e,n){let r=t.us.get(e)||ue.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Tw{constructor(){this.activeTargetIds=LD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UN{constructor(){this.so=new Tw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Tw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nu=null;function nf(){return Nu===null?Nu=function(){return 268435456+Math.round(2147483648*Math.random())}():Nu++,"0x"+Nu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct="WebChannelConnection";class HN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=nf(),l=this.xo(n,r.toUriEncodedString());ne("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(c=>(ne("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw po("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ro}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=$N[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=nf();return new Promise((o,a)=>{const l=new gT;l.setWithCredentials(!0),l.listenOnce(vT.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ec.NO_ERROR:const c=l.getResponseJson();ne(Ct,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case ec.TIMEOUT:ne(Ct,`RPC '${e}' ${s} timed out`),a(new re($.DEADLINE_EXCEEDED,"Request time out"));break;case ec.HTTP_ERROR:const f=l.getStatus();if(ne(Ct,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const h=p==null?void 0:p.error;if(h&&h.status&&h.message){const g=function(v){const w=v.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(w)>=0?w:$.UNKNOWN}(h.status);a(new re(g,h.message))}else a(new re($.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new re($.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{ne(Ct,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);ne(Ct,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=nf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=xT(),a=wT(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");ne(Ct,`Creating RPC '${e}' stream ${i}: ${c}`,l);const f=o.createWebChannel(c,l);let p=!1,h=!1;const g=new WN({Io:v=>{h?ne(Ct,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(p||(ne(Ct,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),ne(Ct,`RPC '${e}' stream ${i} sending:`,v),f.send(v))},To:()=>f.close()}),m=(v,w,x)=>{v.listen(w,E=>{try{x(E)}catch(k){setTimeout(()=>{throw k},0)}})};return m(f,ca.EventType.OPEN,()=>{h||(ne(Ct,`RPC '${e}' stream ${i} transport opened.`),g.yo())}),m(f,ca.EventType.CLOSE,()=>{h||(h=!0,ne(Ct,`RPC '${e}' stream ${i} transport closed`),g.So())}),m(f,ca.EventType.ERROR,v=>{h||(h=!0,po(Ct,`RPC '${e}' stream ${i} transport errored:`,v),g.So(new re($.UNAVAILABLE,"The operation could not be completed")))}),m(f,ca.EventType.MESSAGE,v=>{var w;if(!h){const x=v.data[0];Se(!!x);const E=x,k=E.error||((w=E[0])===null||w===void 0?void 0:w.error);if(k){ne(Ct,`RPC '${e}' stream ${i} received error:`,k);const S=k.status;let R=function(I){const C=qe[I];if(C!==void 0)return WT(C)}(S),T=k.message;R===void 0&&(R=$.INTERNAL,T="Unknown error status: "+S+" with message "+k.message),h=!0,g.So(new re(R,T)),f.close()}else ne(Ct,`RPC '${e}' stream ${i} received:`,x),g.bo(x)}}),m(a,yT.STAT_EVENT,v=>{v.stat===Pp.PROXY?ne(Ct,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===Pp.NOPROXY&&ne(Ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.wo()},0),g}}function rf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(t){return new tN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new nS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Dr(n.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new re($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KN extends rS{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=iN(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?Zn(o.readTime):ue.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Lp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=bp(l)?{documents:aN(s,l)}:{query:lN(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=GT(s,o.resumeToken);const u=Np(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=qc(s,o.snapshotVersion.toTimestamp());const u=Np(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=cN(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Lp(this.serializer),n.removeTarget=e,this.a_(n)}}class GN extends rS{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Se(!!e.streamToken),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=oN(e.writeResults,e.commitTime),r=Zn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Lp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>sN(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new re($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Mp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re($.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Mp(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re($.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class QN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Dr(n),this.D_=!1):ne("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{xs(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ce(l);u.L_.add(4),await Dl(u),u.q_.set("Unknown"),u.L_.delete(4),await zd(u)}(this))})}),this.q_=new QN(r,i)}}async function zd(t){if(xs(t))for(const e of t.B_)await e(!0)}async function Dl(t){for(const e of t.B_)await e(!1)}function iS(t,e){const n=ce(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Dg(n)?bg(n):bo(n).r_()&&kg(n,e))}function Rg(t,e){const n=ce(t),r=bo(n);n.N_.delete(e),r.r_()&&sS(n,e),n.N_.size===0&&(r.r_()?r.o_():xs(n)&&n.q_.set("Unknown"))}function kg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bo(t).A_(e)}function sS(t,e){t.Q_.xe(e),bo(t).R_(e)}function bg(t){t.Q_=new XD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),bo(t).start(),t.q_.v_()}function Dg(t){return xs(t)&&!bo(t).n_()&&t.N_.size>0}function xs(t){return ce(t).L_.size===0}function oS(t){t.Q_=void 0}async function XN(t){t.q_.set("Online")}async function JN(t){t.N_.forEach((e,n)=>{kg(t,e)})}async function ZN(t,e){oS(t),Dg(t)?(t.q_.M_(e),bg(t)):t.q_.set("Unknown")}async function eM(t,e,n){if(t.q_.set("Online"),e instanceof KT&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qc(t,r)}else if(e instanceof rc?t.Q_.Ke(e):e instanceof HT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ue.min()))try{const r=await tS(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.N_.get(u);c&&s.N_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.N_.get(l);if(!c)return;s.N_.set(l,c.withResumeToken(vt.EMPTY_BYTE_STRING,c.snapshotVersion)),sS(s,l);const f=new ii(c.target,l,u,c.sequenceNumber);kg(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),await Qc(t,r)}}async function Qc(t,e,n){if(!Rl(e))throw e;t.L_.add(1),await Dl(t),t.q_.set("Offline"),n||(n=()=>tS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await zd(t)})}function aS(t,e){return e().catch(n=>Qc(t,n,e))}async function $d(t){const e=ce(t),n=Ei(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;tM(e);)try{const i=await FN(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,nM(e,i)}catch(i){await Qc(e,i)}lS(e)&&uS(e)}function tM(t){return xs(t)&&t.O_.length<10}function nM(t,e){t.O_.push(e);const n=Ei(t);n.r_()&&n.V_&&n.m_(e.mutations)}function lS(t){return xs(t)&&!Ei(t).n_()&&t.O_.length>0}function uS(t){Ei(t).start()}async function rM(t){Ei(t).p_()}async function iM(t){const e=Ei(t);for(const n of t.O_)e.m_(n.mutations)}async function sM(t,e,n){const r=t.O_.shift(),i=Tg.from(r,e,n);await aS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await $d(t)}async function oM(t,e){e&&Ei(t).V_&&await async function(r,i){if(function(o){return qD(o)&&o!==$.ABORTED}(i.code)){const s=r.O_.shift();Ei(r).s_(),await aS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await $d(r)}}(t,e),lS(t)&&uS(t)}async function Cw(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=xs(n);n.L_.add(3),await Dl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await zd(n)}async function aM(t,e){const n=ce(t);e?(n.L_.delete(2),await zd(n)):e||(n.L_.add(2),await Dl(n),n.q_.set("Unknown"))}function bo(t){return t.K_||(t.K_=function(n,r,i){const s=ce(n);return s.w_(),new KN(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:XN.bind(null,t),Ro:JN.bind(null,t),mo:ZN.bind(null,t),d_:eM.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Dg(t)?bg(t):t.q_.set("Unknown")):(await t.K_.stop(),oS(t))})),t.K_}function Ei(t){return t.U_||(t.U_=function(n,r,i){const s=ce(n);return s.w_(),new GN(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:rM.bind(null,t),mo:oM.bind(null,t),f_:iM.bind(null,t),g_:sM.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await $d(t)):(await t.U_.stop(),t.O_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Ng(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mg(t,e){if(Dr("AsyncQueue",`${e}: ${t}`),Rl(t))return new re($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=da(),this.sortedSet=new Ue(this.comparator)}static emptySet(e){return new eo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof eo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new eo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(){this.W_=new Ue(se.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):le():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class wo{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new wo(e,n,eo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class uM{constructor(){this.queries=Pw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ce(n),s=i.queries;i.queries=Pw(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new re($.ABORTED,"Firestore shutting down"))}}function Pw(){return new ko(t=>DT(t),Ld)}async function cS(t,e){const n=ce(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new lM,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Mg(o,`Initialization of query '${Ps(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Vg(n)}async function dS(t,e){const n=ce(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function cM(t,e){const n=ce(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Vg(n)}function dM(t,e,n){const r=ce(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Vg(t){t.Y_.forEach(e=>{e.next()})}var Fp,Aw;(Aw=Fp||(Fp={})).ea="default",Aw.Cache="cache";class hS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new wo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Fp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.key=e}}class pS{constructor(e){this.key=e}}class hM{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=NT(e),this.Ra=new eo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Iw,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,f)=>{const p=i.get(c),h=Od(this.query,f)?f:null,g=!!p&&this.mutatedKeys.has(p.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let v=!1;p&&h?p.data.isEqual(h.data)?g!==m&&(r.track({type:3,doc:h}),v=!0):this.ga(p,h)||(r.track({type:2,doc:h}),v=!0,(l&&this.Aa(h,l)>0||u&&this.Aa(h,u)<0)&&(a=!0)):!p&&h?(r.track({type:0,doc:h}),v=!0):p&&!h&&(r.track({type:1,doc:p}),v=!0,(l||u)&&(a=!0)),v&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((c,f)=>function(h,g){const m=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return m(h)-m(g)}(c.type,f.type)||this.Aa(c.doc,f.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new wo(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Iw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new pS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new fS(r))}),n}ba(e){this.Ta=e.Ts,this.da=pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return wo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class fM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class pM{constructor(e){this.key=e,this.va=!1}}class mM{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ko(a=>DT(a),Ld),this.Ma=new Map,this.xa=new Set,this.Oa=new Ue(se.comparator),this.Na=new Map,this.La=new Ig,this.Ba={},this.ka=new Map,this.qa=yo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function gM(t,e,n=!0){const r=xS(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await mS(r,e,n,!0),i}async function vM(t,e){const n=xS(t);await mS(n,e,!0,!1)}async function mS(t,e,n,r){const i=await jN(t.localStore,Jn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await yM(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&iS(t.remoteStore,i),a}async function yM(t,e,n,r,i){t.Ka=(f,p,h)=>async function(m,v,w,x){let E=v.view.ma(w);E.ns&&(E=await Ew(m.localStore,v.query,!1).then(({documents:T})=>v.view.ma(T,E)));const k=x&&x.targetChanges.get(v.targetId),S=x&&x.targetMismatches.get(v.targetId)!=null,R=v.view.applyChanges(E,m.isPrimaryClient,k,S);return kw(m,v.targetId,R.wa),R.snapshot}(t,f,p,h);const s=await Ew(t.localStore,e,!0),o=new hM(e,s.Ts),a=o.ma(s.documents),l=bl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);kw(t,n,u.wa);const c=new fM(e,n,o);return t.Fa.set(e,c),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function wM(t,e,n){const r=ce(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Ld(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Op(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Rg(r.remoteStore,i.targetId),jp(r,i.targetId)}).catch(Al)):(jp(r,i.targetId),await Op(r.localStore,i.targetId,!0))}async function xM(t,e){const n=ce(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rg(n.remoteStore,r.targetId))}async function _M(t,e,n){const r=AM(t);try{const i=await function(o,a){const l=ce(o),u=nt.now(),c=a.reduce((h,g)=>h.add(g.key),pe());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",h=>{let g=Nr(),m=pe();return l.cs.getEntries(h,c).next(v=>{g=v,g.forEach((w,x)=>{x.isValidDocument()||(m=m.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(h,g)).next(v=>{f=v;const w=[];for(const x of a){const E=$D(x,f.get(x.key).overlayedDocument);E!=null&&w.push(new Ri(x.key,E,CT(E.value.mapValue),Ln.exists(!0)))}return l.mutationQueue.addMutationBatch(h,u,w,a)}).next(v=>{p=v;const w=v.applyToLocalDocumentSet(f,m);return l.documentOverlayCache.saveOverlays(h,v.batchId,w)})}).then(()=>({batchId:p.batchId,changes:VT(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Ue(we)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await Nl(r,i.changes),await $d(r.remoteStore)}catch(i){const s=Mg(i,"Failed to persist write");n.reject(s)}}async function gS(t,e){const n=ce(t);try{const r=await LN(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Se(o.va):i.removedDocuments.size>0&&(Se(o.va),o.va=!1))}),await Nl(n,r,e)}catch(r){await Al(r)}}function Rw(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ce(o);l.onlineState=a;let u=!1;l.queries.forEach((c,f)=>{for(const p of f.j_)p.Z_(a)&&(u=!0)}),u&&Vg(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function EM(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ue(se.comparator);o=o.insert(s,Rt.newNoDocument(s,ue.min()));const a=pe().add(s),l=new Bd(ue.min(),new Map,new Ue(we),o,a);await gS(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Lg(r)}else await Op(r.localStore,e,!1).then(()=>jp(r,e,n)).catch(Al)}async function TM(t,e){const n=ce(t),r=e.batch.batchId;try{const i=await VN(n.localStore,e);yS(n,r,null),vS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Nl(n,i)}catch(i){await Al(i)}}async function SM(t,e,n){const r=ce(t);try{const i=await function(o,a){const l=ce(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(Se(f!==null),c=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);yS(r,e,n),vS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Nl(r,i)}catch(i){await Al(i)}}function vS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function yS(t,e,n){const r=ce(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function jp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||wS(t,r)})}function wS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Rg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Lg(t))}function kw(t,e,n){for(const r of n)r instanceof fS?(t.La.addReference(r.key,e),CM(t,r)):r instanceof pS?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||wS(t,r.key)):le()}function CM(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.xa.add(r),Lg(t))}function Lg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new se(Me.fromString(e)),r=t.qa.next();t.Na.set(r,new pM(n)),t.Oa=t.Oa.insert(n,r),iS(t.remoteStore,new ii(Jn(xg(n.path)),r,"TargetPurposeLimboResolution",pg.oe))}}async function Nl(t,e,n){const r=ce(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=Ag.Wi(l.targetId,u);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const c=ce(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>W.forEach(u,p=>W.forEach(p.$i,h=>c.persistence.referenceDelegate.addReference(f,p.targetId,h)).next(()=>W.forEach(p.Ui,h=>c.persistence.referenceDelegate.removeReference(f,p.targetId,h)))))}catch(f){if(!Rl(f))throw f;ne("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const h=c.os.get(p),g=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(g);c.os=c.os.insert(p,m)}}}(r.localStore,s))}async function IM(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=await eS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new re($.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Nl(n,r.hs)}}function PM(t,e){const n=ce(t),r=n.Na.get(e);if(r&&r.va)return pe().add(r.key);{let i=pe();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function xS(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EM.bind(null,e),e.Ca.d_=cM.bind(null,e.eventManager),e.Ca.$a=dM.bind(null,e.eventManager),e}function AM(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SM.bind(null,e),e}class Yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ud(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return MN(this.persistence,new DN,e.initialUser,this.serializer)}Ga(e){return new RN(Pg.Zr,this.serializer)}Wa(e){return new UN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yc.provider={build:()=>new Yc};class Bp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Rw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=IM.bind(null,this.syncEngine),await aM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uM}()}createDatastore(e){const n=Ud(e.databaseInfo.databaseId),r=function(s){return new HN(s)}(e.databaseInfo);return function(s,o,a,l){return new qN(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new YN(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Rw(this.syncEngine,n,0),function(){return Sw.D()?new Sw:new zN}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const f=new mM(i,s,o,a,l,u);return c&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ce(i);ne("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Dl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Bp.provider={build:()=>new Bp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Dr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Pt.UNAUTHENTICATED,this.clientId=ET.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ne("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ne("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Mg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function sf(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await eS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function bw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await kM(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Cw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Cw(e.remoteStore,i)),t._onlineComponents=e}async function kM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await sf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;po("Error using user provided cache. Falling back to memory cache: "+n),await sf(t,new Yc)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await sf(t,new Yc);return t._offlineComponents}async function ES(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await bw(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await bw(t,new Bp))),t._onlineComponents}function bM(t){return ES(t).then(e=>e.syncEngine)}async function TS(t){const e=await ES(t),n=e.eventManager;return n.onListen=gM.bind(null,e.syncEngine),n.onUnlisten=wM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=vM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xM.bind(null,e.syncEngine),n}function DM(t,e,n={}){const r=new _r;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new _S({next:p=>{c.Za(),o.enqueueAndForget(()=>dS(s,f));const h=p.docs.has(a);!h&&p.fromCache?u.reject(new re($.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&p.fromCache&&l&&l.source==="server"?u.reject(new re($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new hS(xg(a.path),c,{includeMetadataChanges:!0,_a:!0});return cS(s,f)}(await TS(t),t.asyncQueue,e,n,r)),r.promise}function NM(t,e,n={}){const r=new _r;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new _S({next:p=>{c.Za(),o.enqueueAndForget(()=>dS(s,f)),p.fromCache&&l.source==="server"?u.reject(new re($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new hS(a,c,{includeMetadataChanges:!0,_a:!0});return cS(s,f)}(await TS(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(t,e,n){if(!n)throw new re($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MM(t,e,n,r){if(e===!0&&r===!0)throw new re($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Nw(t){if(!se.isDocumentKey(t))throw new re($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Mw(t){if(se.isDocumentKey(t))throw new re($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Og(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le()}function or(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Og(t);throw new re($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new X2;switch(r.type){case"firstParty":return new tD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Dw.get(n);r&&(ne("ComponentProvider","Removing Datastore"),Dw.delete(n),r.terminate())}(this),Promise.resolve()}}function VM(t,e,n,r={}){var i;const s=(t=or(t,Wd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Pt.MOCK_USER;else{a=Pb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new re($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Pt(u)}t._authCredentials=new J2(new _T(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hd(this.firestore,e,this._query)}}class Zt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}}class vi extends Hd{constructor(e,n,r){super(e,n,xg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new se(e))}withConverter(e){return new vi(this.firestore,e,this._path)}}function Ml(t,e,...n){if(t=Vt(t),CS("collection","path",e),t instanceof Wd){const r=Me.fromString(e,...n);return Mw(r),new vi(t,null,r)}{if(!(t instanceof Zt||t instanceof vi))throw new re($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return Mw(r),new vi(t.firestore,null,r)}}function Ut(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=ET.newId()),CS("doc","path",e),t instanceof Wd){const r=Me.fromString(e,...n);return Nw(r),new Zt(t,null,new se(r))}{if(!(t instanceof Zt||t instanceof vi))throw new re($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return Nw(r),new Zt(t.firestore,t instanceof vi?t.converter:null,new se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new nS(this,"async_queue_retry"),this.Vu=()=>{const r=rf();r&&ne("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=rf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=rf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new _r;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Rl(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Dr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Ng.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&le()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Do extends Wd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Lw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lw(e),this._firestoreClient=void 0,await e}}}function IS(t,e){const n=typeof t=="object"?t:hT(),r=typeof t=="string"?t:"(default)",i=hg(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Cb("firestore");s&&VM(i,...s)}return i}function Fg(t){if(t._terminated)throw new re($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||LM(t),t._firestoreClient}function LM(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,c){return new pD(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,SS(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new RM(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xo(vt.fromBase64String(e))}catch(n){throw new re($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xo(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=/^__.*__$/;class FM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ri(e,this.data,this.fieldMask,n,this.fieldTransforms):new kl(e,this.data,n,this.fieldTransforms)}}class PS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ri(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function AS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class zg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new zg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(AS(this.Cu)&&OM.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class jM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ud(e)}Qu(e,n,r,i=!1){return new zg({Cu:e,methodName:n,qu:r,path:ft.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function RS(t){const e=t._freezeSettings(),n=Ud(t._databaseId);return new jM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function BM(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);$g("Data must be an object, but it was:",o,r);const a=kS(r,o);let l,u;if(s.merge)l=new ln(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const p=Up(e,f,n);if(!o.contains(p))throw new re($.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);DS(c,p)||c.push(p)}l=new ln(c),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new FM(new qt(a),l,u)}class Gd extends jg{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gd}}function UM(t,e,n,r){const i=t.Qu(1,e,n);$g("Data must be an object, but it was:",i,r);const s=[],o=qt.empty();ws(r,(l,u)=>{const c=Wg(e,l,n);u=Vt(u);const f=i.Nu(c);if(u instanceof Gd)s.push(c);else{const p=qd(u,f);p!=null&&(s.push(c),o.set(c,p))}});const a=new ln(s);return new PS(o,a,i.fieldTransforms)}function zM(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Up(e,r,n)],l=[i];if(s.length%2!=0)throw new re($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Up(e,s[p])),l.push(s[p+1]);const u=[],c=qt.empty();for(let p=a.length-1;p>=0;--p)if(!DS(u,a[p])){const h=a[p];let g=l[p];g=Vt(g);const m=o.Nu(h);if(g instanceof Gd)u.push(h);else{const v=qd(g,m);v!=null&&(u.push(h),c.set(h,v))}}const f=new ln(u);return new PS(c,f,o.fieldTransforms)}function qd(t,e){if(bS(t=Vt(t)))return $g("Unsupported field value:",e,t),kS(t,e);if(t instanceof jg)return function(r,i){if(!AS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=qd(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return OD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=nt.fromDate(r);return{timestampValue:qc(i.serializer,s)}}if(r instanceof nt){const s=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qc(i.serializer,s)}}if(r instanceof Bg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xo)return{bytesValue:GT(i.serializer,r._byteString)};if(r instanceof Zt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Cg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ug)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return _g(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Og(r)}`)}(t,e)}function kS(t,e){const n={};return TT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ws(t,(r,i)=>{const s=qd(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function bS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof Bg||t instanceof xo||t instanceof Zt||t instanceof jg||t instanceof Ug)}function $g(t,e,n){if(!bS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Og(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Up(t,e,n){if((e=Vt(e))instanceof Kd)return e._internalPath;if(typeof e=="string")return Wg(t,e);throw Xc("Field path arguments must be of type string or ",t,!1,void 0,n)}const $M=new RegExp("[~\\*/\\[\\]]");function Wg(t,e,n){if(e.search($M)>=0)throw Xc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Kd(...e.split("."))._internalPath}catch{throw Xc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new re($.INVALID_ARGUMENT,a+t+l)}function DS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(MS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WM extends NS{data(){return super.data()}}function MS(t,e){return typeof e=="string"?Wg(t,e):e instanceof Kd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class KM{convertValue(e,n="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw le()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ws(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ke(o.doubleValue));return new Ug(s)}convertGeoPoint(e){return new Bg(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(il(e));default:return null}}convertTimestamp(e){const n=_i(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Me.fromString(e);Se(ZT(r));const i=new sl(r.get(1),r.get(3)),s=new se(r.popFirst(5));return i.isEqual(n)||Dr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class VS extends NS{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(MS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ic extends VS{data(e={}){return super.data(e)}}class qM{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new fa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ic(this._firestore,this._userDataWriter,r.key,r,new fa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new ic(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new ic(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:QM(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function QM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t){t=or(t,Zt);const e=or(t.firestore,Do);return DM(Fg(e),t._key).then(n=>XM(e,t,n))}class OS extends KM{constructor(e){super(),this.firestore=e}convertBytes(e){return new xo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,n)}}function Vl(t){t=or(t,Hd);const e=or(t.firestore,Do),n=Fg(e),r=new OS(e);return HM(t._query),NM(n,t._query).then(i=>new qM(e,r,t,i))}function Ll(t,e,n){t=or(t,Zt);const r=or(t.firestore,Do),i=GM(t.converter,e);return Hg(r,[BM(RS(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ln.none())])}function ts(t,e,n,...r){t=or(t,Zt);const i=or(t.firestore,Do),s=RS(i);let o;return o=typeof(e=Vt(e))=="string"||e instanceof Kd?zM(s,"updateDoc",t._key,e,n,r):UM(s,"updateDoc",t._key,e),Hg(i,[o.toMutation(t._key,Ln.exists(!0))])}function YM(t){return Hg(or(t.firestore,Do),[new Eg(t._key,Ln.none())])}function Hg(t,e){return function(r,i){const s=new _r;return r.asyncQueue.enqueueAndForget(async()=>_M(await bM(r),i,s)),s.promise}(Fg(t),e)}function XM(t,e,n){const r=n.docs.get(e._key),i=new OS(t);return new VS(t,i,e._key,r,new fa(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ro=i})(Ao),fo(new ls("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Do(new Z2(r.getProvider("auth-internal")),new rD(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new re($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sl(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),gi(tw,"4.7.3",e),gi(tw,"4.7.3","esm2017")})();var JM="firebase",ZM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gi(JM,ZM,"app");function Kg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function FS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eV=FS,jS=new Il("auth","Firebase",FS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=new cg("@firebase/auth");function tV(t,...e){Jc.logLevel<=me.WARN&&Jc.warn(`Auth (${Ao}): ${t}`,...e)}function sc(t,...e){Jc.logLevel<=me.ERROR&&Jc.error(`Auth (${Ao}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,...e){throw Gg(t,...e)}function er(t,...e){return Gg(t,...e)}function BS(t,e,n){const r=Object.assign(Object.assign({},eV()),{[e]:n});return new Il("auth","Firebase",r).create(e,{appName:t.name})}function Er(t){return BS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return jS.create(t,...e)}function ae(t,e,...n){if(!t)throw Gg(e,...n)}function gr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw sc(e),new Error(e)}function Mr(t,e){t||gr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function nV(){return Ow()==="http:"||Ow()==="https:"}function Ow(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nV()||bb()||"connection"in navigator)?navigator.onLine:!0}function iV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mr(n>e,"Short delay should be less than long delay!"),this.isMobile=Ab()||Db()}get(){return rV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(t,e){Mr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=new Ol(3e4,6e4);function ki(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function bi(t,e,n,r,i={}){return zS(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Pl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return kb()||(u.referrerPolicy="no-referrer"),US.fetch()($S(t,t.config.apiHost,n,a),u)})}async function zS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},sV),e);try{const i=new lV(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Mu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Mu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Mu(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw BS(t,c,u);Fn(t,c)}}catch(i){if(i instanceof Lr)throw i;Fn(t,"network-request-failed",{message:String(i)})}}async function Fl(t,e,n,r,i={}){const s=await bi(t,e,n,r,i);return"mfaPendingCredential"in s&&Fn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function $S(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?qg(t.config,i):`${t.config.apiScheme}://${i}`}function aV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lV{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(er(this.auth,"network-request-failed")),oV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=er(t,e,r);return i.customData._tokenResponse=n,i}function Fw(t){return t!==void 0&&t.enterprise!==void 0}class uV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return aV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function cV(t,e){return bi(t,"GET","/v2/recaptchaConfig",ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dV(t,e){return bi(t,"POST","/v1/accounts:delete",e)}async function WS(t,e){return bi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hV(t,e=!1){const n=Vt(t),r=await n.getIdToken(e),i=Qg(r);ae(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ka(of(i.auth_time)),issuedAtTime:ka(of(i.iat)),expirationTime:ka(of(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function of(t){return Number(t)*1e3}function Qg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return sc("JWT malformed, contained fewer than 3 sections"),null;try{const i=sT(n);return i?JSON.parse(i):(sc("Failed to decode base64 JWT payload"),null)}catch(i){return sc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function jw(t){const e=Qg(t);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Lr&&fV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function fV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ka(this.lastLoginAt),this.creationTime=ka(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ul(t,WS(n,{idToken:r}));ae(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?HS(s.providerUserInfo):[],a=gV(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new $p(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,f)}async function mV(t){const e=Vt(t);await Zc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function HS(t){return t.map(e=>{var{providerId:n}=e,r=Kg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vV(t,e){const n=await zS(t,{},async()=>{const r=Pl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=$S(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",US.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yV(t,e){return bi(t,"POST","/v2/accounts:revokeToken",ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ae(e.length!==0,"internal-error");const n=jw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await vV(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new to;return r&&(ae(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ae(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ae(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new to,this.toJSON())}_performRefresh(){return gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(t,e){ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Kg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new $p(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ul(this,this.stsTokenManager.getToken(this.auth,e));return ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hV(this,e)}reload(){return mV(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Zc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(Er(this.auth));const e=await this.getIdToken();return await ul(this,dV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(u=n.createdAt)!==null&&u!==void 0?u:void 0,x=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:E,emailVerified:k,isAnonymous:S,providerData:R,stsTokenManager:T}=n;ae(E&&T,e,"internal-error");const y=to.fromJSON(this.name,T);ae(typeof E=="string",e,"internal-error"),Wr(f,e.name),Wr(p,e.name),ae(typeof k=="boolean",e,"internal-error"),ae(typeof S=="boolean",e,"internal-error"),Wr(h,e.name),Wr(g,e.name),Wr(m,e.name),Wr(v,e.name),Wr(w,e.name),Wr(x,e.name);const I=new vr({uid:E,auth:e,email:p,emailVerified:k,displayName:f,isAnonymous:S,photoURL:g,phoneNumber:h,tenantId:m,stsTokenManager:y,createdAt:w,lastLoginAt:x});return R&&Array.isArray(R)&&(I.providerData=R.map(C=>Object.assign({},C))),v&&(I._redirectEventId=v),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new to;i.updateFromServerResponse(n);const s=new vr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Zc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ae(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?HS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new to;a.updateFromIdToken(r);const l=new vr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new $p(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=new Map;function yr(t){Mr(t instanceof Function,"Expected a class definition");let e=Bw.get(t);return e?(Mr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Bw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}KS.type="NONE";const Uw=KS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(t,e,n){return`firebase:${t}:${e}:${n}`}class no{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=oc(this.userKey,i.apiKey,s),this.fullPersistenceKey=oc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?vr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new no(yr(Uw),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||yr(Uw);const o=oc(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const f=vr._fromJSON(e,c);u!==s&&(a=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new no(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new no(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(GS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(JS(e))return"Blackberry";if(ZS(e))return"Webos";if(qS(e))return"Safari";if((e.includes("chrome/")||QS(e))&&!e.includes("edge/"))return"Chrome";if(XS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function GS(t=Mt()){return/firefox\//i.test(t)}function qS(t=Mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QS(t=Mt()){return/crios\//i.test(t)}function YS(t=Mt()){return/iemobile/i.test(t)}function XS(t=Mt()){return/android/i.test(t)}function JS(t=Mt()){return/blackberry/i.test(t)}function ZS(t=Mt()){return/webos/i.test(t)}function Yg(t=Mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wV(t=Mt()){var e;return Yg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xV(){return Nb()&&document.documentMode===10}function eC(t=Mt()){return Yg(t)||XS(t)||ZS(t)||JS(t)||/windows phone/i.test(t)||YS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(t,e=[]){let n;switch(t){case"Browser":n=zw(Mt());break;case"Worker":n=`${zw(Mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ao}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EV(t,e={}){return bi(t,"GET","/v2/passwordPolicy",ki(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=6;class SV{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:TV,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $w(this),this.idTokenSubscription=new $w(this),this.beforeStateQueue=new _V(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=yr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await no.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await WS(this,{idToken:e}),r=await vr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(Er(this));const n=e?Vt(e):null;return n&&ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(Er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(Er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await EV(this),n=new SV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Il("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&yr(e)||this._popupRedirectResolver;ae(n,this,"argument-error"),this.redirectPersistenceManager=await no.create(this,[yr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&tV(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function _s(t){return Vt(t)}class $w{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ub(n=>this.observer=n)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IV(t){Qd=t}function nC(t){return Qd.loadJS(t)}function PV(){return Qd.recaptchaEnterpriseScript}function AV(){return Qd.gapiScript}function RV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const kV="recaptcha-enterprise",bV="NO_RECAPTCHA";class DV{constructor(e){this.type=kV,this.auth=_s(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{cV(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new uV(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Fw(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(bV)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Fw(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=PV();l.length!==0&&(l+=a),nC(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Ww(t,e,n,r=!1){const i=new DV(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Wp(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Ww(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Ww(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NV(t,e){const n=hg(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Uc(s,e??{}))return i;Fn(i,"already-initialized")}return n.initialize({options:e})}function MV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(yr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function VV(t,e,n){const r=_s(t);ae(r._canInitEmulator,r,"emulator-config-failed"),ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=rC(e),{host:o,port:a}=LV(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),OV()}function rC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function LV(t){const e=rC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Hw(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Hw(o)}}}function Hw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function OV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gr("not implemented")}_getIdTokenResponse(e){return gr("not implemented")}_linkToIdToken(e,n){return gr("not implemented")}_getReauthenticationResolver(e){return gr("not implemented")}}async function FV(t,e){return bi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jV(t,e){return Fl(t,"POST","/v1/accounts:signInWithPassword",ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BV(t,e){return Fl(t,"POST","/v1/accounts:signInWithEmailLink",ki(t,e))}async function UV(t,e){return Fl(t,"POST","/v1/accounts:signInWithEmailLink",ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends Xg{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new cl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new cl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wp(e,n,"signInWithPassword",jV);case"emailLink":return BV(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wp(e,r,"signUpPassword",FV);case"emailLink":return UV(e,{idToken:n,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ro(t,e){return Fl(t,"POST","/v1/accounts:signInWithIdp",ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV="http://localhost";class hs extends Xg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Kg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new hs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ro(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ro(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ro(e,n)}buildRequest(){const e={requestUri:zV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Pl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WV(t){const e=la(ua(t)).link,n=e?la(ua(e)).deep_link_id:null,r=la(ua(t)).deep_link_id;return(r?la(ua(r)).link:null)||r||n||e||t}class Jg{constructor(e){var n,r,i,s,o,a;const l=la(ua(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,f=$V((i=l.mode)!==null&&i!==void 0?i:null);ae(u&&c&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=WV(e);try{return new Jg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this.providerId=No.PROVIDER_ID}static credential(e,n){return cl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Jg.parseLink(n);return ae(r,"argument-error"),cl._fromEmailAndCode(e,r.code,r.tenantId)}}No.PROVIDER_ID="password";No.EMAIL_PASSWORD_SIGN_IN_METHOD="password";No.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends iC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends jl{constructor(){super("facebook.com")}static credential(e){return hs._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xr.credential(e.oauthAccessToken)}catch{return null}}}Xr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends jl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hs._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Jr.credential(n,r)}catch{return null}}}Jr.GOOGLE_SIGN_IN_METHOD="google.com";Jr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends jl{constructor(){super("github.com")}static credential(e){return hs._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zr.credential(e.oauthAccessToken)}catch{return null}}}Zr.GITHUB_SIGN_IN_METHOD="github.com";Zr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends jl{constructor(){super("twitter.com")}static credential(e,n){return hs._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ei.credential(n,r)}catch{return null}}}ei.TWITTER_SIGN_IN_METHOD="twitter.com";ei.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HV(t,e){return Fl(t,"POST","/v1/accounts:signUp",ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await vr._fromIdTokenResponse(e,r,i),o=Kw(r);return new fs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Kw(r);return new fs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Kw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed extends Lr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ed.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ed(e,n,r,i)}}function sC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ed._fromErrorAndOperation(t,s,e,r):s})}async function KV(t,e,n=!1){const r=await ul(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GV(t,e,n=!1){const{auth:r}=t;if(Qn(r.app))return Promise.reject(Er(r));const i="reauthenticate";try{const s=await ul(t,sC(r,i,e,t),n);ae(s.idToken,r,"internal-error");const o=Qg(s.idToken);ae(o,r,"internal-error");const{sub:a}=o;return ae(t.uid===a,r,"user-mismatch"),fs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oC(t,e,n=!1){if(Qn(t.app))return Promise.reject(Er(t));const r="signIn",i=await sC(t,r,e),s=await fs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function qV(t,e){return oC(_s(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(t){const e=_s(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function QV(t,e,n){if(Qn(t.app))return Promise.reject(Er(t));const r=_s(t),o=await Wp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HV).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&aC(t),l}),a=await fs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function YV(t,e,n){return Qn(t.app)?Promise.reject(Er(t)):qV(Vt(t),No.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&aC(t),r})}function XV(t,e,n,r){return Vt(t).onIdTokenChanged(e,n,r)}function JV(t,e,n){return Vt(t).beforeAuthStateChanged(e,n)}function dl(t,e,n,r){return Vt(t).onAuthStateChanged(e,n,r)}const td="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(td,"1"),this.storage.removeItem(td),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=1e3,eL=10;class uC extends lC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);xV()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,eL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ZV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}uC.type="LOCAL";const tL=uC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC extends lC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cC.type="SESSION";const dC=cC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Yd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await nL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Zg("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(){return window}function iL(t){tr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(){return typeof tr().WorkerGlobalScope<"u"&&typeof tr().importScripts=="function"}async function sL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function aL(){return hC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="firebaseLocalStorageDb",lL=1,nd="firebaseLocalStorage",pC="fbase_key";class Bl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xd(t,e){return t.transaction([nd],e?"readwrite":"readonly").objectStore(nd)}function uL(){const t=indexedDB.deleteDatabase(fC);return new Bl(t).toPromise()}function Hp(){const t=indexedDB.open(fC,lL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(nd,{keyPath:pC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(nd)?e(r):(r.close(),await uL(),e(await Hp()))})})}async function Gw(t,e,n){const r=Xd(t,!0).put({[pC]:e,value:n});return new Bl(r).toPromise()}async function cL(t,e){const n=Xd(t,!1).get(e),r=await new Bl(n).toPromise();return r===void 0?null:r.value}function qw(t,e){const n=Xd(t,!0).delete(e);return new Bl(n).toPromise()}const dL=800,hL=3;class mC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yd._getInstance(aL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await sL(),!this.activeServiceWorker)return;this.sender=new rL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hp();return await Gw(e,td,"1"),await qw(e,td),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Gw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>cL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>qw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Xd(i,!1).getAll();return new Bl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mC.type="LOCAL";const fL=mC;new Ol(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(t,e){return e?yr(e):(ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev extends Xg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ro(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ro(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ro(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mL(t){return oC(t.auth,new ev(t),t.bypassAuthState)}function gL(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),GV(n,new ev(t),t.bypassAuthState)}async function vL(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),KV(n,new ev(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mL;case"linkViaPopup":case"linkViaRedirect":return vL;case"reauthViaPopup":case"reauthViaRedirect":return gL;default:Fn(this.auth,"internal-error")}}resolve(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=new Ol(2e3,1e4);class zs extends gC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,zs.currentPopupAction&&zs.currentPopupAction.cancel(),zs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ae(e,this.auth,"internal-error"),e}async onExecution(){Mr(this.filter.length===1,"Popup operations only handle one event");const e=Zg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yL.get())};e()}}zs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL="pendingRedirect",ac=new Map;class xL extends gC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ac.get(this.auth._key());if(!e){try{const r=await _L(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ac.set(this.auth._key(),e)}return this.bypassAuthState||ac.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _L(t,e){const n=SL(e),r=TL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function EL(t,e){ac.set(t._key(),e)}function TL(t){return yr(t._redirectPersistence)}function SL(t){return oc(wL,t.config.apiKey,t.name)}async function CL(t,e,n=!1){if(Qn(t.app))return Promise.reject(Er(t));const r=_s(t),i=pL(r,e),o=await new xL(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL=10*60*1e3;class PL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!vC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(er(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qw(e))}saveEventToCache(e){this.cachedEventUids.add(Qw(e)),this.lastProcessedEventTime=Date.now()}}function Qw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RL(t,e={}){return bi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bL=/^https?/;async function DL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RL(t);for(const n of e)try{if(NL(n))return}catch{}Fn(t,"unauthorized-domain")}function NL(t){const e=zp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!bL.test(n))return!1;if(kL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML=new Ol(3e4,6e4);function Yw(){const t=tr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function VL(t){return new Promise((e,n)=>{var r,i,s;function o(){Yw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yw(),n(er(t,"network-request-failed"))},timeout:ML.get()})}if(!((i=(r=tr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=tr().gapi)===null||s===void 0)&&s.load)o();else{const a=RV("iframefcb");return tr()[a]=()=>{gapi.load?o():n(er(t,"network-request-failed"))},nC(`${AV()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw lc=null,e})}let lc=null;function LL(t){return lc=lc||VL(t),lc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL=new Ol(5e3,15e3),FL="__/auth/iframe",jL="emulator/auth/iframe",BL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zL(t){const e=t.config;ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qg(e,jL):`https://${t.config.authDomain}/${FL}`,r={apiKey:e.apiKey,appName:t.name,v:Ao},i=UL.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Pl(r).slice(1)}`}async function $L(t){const e=await LL(t),n=tr().gapi;return ae(n,t,"internal-error"),e.open({where:document.body,url:zL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BL,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=er(t,"network-request-failed"),a=tr().setTimeout(()=>{s(o)},OL.get());function l(){tr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HL=500,KL=600,GL="_blank",qL="http://localhost";class Xw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QL(t,e,n,r=HL,i=KL){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},WL),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Mt().toLowerCase();n&&(a=QS(u)?GL:n),GS(u)&&(e=e||qL,l.scrollbars="yes");const c=Object.entries(l).reduce((p,[h,g])=>`${p}${h}=${g},`,"");if(wV(u)&&a!=="_self")return YL(e||"",a),new Xw(null);const f=window.open(e||"",a,c);ae(f,t,"popup-blocked");try{f.focus()}catch{}return new Xw(f)}function YL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL="__/auth/handler",JL="emulator/auth/handler",ZL=encodeURIComponent("fac");async function Jw(t,e,n,r,i,s){ae(t.config.authDomain,t,"auth-domain-config-required"),ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ao,eventId:i};if(e instanceof iC){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Bb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(e instanceof jl){const c=e.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${ZL}=${encodeURIComponent(l)}`:"";return`${e5(t)}?${Pl(a).slice(1)}${u}`}function e5({config:t}){return t.emulator?qg(t,JL):`https://${t.authDomain}/${XL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af="webStorageSupport";class t5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dC,this._completeRedirectFn=CL,this._overrideRedirectResult=EL}async _openPopup(e,n,r,i){var s;Mr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Jw(e,n,r,zp(),i);return QL(e,o,Zg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Jw(e,n,r,zp(),i);return iL(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Mr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $L(e),r=new PL(e);return n.register("authEvent",i=>(ae(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(af,{type:af},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[af];o!==void 0&&n(!!o),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return eC()||qS()||Yg()}}const n5=t5;var Zw="@firebase/auth",ex="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function s5(t){fo(new ls("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ae(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tC(t)},u=new CV(r,i,s,l);return MV(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),fo(new ls("auth-internal",e=>{const n=_s(e.getProvider("auth").getImmediate());return(r=>new r5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gi(Zw,ex,i5(t)),gi(Zw,ex,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=5*60,a5=lT("authIdTokenMaxAge")||o5;let tx=null;const l5=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>a5)return;const i=n==null?void 0:n.token;tx!==i&&(tx=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function yC(t=hT()){const e=hg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=NV(t,{popupRedirectResolver:n5,persistence:[fL,tL,dC]}),r=lT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=l5(s.toString());JV(n,o,()=>o(n.currentUser)),XV(n,a=>o(a))}}const i=oT("auth");return i&&VV(n,`http://${i}`),n}function u5(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}IV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=er("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",u5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});s5("Browser");const c5={apiKey:"AIzaSyDxs66bVRGCZ-ziNfAKPIxeV6Vrm52A1FI",authDomain:"trello-e1641.firebaseapp.com",projectId:"trello-e1641",storageBucket:"trello-e1641.appspot.com",messagingSenderId:"474941774655",appId:"1:474941774655:web:085e770c981660a52b118a",measurementId:"G-R6S5WHW0KC"},wC=dT(c5),kt=yC(wC),Ze=IS(wC);function d5(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return M.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const Jd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Mo(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function tv(t){return"nodeType"in t}function en(t){var e,n;return t?Mo(t)?t:tv(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function nv(t){const{Document:e}=en(t);return t instanceof e}function Ul(t){return Mo(t)?!1:t instanceof en(t).HTMLElement}function xC(t){return t instanceof en(t).SVGElement}function Vo(t){return t?Mo(t)?t.document:tv(t)?nv(t)?t:Ul(t)||xC(t)?t.ownerDocument:document:document:document}const jn=Jd?M.useLayoutEffect:M.useEffect;function rv(t){const e=M.useRef(t);return jn(()=>{e.current=t}),M.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function h5(){const t=M.useRef(null),e=M.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=M.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function hl(t,e){e===void 0&&(e=[t]);const n=M.useRef(t);return jn(()=>{n.current!==t&&(n.current=t)},e),n}function zl(t,e){const n=M.useRef();return M.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function rd(t){const e=rv(t),n=M.useRef(null),r=M.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function Kp(t){const e=M.useRef();return M.useEffect(()=>{e.current=t},[t]),e.current}let lf={};function $l(t,e){return M.useMemo(()=>{if(e)return e;const n=lf[t]==null?0:lf[t]+1;return lf[t]=n,t+"-"+n},[t,e])}function _C(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const a=Object.entries(o);for(const[l,u]of a){const c=s[l];c!=null&&(s[l]=c+t*u)}return s},{...e})}}const io=_C(1),id=_C(-1);function f5(t){return"clientX"in t&&"clientY"in t}function iv(t){if(!t)return!1;const{KeyboardEvent:e}=en(t.target);return e&&t instanceof e}function p5(t){if(!t)return!1;const{TouchEvent:e}=en(t.target);return e&&t instanceof e}function Gp(t){if(p5(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return f5(t)?{x:t.clientX,y:t.clientY}:null}const sd=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[sd.Translate.toString(t),sd.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),nx="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function m5(t){return t.matches(nx)?t:t.querySelector(nx)}const g5={display:"none"};function v5(t){let{id:e,value:n}=t;return Bt.createElement("div",{id:e,style:g5},n)}function y5(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Bt.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function w5(){const[t,e]=M.useState("");return{announce:M.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const EC=M.createContext(null);function x5(t){const e=M.useContext(EC);M.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function _5(){const[t]=M.useState(()=>new Set),e=M.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[M.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var a;return(a=o[i])==null?void 0:a.call(o,s)})},[t]),e]}const E5={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},T5={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function S5(t){let{announcements:e=T5,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=E5}=t;const{announce:s,announcement:o}=w5(),a=$l("DndLiveRegion"),[l,u]=M.useState(!1);if(M.useEffect(()=>{u(!0)},[]),x5(M.useMemo(()=>({onDragStart(f){let{active:p}=f;s(e.onDragStart({active:p}))},onDragMove(f){let{active:p,over:h}=f;e.onDragMove&&s(e.onDragMove({active:p,over:h}))},onDragOver(f){let{active:p,over:h}=f;s(e.onDragOver({active:p,over:h}))},onDragEnd(f){let{active:p,over:h}=f;s(e.onDragEnd({active:p,over:h}))},onDragCancel(f){let{active:p,over:h}=f;s(e.onDragCancel({active:p,over:h}))}}),[s,e])),!l)return null;const c=Bt.createElement(Bt.Fragment,null,Bt.createElement(v5,{id:r,value:i.draggable}),Bt.createElement(y5,{id:a,announcement:o}));return n?Ki.createPortal(c,n):c}var Je;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Je||(Je={}));function od(){}function ad(t,e){return M.useMemo(()=>({sensor:t,options:{}}),[t,e])}function TC(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return M.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Bn=Object.freeze({x:0,y:0});function C5(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function I5(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function P5(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function A5(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function rx(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const SC=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=rx(e,e.left,e.top),s=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const u=C5(rx(l),i);s.push({id:a,data:{droppableContainer:o,value:u}})}}return s.sort(I5)};function R5(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,a=s-n;if(r<i&&n<s){const l=e.width*e.height,u=t.width*t.height,c=o*a,f=c/(l+u-c);return Number(f.toFixed(4))}return 0}const k5=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,a=n.get(o);if(a){const l=R5(a,e);l>0&&i.push({id:o,data:{droppableContainer:s,value:l}})}}return i.sort(P5)};function b5(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function CC(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Bn}function D5(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const N5=D5(1);function M5(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function V5(t,e,n){const r=M5(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:a}=r,l=t.left-o-(1-i)*parseFloat(n),u=t.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),c=i?t.width/i:t.width,f=s?t.height/s:t.height;return{width:c,height:f,top:u,right:l+c,bottom:u+f,left:l}}const L5={ignoreTransform:!1};function Lo(t,e){e===void 0&&(e=L5);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:c}=en(t).getComputedStyle(t);u&&(n=V5(n,u,c))}const{top:r,left:i,width:s,height:o,bottom:a,right:l}=n;return{top:r,left:i,width:s,height:o,bottom:a,right:l}}function ix(t){return Lo(t,{ignoreTransform:!0})}function O5(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function F5(t,e){return e===void 0&&(e=en(t).getComputedStyle(t)),e.position==="fixed"}function j5(t,e){e===void 0&&(e=en(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function sv(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(nv(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Ul(i)||xC(i)||n.includes(i))return n;const s=en(t).getComputedStyle(i);return i!==t&&j5(i,s)&&n.push(i),F5(i,s)?n:r(i.parentNode)}return t?r(t):n}function IC(t){const[e]=sv(t,1);return e??null}function uf(t){return!Jd||!t?null:Mo(t)?t:tv(t)?nv(t)||t===Vo(t).scrollingElement?window:Ul(t)?t:null:null}function PC(t){return Mo(t)?t.scrollX:t.scrollLeft}function AC(t){return Mo(t)?t.scrollY:t.scrollTop}function qp(t){return{x:PC(t),y:AC(t)}}var st;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(st||(st={}));function RC(t){return!Jd||!t?!1:t===document.scrollingElement}function kC(t){const e={x:0,y:0},n=RC(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const B5={x:.2,y:.2};function U5(t,e,n,r,i){let{top:s,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=B5);const{isTop:u,isBottom:c,isLeft:f,isRight:p}=kC(t),h={x:0,y:0},g={x:0,y:0},m={height:e.height*i.y,width:e.width*i.x};return!u&&s<=e.top+m.height?(h.y=st.Backward,g.y=r*Math.abs((e.top+m.height-s)/m.height)):!c&&l>=e.bottom-m.height&&(h.y=st.Forward,g.y=r*Math.abs((e.bottom-m.height-l)/m.height)),!p&&a>=e.right-m.width?(h.x=st.Forward,g.x=r*Math.abs((e.right-m.width-a)/m.width)):!f&&o<=e.left+m.width&&(h.x=st.Backward,g.x=r*Math.abs((e.left+m.width-o)/m.width)),{direction:h,speed:g}}function z5(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function bC(t){return t.reduce((e,n)=>io(e,qp(n)),Bn)}function $5(t){return t.reduce((e,n)=>e+PC(n),0)}function W5(t){return t.reduce((e,n)=>e+AC(n),0)}function H5(t,e){if(e===void 0&&(e=Lo),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);IC(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const K5=[["x",["left","right"],$5],["y",["top","bottom"],W5]];class ov{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=sv(n),i=bC(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,a]of K5)for(const l of o)Object.defineProperty(this,l,{get:()=>{const u=a(r),c=i[s]-u;return this.rect[l]+c},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ba{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function G5(t){const{EventTarget:e}=en(t);return t instanceof e?t:Vo(t)}function cf(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var xn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(xn||(xn={}));function sx(t){t.preventDefault()}function q5(t){t.stopPropagation()}var Ee;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter"})(Ee||(Ee={}));const DC={start:[Ee.Space,Ee.Enter],cancel:[Ee.Esc],end:[Ee.Space,Ee.Enter]},Q5=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Ee.Right:return{...n,x:n.x+25};case Ee.Left:return{...n,x:n.x-25};case Ee.Down:return{...n,y:n.y+25};case Ee.Up:return{...n,y:n.y-25}}};class NC{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new ba(Vo(n)),this.windowListeners=new ba(en(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(xn.Resize,this.handleCancel),this.windowListeners.add(xn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(xn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&H5(r),n(Bn)}handleKeyDown(e){if(iv(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=DC,coordinateGetter:o=Q5,scrollBehavior:a="smooth"}=i,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:u}=r.current,c=u?{x:u.left,y:u.top}:Bn;this.referenceCoordinates||(this.referenceCoordinates=c);const f=o(e,{active:n,context:r.current,currentCoordinates:c});if(f){const p=id(f,c),h={x:0,y:0},{scrollableAncestors:g}=r.current;for(const m of g){const v=e.code,{isTop:w,isRight:x,isLeft:E,isBottom:k,maxScroll:S,minScroll:R}=kC(m),T=z5(m),y={x:Math.min(v===Ee.Right?T.right-T.width/2:T.right,Math.max(v===Ee.Right?T.left:T.left+T.width/2,f.x)),y:Math.min(v===Ee.Down?T.bottom-T.height/2:T.bottom,Math.max(v===Ee.Down?T.top:T.top+T.height/2,f.y))},I=v===Ee.Right&&!x||v===Ee.Left&&!E,C=v===Ee.Down&&!k||v===Ee.Up&&!w;if(I&&y.x!==f.x){const A=m.scrollLeft+p.x,b=v===Ee.Right&&A<=S.x||v===Ee.Left&&A>=R.x;if(b&&!p.y){m.scrollTo({left:A,behavior:a});return}b?h.x=m.scrollLeft-A:h.x=v===Ee.Right?m.scrollLeft-S.x:m.scrollLeft-R.x,h.x&&m.scrollBy({left:-h.x,behavior:a});break}else if(C&&y.y!==f.y){const A=m.scrollTop+p.y,b=v===Ee.Down&&A<=S.y||v===Ee.Up&&A>=R.y;if(b&&!p.x){m.scrollTo({top:A,behavior:a});return}b?h.y=m.scrollTop-A:h.y=v===Ee.Down?m.scrollTop-S.y:m.scrollTop-R.y,h.y&&m.scrollBy({top:-h.y,behavior:a});break}}this.handleMove(e,io(id(f,this.referenceCoordinates),h))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}NC.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=DC,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=s.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function ox(t){return!!(t&&"distance"in t)}function ax(t){return!!(t&&"delay"in t)}class av{constructor(e,n,r){var i;r===void 0&&(r=G5(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=Vo(o),this.documentListeners=new ba(this.document),this.listeners=new ba(r),this.windowListeners=new ba(en(o)),this.initialCoordinates=(i=Gp(s))!=null?i:Bn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(xn.Resize,this.handleCancel),this.windowListeners.add(xn.DragStart,sx),this.windowListeners.add(xn.VisibilityChange,this.handleCancel),this.windowListeners.add(xn.ContextMenu,sx),this.documentListeners.add(xn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ax(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}if(ox(n))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(xn.Click,q5,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(xn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:a}}=s;if(!i)return;const l=(n=Gp(e))!=null?n:Bn,u=id(i,l);if(!r&&a){if(ox(a)){if(a.tolerance!=null&&cf(u,a.tolerance))return this.handleCancel();if(cf(u,a.distance))return this.handleStart()}return ax(a)&&cf(u,a.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===Ee.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Y5={move:{name:"pointermove"},end:{name:"pointerup"}};class MC extends av{constructor(e){const{event:n}=e,r=Vo(n.target);super(e,Y5,r)}}MC.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const X5={move:{name:"mousemove"},end:{name:"mouseup"}};var Qp;(function(t){t[t.RightClick=2]="RightClick"})(Qp||(Qp={}));class lv extends av{constructor(e){super(e,X5,Vo(e.event.target))}}lv.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Qp.RightClick?!1:(r==null||r({event:n}),!0)}}];const df={move:{name:"touchmove"},end:{name:"touchend"}};class uv extends av{constructor(e){super(e,df)}static setup(){return window.addEventListener(df.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(df.move.name,e)};function e(){}}}uv.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Da;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Da||(Da={}));var ld;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(ld||(ld={}));function J5(t){let{acceleration:e,activator:n=Da.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:a=ld.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:c,delta:f,threshold:p}=t;const h=eO({delta:f,disabled:!s}),[g,m]=h5(),v=M.useRef({x:0,y:0}),w=M.useRef({x:0,y:0}),x=M.useMemo(()=>{switch(n){case Da.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Da.DraggableRect:return i}},[n,i,l]),E=M.useRef(null),k=M.useCallback(()=>{const R=E.current;if(!R)return;const T=v.current.x*w.current.x,y=v.current.y*w.current.y;R.scrollBy(T,y)},[]),S=M.useMemo(()=>a===ld.TreeOrder?[...u].reverse():u,[a,u]);M.useEffect(()=>{if(!s||!u.length||!x){m();return}for(const R of S){if((r==null?void 0:r(R))===!1)continue;const T=u.indexOf(R),y=c[T];if(!y)continue;const{direction:I,speed:C}=U5(R,y,x,e,p);for(const A of["x","y"])h[A][I[A]]||(C[A]=0,I[A]=0);if(C.x>0||C.y>0){m(),E.current=R,g(k,o),v.current=C,w.current=I;return}}v.current={x:0,y:0},w.current={x:0,y:0},m()},[e,k,r,m,s,o,JSON.stringify(x),JSON.stringify(h),g,u,S,c,JSON.stringify(p)])}const Z5={x:{[st.Backward]:!1,[st.Forward]:!1},y:{[st.Backward]:!1,[st.Forward]:!1}};function eO(t){let{delta:e,disabled:n}=t;const r=Kp(e);return zl(i=>{if(n||!r||!i)return Z5;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[st.Backward]:i.x[st.Backward]||s.x===-1,[st.Forward]:i.x[st.Forward]||s.x===1},y:{[st.Backward]:i.y[st.Backward]||s.y===-1,[st.Forward]:i.y[st.Forward]||s.y===1}}},[n,e,r])}function tO(t,e){const n=e!==null?t.get(e):void 0,r=n?n.node.current:null;return zl(i=>{var s;return e===null?null:(s=r??i)!=null?s:null},[r,e])}function nO(t,e){return M.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var fl;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(fl||(fl={}));var Yp;(function(t){t.Optimized="optimized"})(Yp||(Yp={}));const lx=new Map;function rO(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=M.useState(null),{frequency:a,measure:l,strategy:u}=i,c=M.useRef(t),f=v(),p=hl(f),h=M.useCallback(function(w){w===void 0&&(w=[]),!p.current&&o(x=>x===null?w:x.concat(w.filter(E=>!x.includes(E))))},[p]),g=M.useRef(null),m=zl(w=>{if(f&&!n)return lx;if(!w||w===lx||c.current!==t||s!=null){const x=new Map;for(let E of t){if(!E)continue;if(s&&s.length>0&&!s.includes(E.id)&&E.rect.current){x.set(E.id,E.rect.current);continue}const k=E.node.current,S=k?new ov(l(k),k):null;E.rect.current=S,S&&x.set(E.id,S)}return x}return w},[t,s,n,f,l]);return M.useEffect(()=>{c.current=t},[t]),M.useEffect(()=>{f||h()},[n,f]),M.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),M.useEffect(()=>{f||typeof a!="number"||g.current!==null||(g.current=setTimeout(()=>{h(),g.current=null},a))},[a,f,h,...r]),{droppableRects:m,measureDroppableContainers:h,measuringScheduled:s!=null};function v(){switch(u){case fl.Always:return!1;case fl.BeforeDragging:return n;default:return!n}}}function VC(t,e){return zl(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function iO(t,e){return VC(t,e)}function sO(t){let{callback:e,disabled:n}=t;const r=rv(e),i=M.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return M.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Zd(t){let{callback:e,disabled:n}=t;const r=rv(e),i=M.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return M.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function oO(t){return new ov(Lo(t),t)}function ux(t,e,n){e===void 0&&(e=oO);const[r,i]=M.useReducer(a,null),s=sO({callback(l){if(t)for(const u of l){const{type:c,target:f}=u;if(c==="childList"&&f instanceof HTMLElement&&f.contains(t)){i();break}}}}),o=Zd({callback:i});return jn(()=>{i(),t?(o==null||o.observe(t),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),s==null||s.disconnect())},[t]),r;function a(l){if(!t)return null;if(t.isConnected===!1){var u;return(u=l??n)!=null?u:null}const c=e(t);return JSON.stringify(l)===JSON.stringify(c)?l:c}}function aO(t){const e=VC(t);return CC(t,e)}const cx=[];function lO(t){const e=M.useRef(t),n=zl(r=>t?r&&r!==cx&&t&&e.current&&t.parentNode===e.current.parentNode?r:sv(t):cx,[t]);return M.useEffect(()=>{e.current=t},[t]),n}function uO(t){const[e,n]=M.useState(null),r=M.useRef(t),i=M.useCallback(s=>{const o=uf(s.target);o&&n(a=>a?(a.set(o,qp(o)),new Map(a)):null)},[]);return M.useEffect(()=>{const s=r.current;if(t!==s){o(s);const a=t.map(l=>{const u=uf(l);return u?(u.addEventListener("scroll",i,{passive:!0}),[u,qp(u)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(s)};function o(a){a.forEach(l=>{const u=uf(l);u==null||u.removeEventListener("scroll",i)})}},[i,t]),M.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>io(s,o),Bn):bC(t):Bn,[t,e])}function dx(t,e){e===void 0&&(e=[]);const n=M.useRef(null);return M.useEffect(()=>{n.current=null},e),M.useEffect(()=>{const r=t!==Bn;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?id(t,n.current):Bn}function cO(t){M.useEffect(()=>{if(!Jd)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function dO(t,e){return M.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,e)},n},{}),[t,e])}function LC(t){return M.useMemo(()=>t?O5(t):null,[t])}const hf=[];function hO(t,e){e===void 0&&(e=Lo);const[n]=t,r=LC(n?en(n):null),[i,s]=M.useReducer(a,hf),o=Zd({callback:s});return t.length>0&&i===hf&&s(),jn(()=>{t.length?t.forEach(l=>o==null?void 0:o.observe(l)):(o==null||o.disconnect(),s())},[t]),i;function a(){return t.length?t.map(l=>RC(l)?r:new ov(e(l),l)):hf}}function fO(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Ul(e)?e:t}function pO(t){let{measure:e}=t;const[n,r]=M.useState(null),i=M.useCallback(u=>{for(const{target:c}of u)if(Ul(c)){r(f=>{const p=e(c);return f?{...f,width:p.width,height:p.height}:p});break}},[e]),s=Zd({callback:i}),o=M.useCallback(u=>{const c=fO(u);s==null||s.disconnect(),c&&(s==null||s.observe(c)),r(c?e(c):null)},[e,s]),[a,l]=rd(o);return M.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const mO=[{sensor:MC,options:{}},{sensor:NC,options:{}}],gO={current:{}},uc={draggable:{measure:ix},droppable:{measure:ix,strategy:fl.WhileDragging,frequency:Yp.Optimized},dragOverlay:{measure:Lo}};class Na extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const vO={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Na,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:od},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:uc,measureDroppableContainers:od,windowRect:null,measuringScheduled:!1},yO={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:od,draggableNodes:new Map,over:null,measureDroppableContainers:od},eh=M.createContext(yO),OC=M.createContext(vO);function wO(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Na}}}function xO(t,e){switch(e.type){case Je.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Je.DragMove:return t.draggable.active?{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}}:t;case Je.DragEnd:case Je.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Je.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new Na(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case Je.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new Na(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case Je.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new Na(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function _O(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=M.useContext(eh),s=Kp(r),o=Kp(n==null?void 0:n.id);return M.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!iv(s)||document.activeElement===s.target)return;const a=i.get(o);if(!a)return;const{activatorNode:l,node:u}=a;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const c of[l.current,u.current]){if(!c)continue;const f=m5(c);if(f){f.focus();break}}})}},[r,e,i,o,s]),null}function EO(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function TO(t){return M.useMemo(()=>({draggable:{...uc.draggable,...t==null?void 0:t.draggable},droppable:{...uc.droppable,...t==null?void 0:t.droppable},dragOverlay:{...uc.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function SO(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=M.useRef(!1),{x:o,y:a}=typeof i=="boolean"?{x:i,y:i}:i;jn(()=>{if(!o&&!a||!e){s.current=!1;return}if(s.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const c=n(u),f=CC(c,r);if(o||(f.x=0),a||(f.y=0),s.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=IC(u);p&&p.scrollBy({top:f.y,left:f.x})}},[e,o,a,r,n])}const FC=M.createContext({...Bn,scaleX:1,scaleY:1});var qr;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(qr||(qr={}));const jC=M.memo(function(e){var n,r,i,s;let{id:o,accessibility:a,autoScroll:l=!0,children:u,sensors:c=mO,collisionDetection:f=k5,measuring:p,modifiers:h,...g}=e;const m=M.useReducer(xO,void 0,wO),[v,w]=m,[x,E]=_5(),[k,S]=M.useState(qr.Uninitialized),R=k===qr.Initialized,{draggable:{active:T,nodes:y,translate:I},droppable:{containers:C}}=v,A=T?y.get(T):null,b=M.useRef({initial:null,translated:null}),D=M.useMemo(()=>{var Le;return T!=null?{id:T,data:(Le=A==null?void 0:A.data)!=null?Le:gO,rect:b}:null},[T,A]),B=M.useRef(null),[O,K]=M.useState(null),[U,F]=M.useState(null),z=hl(g,Object.values(g)),Q=$l("DndDescribedBy",o),J=M.useMemo(()=>C.getEnabled(),[C]),H=TO(p),{droppableRects:X,measureDroppableContainers:he,measuringScheduled:de}=rO(J,{dragging:R,dependencies:[I.x,I.y],config:H.droppable}),Z=tO(y,T),q=M.useMemo(()=>U?Gp(U):null,[U]),te=Xl(),xe=iO(Z,H.draggable.measure);SO({activeNode:T?y.get(T):null,config:te.layoutShiftCompensation,initialRect:xe,measure:H.draggable.measure});const ie=ux(Z,H.draggable.measure,xe),Ie=ux(Z?Z.parentElement:null),_e=M.useRef({activatorEvent:null,active:null,activeNode:Z,collisionRect:null,collisions:null,droppableRects:X,draggableNodes:y,draggingNode:null,draggingNodeRect:null,droppableContainers:C,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ht=C.getNodeFor((n=_e.current.over)==null?void 0:n.id),Lt=pO({measure:H.dragOverlay.measure}),pn=(r=Lt.nodeRef.current)!=null?r:Z,mn=R?(i=Lt.rect)!=null?i:ie:null,Mi=!!(Lt.nodeRef.current&&Lt.rect),Or=aO(Mi?null:ie),yt=LC(pn?en(pn):null),Ot=lO(R?Ht??Z:null),Pn=hO(Ot),ar=EO(h,{transform:{x:I.x-Or.x,y:I.y-Or.y,scaleX:1,scaleY:1},activatorEvent:U,active:D,activeNodeRect:ie,containerNodeRect:Ie,draggingNodeRect:mn,over:_e.current.over,overlayNodeRect:Lt.rect,scrollableAncestors:Ot,scrollableAncestorRects:Pn,windowRect:yt}),lr=q?io(q,I):null,ur=uO(Ot),Vi=dx(ur),Ve=dx(ur,[ie]),De=io(ar,Vi),tn=mn?N5(mn,ar):null,nn=D&&tn?f({active:D,collisionRect:tn,droppableRects:X,droppableContainers:J,pointerCoordinates:lr}):null,Un=A5(nn,"id"),[zn,Fr]=M.useState(null),Gl=Mi?ar:io(ar,Ve),ql=b5(Gl,(s=zn==null?void 0:zn.rect)!=null?s:null,ie),Es=M.useCallback((Le,at)=>{let{sensor:lt,options:wt}=at;if(B.current==null)return;const Ft=y.get(B.current);if(!Ft)return;const xt=Le.nativeEvent,rn=new lt({active:B.current,activeNode:Ft,event:xt,options:wt,context:_e,onStart(Kt){const We=B.current;if(We==null)return;const jr=y.get(We);if(!jr)return;const{onDragStart:$n}=z.current,Wn={active:{id:We,data:jr.data,rect:b}};Ki.unstable_batchedUpdates(()=>{$n==null||$n(Wn),S(qr.Initializing),w({type:Je.DragStart,initialCoordinates:Kt,active:We}),x({type:"onDragStart",event:Wn})})},onMove(Kt){w({type:Je.DragMove,coordinates:Kt})},onEnd:gn(Je.DragEnd),onCancel:gn(Je.DragCancel)});Ki.unstable_batchedUpdates(()=>{K(rn),F(Le.nativeEvent)});function gn(Kt){return async function(){const{active:jr,collisions:$n,over:Wn,scrollAdjustedTranslate:Jl}=_e.current;let Li=null;if(jr&&Jl){const{cancelDrop:vn}=z.current;Li={activatorEvent:xt,active:jr,collisions:$n,delta:Jl,over:Wn},Kt===Je.DragEnd&&typeof vn=="function"&&await Promise.resolve(vn(Li))&&(Kt=Je.DragCancel)}B.current=null,Ki.unstable_batchedUpdates(()=>{w({type:Kt}),S(qr.Uninitialized),Fr(null),K(null),F(null);const vn=Kt===Je.DragEnd?"onDragEnd":"onDragCancel";if(Li){const jo=z.current[vn];jo==null||jo(Li),x({type:vn,event:Li})}})}}},[y]),uh=M.useCallback((Le,at)=>(lt,wt)=>{const Ft=lt.nativeEvent,xt=y.get(wt);if(B.current!==null||!xt||Ft.dndKit||Ft.defaultPrevented)return;const rn={active:xt};Le(lt,at.options,rn)===!0&&(Ft.dndKit={capturedBy:at.sensor},B.current=wt,Es(lt,at))},[y,Es]),Ql=nO(c,uh);cO(c),jn(()=>{ie&&k===qr.Initializing&&S(qr.Initialized)},[ie,k]),M.useEffect(()=>{const{onDragMove:Le}=z.current,{active:at,activatorEvent:lt,collisions:wt,over:Ft}=_e.current;if(!at||!lt)return;const xt={active:at,activatorEvent:lt,collisions:wt,delta:{x:De.x,y:De.y},over:Ft};Ki.unstable_batchedUpdates(()=>{Le==null||Le(xt),x({type:"onDragMove",event:xt})})},[De.x,De.y]),M.useEffect(()=>{const{active:Le,activatorEvent:at,collisions:lt,droppableContainers:wt,scrollAdjustedTranslate:Ft}=_e.current;if(!Le||B.current==null||!at||!Ft)return;const{onDragOver:xt}=z.current,rn=wt.get(Un),gn=rn&&rn.rect.current?{id:rn.id,rect:rn.rect.current,data:rn.data,disabled:rn.disabled}:null,Kt={active:Le,activatorEvent:at,collisions:lt,delta:{x:Ft.x,y:Ft.y},over:gn};Ki.unstable_batchedUpdates(()=>{Fr(gn),xt==null||xt(Kt),x({type:"onDragOver",event:Kt})})},[Un]),jn(()=>{_e.current={activatorEvent:U,active:D,activeNode:Z,collisionRect:tn,collisions:nn,droppableRects:X,draggableNodes:y,draggingNode:pn,draggingNodeRect:mn,droppableContainers:C,over:zn,scrollableAncestors:Ot,scrollAdjustedTranslate:De},b.current={initial:mn,translated:tn}},[D,Z,nn,tn,y,pn,mn,X,C,zn,Ot,De]),J5({...te,delta:I,draggingRect:tn,pointerCoordinates:lr,scrollableAncestors:Ot,scrollableAncestorRects:Pn});const Fo=M.useMemo(()=>({active:D,activeNode:Z,activeNodeRect:ie,activatorEvent:U,collisions:nn,containerNodeRect:Ie,dragOverlay:Lt,draggableNodes:y,droppableContainers:C,droppableRects:X,over:zn,measureDroppableContainers:he,scrollableAncestors:Ot,scrollableAncestorRects:Pn,measuringConfiguration:H,measuringScheduled:de,windowRect:yt}),[D,Z,ie,U,nn,Ie,Lt,y,C,X,zn,he,Ot,Pn,H,de,yt]),Yl=M.useMemo(()=>({activatorEvent:U,activators:Ql,active:D,activeNodeRect:ie,ariaDescribedById:{draggable:Q},dispatch:w,draggableNodes:y,over:zn,measureDroppableContainers:he}),[U,Ql,D,ie,w,Q,y,zn,he]);return Bt.createElement(EC.Provider,{value:E},Bt.createElement(eh.Provider,{value:Yl},Bt.createElement(OC.Provider,{value:Fo},Bt.createElement(FC.Provider,{value:ql},u)),Bt.createElement(_O,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Bt.createElement(S5,{...a,hiddenTextDescribedById:Q}));function Xl(){const Le=(O==null?void 0:O.autoScrollEnabled)===!1,at=typeof l=="object"?l.enabled===!1:l===!1,lt=R&&!Le&&!at;return typeof l=="object"?{...l,enabled:lt}:{enabled:lt}}}),CO=M.createContext(null),hx="button",IO="Droppable";function PO(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=$l(IO),{activators:o,activatorEvent:a,active:l,activeNodeRect:u,ariaDescribedById:c,draggableNodes:f,over:p}=M.useContext(eh),{role:h=hx,roleDescription:g="draggable",tabIndex:m=0}=i??{},v=(l==null?void 0:l.id)===e,w=M.useContext(v?FC:CO),[x,E]=rd(),[k,S]=rd(),R=dO(o,e),T=hl(n);jn(()=>(f.set(e,{id:e,key:s,node:x,activatorNode:k,data:T}),()=>{const I=f.get(e);I&&I.key===s&&f.delete(e)}),[f,e]);const y=M.useMemo(()=>({role:h,tabIndex:m,"aria-disabled":r,"aria-pressed":v&&h===hx?!0:void 0,"aria-roledescription":g,"aria-describedby":c.draggable}),[r,h,m,v,g,c.draggable]);return{active:l,activatorEvent:a,activeNodeRect:u,attributes:y,isDragging:v,listeners:r?void 0:R,node:x,over:p,setNodeRef:E,setActivatorNodeRef:S,transform:w}}function AO(){return M.useContext(OC)}const RO="Droppable",kO={timeout:25};function bO(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=$l(RO),{active:o,dispatch:a,over:l,measureDroppableContainers:u}=M.useContext(eh),c=M.useRef({disabled:n}),f=M.useRef(!1),p=M.useRef(null),h=M.useRef(null),{disabled:g,updateMeasurementsFor:m,timeout:v}={...kO,...i},w=hl(m??r),x=M.useCallback(()=>{if(!f.current){f.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{u(Array.isArray(w.current)?w.current:[w.current]),h.current=null},v)},[v]),E=Zd({callback:x,disabled:g||!o}),k=M.useCallback((y,I)=>{E&&(I&&(E.unobserve(I),f.current=!1),y&&E.observe(y))},[E]),[S,R]=rd(k),T=hl(e);return M.useEffect(()=>{!E||!S.current||(E.disconnect(),f.current=!1,E.observe(S.current))},[S,E]),jn(()=>(a({type:Je.RegisterDroppable,element:{id:r,key:s,disabled:n,node:S,rect:p,data:T}}),()=>a({type:Je.UnregisterDroppable,key:s,id:r})),[r]),M.useEffect(()=>{n!==c.current.disabled&&(a({type:Je.SetDroppableDisabled,id:r,key:s,disabled:n}),c.current.disabled=n)},[r,s,n,a]),{active:o,rect:p,isOver:(l==null?void 0:l.id)===r,node:S,over:l,setNodeRef:R}}function th(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function DO(t,e){return t.reduce((n,r,i)=>{const s=e.get(r);return s&&(n[i]=s),n},Array(t.length))}function Vu(t){return t!==null&&t>=0}function NO(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function MO(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const BC=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const s=th(e,r,n),o=e[i],a=s[i];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},Lu={scaleX:1,scaleY:1},UC=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:o}=t;const a=(e=s[n])!=null?e:r;if(!a)return null;if(i===n){const u=s[o];return u?{x:0,y:n<o?u.top+u.height-(a.top+a.height):u.top-a.top,...Lu}:null}const l=VO(s,i,n);return i>n&&i<=o?{x:0,y:-a.height-l,...Lu}:i<n&&i>=o?{x:0,y:a.height+l,...Lu}:{x:0,y:0,...Lu}};function VO(t,e,n){const r=t[e],i=t[e-1],s=t[e+1];return r?n<e?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const zC="Sortable",$C=Bt.createContext({activeIndex:-1,containerId:zC,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:BC,disabled:{draggable:!1,droppable:!1}});function WC(t){let{children:e,id:n,items:r,strategy:i=BC,disabled:s=!1}=t;const{active:o,dragOverlay:a,droppableRects:l,over:u,measureDroppableContainers:c}=AO(),f=$l(zC,n),p=a.rect!==null,h=M.useMemo(()=>r.map(R=>typeof R=="object"&&"id"in R?R.id:R),[r]),g=o!=null,m=o?h.indexOf(o.id):-1,v=u?h.indexOf(u.id):-1,w=M.useRef(h),x=!NO(h,w.current),E=v!==-1&&m===-1||x,k=MO(s);jn(()=>{x&&g&&c(h)},[x,h,g,c]),M.useEffect(()=>{w.current=h},[h]);const S=M.useMemo(()=>({activeIndex:m,containerId:f,disabled:k,disableTransforms:E,items:h,overIndex:v,useDragOverlay:p,sortedRects:DO(h,l),strategy:i}),[m,f,k.draggable,k.droppable,E,h,v,l,p,i]);return Bt.createElement($C.Provider,{value:S},e)}const LO=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return th(n,r,i).indexOf(e)},OO=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:s,newIndex:o,previousItems:a,previousContainerId:l,transition:u}=t;return!u||!r||a!==s&&i===o?!1:n?!0:o!==i&&e===l},FO={duration:200,easing:"ease"},HC="transform",jO=sd.Transition.toString({property:HC,duration:0,easing:"linear"}),BO={roleDescription:"sortable"};function UO(t){let{disabled:e,index:n,node:r,rect:i}=t;const[s,o]=M.useState(null),a=M.useRef(n);return jn(()=>{if(!e&&n!==a.current&&r.current){const l=i.current;if(l){const u=Lo(r.current,{ignoreTransform:!0}),c={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(c.x||c.y)&&o(c)}}n!==a.current&&(a.current=n)},[e,n,r,i]),M.useEffect(()=>{s&&o(null)},[s]),s}function KC(t){let{animateLayoutChanges:e=OO,attributes:n,disabled:r,data:i,getNewIndex:s=LO,id:o,strategy:a,resizeObserverConfig:l,transition:u=FO}=t;const{items:c,containerId:f,activeIndex:p,disabled:h,disableTransforms:g,sortedRects:m,overIndex:v,useDragOverlay:w,strategy:x}=M.useContext($C),E=zO(r,h),k=c.indexOf(o),S=M.useMemo(()=>({sortable:{containerId:f,index:k,items:c},...i}),[f,i,k,c]),R=M.useMemo(()=>c.slice(c.indexOf(o)),[c,o]),{rect:T,node:y,isOver:I,setNodeRef:C}=bO({id:o,data:S,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:R,...l}}),{active:A,activatorEvent:b,activeNodeRect:D,attributes:B,setNodeRef:O,listeners:K,isDragging:U,over:F,setActivatorNodeRef:z,transform:Q}=PO({id:o,data:S,attributes:{...BO,...n},disabled:E.draggable}),J=d5(C,O),H=!!A,X=H&&!g&&Vu(p)&&Vu(v),he=!w&&U,de=he&&X?Q:null,q=X?de??(a??x)({rects:m,activeNodeRect:D,activeIndex:p,overIndex:v,index:k}):null,te=Vu(p)&&Vu(v)?s({id:o,items:c,activeIndex:p,overIndex:v}):k,xe=A==null?void 0:A.id,ie=M.useRef({activeId:xe,items:c,newIndex:te,containerId:f}),Ie=c!==ie.current.items,_e=e({active:A,containerId:f,isDragging:U,isSorting:H,id:o,index:k,items:c,newIndex:ie.current.newIndex,previousItems:ie.current.items,previousContainerId:ie.current.containerId,transition:u,wasDragging:ie.current.activeId!=null}),Ht=UO({disabled:!_e,index:k,node:y,rect:T});return M.useEffect(()=>{H&&ie.current.newIndex!==te&&(ie.current.newIndex=te),f!==ie.current.containerId&&(ie.current.containerId=f),c!==ie.current.items&&(ie.current.items=c)},[H,te,f,c]),M.useEffect(()=>{if(xe===ie.current.activeId)return;if(xe&&!ie.current.activeId){ie.current.activeId=xe;return}const pn=setTimeout(()=>{ie.current.activeId=xe},50);return()=>clearTimeout(pn)},[xe]),{active:A,activeIndex:p,attributes:B,data:S,rect:T,index:k,newIndex:te,items:c,isOver:I,isSorting:H,isDragging:U,listeners:K,node:y,overIndex:v,over:F,setNodeRef:J,setActivatorNodeRef:z,setDroppableNodeRef:C,setDraggableNodeRef:O,transform:Ht??q,transition:Lt()};function Lt(){if(Ht||Ie&&ie.current.newIndex===k)return jO;if(!(he&&!iv(b)||!u)&&(H||_e))return sd.Transition.toString({...u,property:HC})}}function zO(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}Ee.Down,Ee.Right,Ee.Up,Ee.Left;function $O({title:t,id:e,listid:n,labels:r,item:i,BoardId:s}){const[o,a]=M.useState({x:0,y:0}),{menuOpen:l,setMenuOpen:u,toggleMenu:c}=KE(),[f,p]=M.useState({x:0,y:0}),[h,g]=M.useState(!1),[m,v]=M.useState(!1),[w,x]=M.useState(r),E=M.useRef(null),k=M.useRef(null),S=M.useRef(null),R=M.useRef(null),[T,y]=M.useState(!1),[I,C]=M.useState(!1),[A,b]=M.useState(t),D=M.useRef(null),{attributes:B,listeners:O,setNodeRef:K,transform:U,transition:F,isDragging:z}=KC({id:i.id}),Q={transform:U?`translate3d(${U.x}px, ${U.y}px,0) rotate(${z?-2:0}deg)`:void 0,transition:F,opacity:z?.8:1,cursor:z?"grabbing":"pointer",zIndex:z?10:"auto"},J=q=>{K(q),S.current=q},H=q=>{q.preventDefault(),u(!0);const te=S.current.getBoundingClientRect(),xe=te.left+window.scrollX+270,ie=te.top+window.scrollY-6,Ie=window.innerWidth;xe+200>Ie?y(!0):y(!1),Ie<650?C(!0):C(!1);const _e=xe+200>Ie?xe-535:xe,Ht=ie<0?0:ie;a({x:_e,y:Ht}),document.body.classList.add("MenuisOpen"),g(!0)};M.useEffect(()=>{X()},[w]);const X=async()=>{const q=kt.currentUser;if(q)try{await ts(Ut(Ze,`users/${q.uid}/Boards/${s}/Lists/${n}/cards`,e),{labels:w})}catch(te){console.error("Error updating card title: ",te)}else console.error("User is not authenticated.")},he=async()=>{const q=kt.currentUser;if(q)try{const te=Ut(Ze,`users/${q.uid}/Boards/${s}/Lists/${n}/cards`,e);await YM(te)}catch(te){console.error("Error deleting list: ",te)}else console.error("User is not authenticated")},de=async q=>{const te=q.target.value;b(te),b(te);const xe=kt.currentUser;if(xe)try{await ts(Ut(Ze,`users/${xe.uid}/Boards/${s}/Lists/${n}/cards`,e),{title:te})}catch(ie){console.error("Error updating card title: ",ie)}else console.error("User is not authenticated.")},Z=()=>{v(!0),console.log(m);const q=R.current.getBoundingClientRect();p({x:q.left,y:q.top})};return M.useEffect(()=>{const q=te=>{k.current&&!k.current.contains(te.target)&&!D.current.contains(te.target)&&(!E.current||!E.current.contains(te.target))&&(g(!1),u(!1),document.body.classList.remove("MenuisOpen")),E.current&&!E.current.contains(te.target)&&!R.current.contains(te.target)&&v(!1)};return document.addEventListener("click",q),()=>{document.removeEventListener("click",q)}},[h,m,u]),N.jsxs("div",{className:"w-full",children:[m&&N.jsxs("div",{style:{top:window.innerHeight>f.y+350?`${f.y}px`:`${f.y-170}px`,left:I?"52%":`${f.x-70}px`,maxWidth:I?"170px":" "},ref:E,className:"flex absolute flex-col z-[10001] p-1.5 rounded-md text-gray-300 pt-2 bg-gray-800  gap-1.5",children:[N.jsx("div",{className:"flex justify-end align-top",children:N.jsx("button",{onClick:q=>{q.stopPropagation(),v(!1)},className:" m-1 text-slate-300  px-1  rounded-md  text-sm hover:bg-gray-600",children:"✕"})}),N.jsx("div",{className:"flex justify-center gap-6",children:N.jsx("h3",{className:"mb-3 -mt-[1.9rem] text-center",children:"Labels"})}),N.jsxs("div",{className:"flex gap-1.5",children:[N.jsx("input",{checked:w.label1,onChange:()=>{x(q=>({...q,label1:!q.label1}))},id:"checkbox-group-1",type:"checkbox",className:"w-5 h-4 cursor-pointer  border border-gray-300 rounded-md m-2  checked:bg-no-repeat checked:bg-center checked:border-indigo-500 checked:bg-indigo-100"}),N.jsx("label",{htmlFor:"checkbox-group-1",className:"w-44 bg-green-600 rounded-sm mr-4 cursor-pointer hover:bg-green-500"})]}),N.jsxs("div",{className:"flex gap-1.5",children:[N.jsx("input",{checked:w.label2,onChange:()=>{x(q=>({...q,label2:!q.label2}))},id:"checkbox-group-2",type:"checkbox",className:"w-5 h-4 cursor-pointer  border border-gray-300 rounded-md m-2  checked:bg-no-repeat checked:bg-center checked:border-indigo-500 checked:bg-indigo-100"}),N.jsx("label",{htmlFor:"checkbox-group-2",className:"w-44 bg-yellow-800 rounded-sm mr-4 cursor-pointer hover:bg-yellow-700"})]}),N.jsxs("div",{className:"flex gap-1.5",children:[N.jsx("input",{checked:w.label3,onChange:()=>{x(q=>({...q,label3:!q.label3}))},id:"checkbox-group-3",type:"checkbox",className:"w-5 h-4 cursor-pointer  border border-gray-300 rounded-md m-2  checked:bg-no-repeat checked:bg-center checked:border-indigo-500 checked:bg-indigo-100"}),N.jsx("label",{htmlFor:"checkbox-group-3",className:"w-44 bg-amber-600  rounded-sm mr-4 cursor-pointer hover:bg-amber-500"})]}),N.jsxs("div",{className:"flex gap-1.5",children:[N.jsx("input",{checked:w.label4,onChange:()=>{x(q=>({...q,label4:!q.label4}))},id:"checkbox-group-4",type:"checkbox",className:"w-5 h-4 cursor-pointer  border border-gray-300 rounded-md m-2  checked:bg-no-repeat checked:bg-center checked:border-indigo-500 checked:bg-indigo-100"}),N.jsx("label",{htmlFor:"checkbox-group-4",className:"w-44 bg-red-700 rounded-sm mr-4 cursor-pointer hover:bg-red-600"})]}),N.jsxs("div",{className:"flex gap-1.5",children:[N.jsx("input",{checked:w.label5,onChange:()=>{x(q=>({...q,label5:!q.label5}))},id:"checkbox-group-5",type:"checkbox",className:"w-5 h-4 cursor-pointer  border border-gray-300 rounded-md m-2  checked:bg-no-repeat checked:bg-center checked:border-indigo-500 checked:bg-indigo-100"}),N.jsx("label",{htmlFor:"checkbox-group-5",className:"w-44 bg-indigo-800 rounded-sm mr-4 cursor-pointer hover:bg-indigo-800"})]}),N.jsxs("div",{className:"flex gap-1.5",children:[N.jsx("input",{checked:w.label6,onChange:()=>{x(q=>({...q,label6:!q.label6}))},id:"checkbox-group-6",type:"checkbox",className:"w-5 h-4 cursor-pointer  border border-gray-300 rounded-md m-2  checked:bg-no-repeat checked:bg-center checked:border-indigo-500 checked:bg-indigo-100"}),N.jsx("label",{htmlFor:"checkbox-group-6",className:"w-44 bg-blue-700 rounded-sm mr-4 cursor-pointer hover:bg-blue-600"})]}),N.jsxs("div",{className:"flex gap-1.5",children:[N.jsx("input",{checked:w.label7,onChange:()=>{x(q=>({...q,label7:!q.label7}))},id:"checkbox-group-7",type:"checkbox",className:"w-5 h-4 cursor-pointer  border border-gray-300 rounded-md m-2  checked:bg-no-repeat checked:bg-center checked:border-indigo-500 checked:bg-indigo-100"}),N.jsx("label",{htmlFor:"checkbox-group-7",className:"w-44 bg-pink-800 rounded-sm mr-4 cursor-pointer hover:bg-pink-700"})]}),N.jsxs("div",{className:"flex gap-1.5 mb-6",children:[N.jsx("input",{checked:w.label8,onChange:()=>{x(q=>({...q,label8:!q.label8}))},id:"checkbox-group-8",type:"checkbox",className:"w-5 h-4 cursor-pointer  border border-gray-300 rounded-md m-2  checked:bg-no-repeat checked:bg-center checked:border-indigo-500 checked:bg-indigo-100"}),N.jsx("label",{htmlFor:"checkbox-group-8",className:"w-44 bg-neutral-400 rounded-sm mr-4 cursor-pointer hover:bg-neutral-300"})]})]}),N.jsx("div",{className:`overlay ${h?"visible":""}`}),h&&N.jsxs("div",{ref:k,className:"card flex item  z-[1001]  absolute  flex-col gap-1 ",style:{top:window.innerHeight>o.y+350?`${o.y}px`:`${o.y-180}px`,left:I?"52.5%":`${o.x}px`,alignItems:`${T?"end":"start"}`},children:[N.jsxs("button",{className:"flex text-gray-300  bg-gray-800  hover:bg-gray-700 rounded-sm font-bold   p-3 pr-3.5 py-2 w-fit  text-sm",children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-5 mr-2",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})}),"Open card"]}),N.jsxs("button",{ref:R,onClick:Z,className:"flex text-gray-300  bg-gray-800 hover:bg-gray-700 rounded-sm font-bold p-3 pr-3.5 py-2.5 w-fit  text-sm",children:[N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-5 mr-2",children:[N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"})]}),"Edit labels "]}),N.jsxs("button",{className:"flex text-gray-300 bg-gray-800  hover:bg-gray-700 rounded-sm font-bold p-3 pr-3.5  w-fit py-2.5  text-sm",children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-5 mr-2",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})}),"Change members"]}),N.jsxs("button",{className:"flex text-gray-300  bg-gray-800  hover:bg-gray-700  font-bold rounded-sm p-3 pr-3.5  w-fit py-2.5  text-sm",children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-5 mr-2",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15 11.25 1.5 1.5.75-.75V8.758l2.276-.61a3 3 0 1 0-3.675-3.675l-.61 2.277H12l-.75.75 1.5 1.5M15 11.25l-8.47 8.47c-.34.34-.8.53-1.28.53s-.94.19-1.28.53l-.97.97-.75-.75.97-.97c.34-.34.53-.8.53-1.28s.19-.94.53-1.28L12.75 9M15 11.25 12.75 9"})}),"Change cover"]}),N.jsxs("button",{className:"flex text-gray-300  bg-gray-800  hover:bg-gray-700  font-bold rounded-sm p-3 pr-3.5  w-fit py-2.5  text-sm",children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-5 mr-2",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),"Change dates"]}),N.jsxs("button",{className:"flex text-gray-300  bg-gray-800  hover:bg-gray-700  font-bold rounded-sm p-3 pr-3.5  w-fit py-2.5  text-sm",children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-5 mr-2",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})}),"Move"]}),N.jsxs("button",{className:"flex text-gray-300  bg-gray-800  hover:bg-gray-700 font-bold  rounded-sm p-3 pr-3.5  w-fit py-2.5  text-sm",children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-5 mr-2",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})}),"Copy"]}),N.jsxs("button",{className:"flex text-gray-300  bg-gray-800  hover:bg-gray-700 font-bold  rounded-sm p-3 pr-3.5  w-fit py-2.5  text-sm",children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-5 mr-2",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})}),"Archive"]}),N.jsxs("button",{onClick:he,className:"flex text-gray-300  bg-gray-800  hover:bg-gray-700 font-bold  rounded-sm p-3 pr-3.5  w-fit py-2.5  text-sm",children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-5 mr-2",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete"]})]}),h&&N.jsx("div",{children:N.jsx("textarea",{ref:D,className:"z-[10000] relative w-[265px] cardinput pb-5 pt-2 h-20 text-start px-2.5 rounded-md  border-solid border-slate-400 border-0 focus:outline-none bg-gray-800 text-slate-300 resize-none overflow-hidden",onChange:de,rows:"1",value:A,onInput:q=>{q.target.style.height="auto",q.target.style.height=`${q.target.scrollHeight+15}px`}})}),N.jsxs("div",{ref:J,style:Q,...B,...O,onContextMenu:H,className:"CARD  touch-action: none; flex flex-col cursor-pointer focus:border-solid focus:border-blue-500 focus:box-shadow focus:outline-none bg-gray-800 text-gray-300 text-md p-1 px-2.5 rounded-md w-full mx-0 my-1.5",children:[N.jsxs("div",{className:"flex flex-wrap gap-2",children:[w.label1&&N.jsx("span",{className:"relative bg-green-600 w-11 rounded-2xl h-[.5rem] -ml-0.5 mb-0.5 -mt-1.5"}),w.label2&&N.jsx("span",{className:"relative bg-yellow-800 w-11 rounded-2xl h-[.5rem] -ml-0.5 mb-0.5 -mt-1.5"}),w.label3&&N.jsx("span",{className:"relative bg-amber-600  w-11 rounded-2xl h-[.5rem] -ml-0.5 mb-0.5 -mt-1.5"}),w.label4&&N.jsx("span",{className:"relative bg-red-700 opacity-90 w-11 rounded-2xl h-[.5rem] -ml-0.5 mb-0.5 -mt-1.5"}),w.label5&&N.jsx("span",{className:" relative bg-indigo-700 w-11 rounded-2xl h-[.5rem] -ml-0.5 mb-0.5 -mt-1.5"}),w.label6&&N.jsx("span",{className:" relative bg-blue-800 w-11 rounded-2xl h-[.5rem] -ml-0.5 mb-0.5 -mt-1.5"}),w.label7&&N.jsx("span",{className:" relative bg-pink-800 w-11 rounded-2xl h-[.5rem] -ml-0.5 mb-0.5 -mt-1.5"}),w.label8&&N.jsx("span",{className:" relative bg-neutral-400 opacity-90 w-11 rounded-2xl h-[.5rem] -ml-0.5 mb-0.5 -mt-1.5"})]}),A||"..."]})]})}const WO=M.forwardRef(({item:t,Dragging:e,title:n,id:r,BoardId:i},s)=>{const[o,a]=M.useState(!1),l=M.useRef(null),[u,c]=M.useState(""),[f,p]=M.useState([]),{menuOpen:h}=KE(),{attributes:g,listeners:m,setNodeRef:v,transform:w,transition:x,isDragging:E}=KC({id:t.id,disabled:h}),k=O=>{const K=O.touches[0],U=O.target;U.offsetWidth>0&&K.clientX>=U.clientWidth&&O.stopPropagation()},S=O=>{const K=O.target;K.offsetWidth>0&&O.clientX>=K.clientWidth&&O.stopPropagation()},R=O=>{O.preventDefault()},T=async()=>{const O=kt.currentUser;if(O)try{c("");const K=new Date().getTime().toString(),U=Ut(Ze,`users/${O.uid}/Boards/${i}/Lists/${r}/cards`,K),F={label1:!1,label2:!1,label3:!1,label4:!1,label5:!1,label6:!1,label7:!1,label8:!1},z={id:K,title:u,labels:F};p(Q=>[...Q,z]),await Ll(U,{id:K,title:u,labels:F,order:f.length}),console.log("Card added successfully")}catch(K){console.error("Error adding card to Firestore: ",K)}else console.error("User is not authenticated")};M.useEffect(()=>{const O=dl(kt,K=>{K?(async()=>{const F=Ml(Ze,`users/${K.uid}/Boards/${i}/Lists/${r}/cards`),Q=(await Vl(F)).docs.map(J=>({id:J.id,title:J.data().title,labels:J.data().labels,order:J.data().order})).sort((J,H)=>J.order-H.order);p(Q)})().catch(F=>console.error("Error fetching cards:",F)):p([])});return()=>O()},[r]),M.useEffect(()=>{if(!o)return;const O=K=>{l.current&&!l.current.contains(K.target)&&I()};return document.addEventListener("click",O),()=>{document.removeEventListener("click",O)}},[o]);const y=O=>{O.stopPropagation(),a(!0)},I=()=>{a(!1)},C=async O=>{const{active:K,over:U}=O;if(K.id!==(U==null?void 0:U.id)){const F=kt.currentUser;if(F){const z=f.findIndex(J=>J.id===K.id),Q=f.findIndex(J=>J.id===U.id);if(z!==-1&&Q!==-1){const J=th(f,z,Q);try{p(J);const H=J.map((X,he)=>ts(Ut(Ze,`users/${F.uid}/Boards/${i}/Lists/${r}/cards`,X.id),{order:he,title:X.title,labels:X.labels}));await Promise.all(H)}catch(H){console.error("Error updating cards:",H)}}}else console.error("User is not authenticated")}},[A,b]=M.useState(window.innerWidth<=650);M.useEffect(()=>{const O=()=>{b(window.innerWidth<=650)};return window.addEventListener("resize",O),()=>{window.removeEventListener("resize",O)}},[]);const D={transform:w?`translate3d(${w.x}px, 0, 20px) rotate(${E?-2:0}deg)`:void 0,transition:x,backgroundColor:E?"rgba(0, 0, 0, 0.8)":"",cursor:E?"grabbing":"pointer",zIndex:E?10:"auto"},B=TC(ad(lv),ad(uv));return N.jsxs("div",{style:D,className:`bg-black ListCssCustom p-4 px-3 pt-2.5 shadow-xl  rounded-xl h-fit ${e&&!E?"swing":""} ${!e||!E?"snap-start":""}  ${E?"dragList":""}`,children:[N.jsxs("div",{ref:v,...g,...m,onContextMenu:R,children:[N.jsxs("div",{className:"flex overflow-x-hidden justify-between items-start",children:[N.jsx("h3",{className:"focus:border-solid focus:border-blue-500 focus:box-shadow focus:outline-none text-slate-300 px-1 text-lg mt-1.5 w-full mr-2",children:n}),N.jsx("button",{onClick:()=>deleteList(r),className:"text-slate-300 text-xl",children:"..."})]}),N.jsx("div",{onTouchStart:k,onMouseDown:S,className:" flex  pr-1.5 flex-col justify-start kkkk my-3 items-center",children:N.jsx(jC,{sensors:B,collisionDetection:SC,onDragEnd:C,children:N.jsx(WC,{items:f,strategy:UC,children:f.map(O=>N.jsx($O,{BoardId:i,listid:r,title:O.title,id:O.id,labels:O.labels,item:O},O.id))})})})]}),N.jsxs("div",{children:[!o&&N.jsx("button",{onClick:y,className:"text-slate-300 text-opacity-95 hover:opacity-100 hover:bg-zinc-800 hover:bg-opacity-90 hover:shadow-xl w-full text-start px-1.5 py-1  rounded-md",children:"+ Add a card"}),o&&N.jsxs("div",{className:"mt-1",ref:l,children:[N.jsx("textarea",{placeholder:"Enter card title...",className:"pb-5 pt-1 h-16 text-start px-2.5 rounded-md w-full border-solid border-slate-400 border-0 focus:outline-none bg-gray-800 text-slate-300 resize-none overflow-hidden",onChange:O=>c(O.target.value),value:u,rows:"1",onInput:O=>{O.target.style.height="auto",O.target.style.height=`${O.target.scrollHeight+15}px`},onClick:O=>O.stopPropagation()}),N.jsxs("div",{className:"mt-3 flex justify-start gap-1.5",children:[N.jsx("button",{onClick:T,className:"bg-blue-500 hover:bg-blue-600 text-gray-900 py-1 px-2 rounded-md text-m",children:"Add Card"}),N.jsx("button",{onClick:()=>a(!1),className:"text-slate-300 py-1 px-2  rounded-md text-md hover:bg-gray-800",children:"✕"})]})]})]})]})});function HO({BoardMember:t,visibility:e,id:n,Board:r}){const[i,s]=M.useState(t),[o,a]=M.useState(""),l=async()=>{try{if(!o){console.error("Email is required.");return}const u=Ml(Ze,"users"),c=await Vl(u);let f=null;if(c.forEach(p=>{const h=p.data();h.email===o&&(f={id:p.id,...h},console.log("User found: ",f))}),!f)console.log("No user found with that email.");else{s([...i,f]);try{await ts(Ut(Ze,`users/${i[0].id}/Boards/${n}`),{sharedWith:[...i,f]});const p=Ut(Ze,`users/${f.id}/Boards`,n);await Ll(p,r)}catch(p){console.error("Error updating card title: ",p)}}}catch(u){console.error("Error fetching users: ",u)}};return N.jsxs("div",{className:"bg-zinc-800 flex flex-col absolute  sm:top-24 top-[5.55em]   right-3  h-fit w-fit py-3 rounded-lg px-3.5 justify-start",children:[e==="private"&&N.jsx("div",{className:"w-[100%]  top-[-.2%]  p-1 right-[.1px]  h-[100%] absolute rounded-lg bg-zinc-950 bg-opacity-90 flex justify-center items-center",children:N.jsxs("div",{className:"flex flex-col",children:[N.jsx("h1",{className:"text-gray-300 text-center text-lg",children:"This Board is private."}),N.jsx("p",{className:"text-gray-300 text-center text-sm",children:"To share it with others,switch it to shareable mode."})]})}),N.jsx("h1",{className:"text-gray-300 text-lg",children:"Share Board"}),N.jsx("div",{children:N.jsxs("div",{className:"flex gap-2.5 mt-4",children:[N.jsx("input",{onChange:u=>{a(u.target.value)},value:o,type:"email",required:!0,placeholder:"Enter Email address",className:"text:xl p-1.5 px-2.5 pr-12 h-fit rounded-md  border-solid border-slate-400 focus:border-solid focus:border-blue-500 focus:box-shadow border-2  focus:outline-none bg-gray-800 text-sm text-slate-300"}),N.jsx("button",{onClick:l,type:"submit",className:" text-zinc-800 bg-blue-500 hover:bg-blue-600 h-fit p-1.5 px-2 rounded-md",children:"Share"})]})}),N.jsxs("div",{className:"mt-7",children:[N.jsxs("h3",{className:"text-gray-300 text-[.9rem]",children:["Board members ",N.jsx("span",{className:" rounded-[50%] w-fit h-fit  p-.5 px-1 bg-slate-600 text-gray-300",children:i.length})]}),N.jsx("hr",{className:"w-full h-px mt-1  bg-gray-200 border-0 dark:bg-gray-500 opacity-90"})]}),N.jsx("div",{children:i.map((u,c)=>N.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[N.jsx("div",{children:N.jsx("div",{className:" pointer-events-none select-none",style:{backgroundColor:u.avatar.color,color:"#fff",width:"36px",height:"36px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"18px",border:"1.5px solid #555"},children:u.avatar.initials})}),N.jsxs("div",{children:[N.jsxs("h1",{className:"text-gray-300 text-opacity-95",children:[u.name," ",c===0?"(you)":""," "]}),N.jsxs("p",{className:"text-gray-300 text-sm -mt-1 text-opacity-85",children:["@",u.email," "]})]})]},u.id))})]})}function KO(){const t=M.useRef(null),e=M.useRef(null),[n,r]=M.useState(!1),i=M.useRef(null),[s,o]=M.useState(!1),a=M.useRef([]),[l,u]=M.useState(!1),[c,f]=M.useState(""),[p,h]=M.useState([]),m=Po().state,[v,w]=M.useState(m),[x,E]=M.useState(m.boardVisibility),[k,S]=M.useState(m.sharedWith),R=()=>{o(!s)},[T,y]=M.useState(!1),I=M.useRef(null),C=H=>{I.current&&!I.current.contains(H.target)&&y(!1)};M.useEffect(()=>(document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}),[]),M.useEffect(()=>{const H=dl(kt,X=>{X?(async()=>{try{const de=Ut(Ze,`users/${X.uid}/Boards/${m.id}`),Z=await LS(de);if(Z.exists()){const q={id:Z.id,data:Z.data()};w(q),E(q.data.boardVisibility),S(q.data.sharedWith)}else console.log("No such board!"),w({})}catch(de){console.error("Error fetching board:",de)}})():w({})});return()=>H()},[]);const A=H=>{e.current&&!e.current.contains(H.target)&&o(!1)},b=async()=>{if(x==="shareable"){E("private");const H=kt.currentUser;if(H)try{await ts(Ut(Ze,`users/${H.uid}/Boards/${m.id}`),{boardVisibility:"private"})}catch(X){console.log("Error updating document: ",X)}}else console.error("Use.")},D=async()=>{if(x==="private"){E("shareable");const H=kt.currentUser;if(H)try{await ts(Ut(Ze,`users/${H.uid}/Boards/${m.id}`),{boardVisibility:"shareable"})}catch(X){console.log("Error updating document: ",X)}}else console.error("User is not authenticated.")};M.useEffect(()=>(document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}),[]);const B=m.background===""?{backgroundImage:`url('${m.backgroundImage}')`,backgroundSize:"cover",backgroundPosition:"center",height:"auto",width:"100%",color:"rgba(255,255,255,0)"}:{},O=H=>{u(!1),H.stopPropagation(),r(!0)},K=()=>{r(!1)};M.useEffect(()=>{const H=dl(kt,X=>{X?(async()=>{const de=Ml(Ze,`users/${X.uid}/Boards/${m.id}/Lists`),q=(await Vl(de)).docs.map(te=>({id:te.id,title:te.data().title,order:te.data().order})).sort((te,xe)=>te.order-xe.order);h(q)})().catch(de=>console.error("Error fetching lists:",de)):h([])});return()=>H()},[]),M.useEffect(()=>{if(n)return document.addEventListener("click",F),()=>{document.removeEventListener("click",F)}},[n]);const U=async()=>{const H=kt.currentUser;if(H){K();try{const X=new Date().getTime().toString(),he=Ut(Ze,`users/${H.uid}/Boards/${m.id}/Lists`,X),de={id:X,title:c};if(h(q=>{const te=[...q,de];return Ll(he,{title:c,id:X,order:te.length-1}),te}),console.log("List added successfully"),window.innerWidth<=650&&a.current.length>0){const q=a.current[a.current.length-1];q&&q.scrollIntoView({behavior:"smooth",block:"start"})}}catch(X){console.error("Error adding to Firestore: ",X)}}else console.error("User is not authenticated")},F=H=>{i.current&&!i.current.contains(H.target)&&(console.log("Click was outside, closing input"),K())},z=()=>{u(!0)},Q=async H=>{const{active:X,over:he}=H;if(u(!1),X.id!==(he==null?void 0:he.id)){const de=kt.currentUser;if(de){const Z=p.findIndex(te=>te.id===X.id),q=p.findIndex(te=>te.id===he.id);if(Z!==-1&&q!==-1){const te=th(p,Z,q);try{h(te);const xe=te.map((ie,Ie)=>ts(Ut(Ze,`users/${de.uid}/Boards/${m.id}/Lists`,ie.id),{order:Ie,title:ie.title}));await Promise.all(xe)}catch(xe){console.error("Error updating cards:",xe)}}}else console.error("User is not authenticated")}},J=TC(ad(lv),ad(uv));return N.jsxs("div",{style:B,className:`  h-screen flex flex-col max-h-screen  overflow-x-auto z-0 ${m.background} `,children:[N.jsx("nav",{className:"bg-gray-400 bg-opacity-55  sm:bg-opacity-50  py-2.5 pl-0.5 pl-3.5 pr-2 sm:pr-5 text-md fixed w-screen items-center top-11",children:N.jsxs("div",{className:"flex justify-between  ",children:[N.jsxs("div",{className:"flex gap-5",children:[N.jsx("p",{className:"text-white font-bold text-md sm:text-xl cursor-pointer",children:m.title}),N.jsxs("div",{className:"relative inline-block text-left",ref:e,children:[N.jsxs("button",{onClick:R,className:"sm:text-lg text-slate-100 text-md px-1.5 flex gap-1  hover:text-gray-900 rounded-md hover:bg-slate-100 items-center",children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})}),"Workspace visible"]}),s&&N.jsx("div",{className:" absolute left-[-10%] top-9  mt-1.5 z-[1000000000] w-72 rounded-2xl  bg-zinc-800   ring-black ring-opacity-5 focus:outline-none",children:N.jsxs("div",{className:"py-1",children:[N.jsxs("button",{onClick:b,style:{borderColor:x==="private"?"lightblue":""},className:"block w-full border-2 border-zinc-800 rounded-2xl text-left px-4 py-2 text-sm bg-zinc-800 text-gray-300 hover:bg-zinc-700",children:[N.jsx("span",{className:"text-[1.1rem] text-gray-200",children:"Private Board"})," - A personal board where all tasks and data are private and only visible to you."]}),N.jsxs("button",{onClick:D,style:{borderColor:x==="shareable"?"lightblue":""},className:"block border-2 border-zinc-800 w-full text-left px-4 rounded-2xl py-2 text-sm bg-zinc-800 text-gray-300 hover:bg-zinc-700",children:[N.jsx("span",{className:"text-[1.1rem] text-gray-200",children:"Shareable Board"})," - A collaborative board that allows you to share tasks with others for group work."]})]})})]})]}),N.jsxs("div",{onClick:()=>{y(!T)},className:"  bg-slate-100 text-zinc-950 flex items-center gap-1 px-1.5 rounded-md  hover:bg-slate-200  cursor-pointer",children:["  ",N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.4",stroke:"currentColor",className:"w-5 h-5",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"})}),"Share"]})]})}),T&&N.jsx("div",{ref:I,children:N.jsx(HO,{visibility:x,id:m.id,Board:v,BoardMember:k})}),N.jsxs("div",{ref:t,className:`ml-6 sm:pl-6 md:ml-0 overflow-x-auto BOARDS  overflow-y-hidden  h-screen over px-3   sm:gap-10 sm:mt-32 flex gap-16 mt-32  ${l?" ":"BordContainer"}`,children:[N.jsx(jC,{onDragStart:z,sensors:J,collisionDetection:SC,onDragEnd:Q,children:N.jsx(WC,{items:p,strategy:UC,children:p.map((H,X)=>N.jsx(WO,{BoardId:m.id,item:H,id:H.id,Dragging:l,ref:he=>a.current[X]=he,title:H.title},H.id))})}),!n&&N.jsx("button",{onClick:O,className:"btn p-4 text-md   py-2.5 rounded-lg bg-zinc-800 bg-opacity-50 text-left text-zinc-50 self-start mt-1",children:"+ Add another list"}),n&&N.jsx("div",{className:"bg-black mr-10  btn p-5 px-3 pt-3 rounded-xl h-fit",children:N.jsxs("div",{className:"mt-1",children:[N.jsx("input",{onChange:H=>{f(H.target.value)},type:"text",placeholder:"Enter List name...",className:"text:xl p-1.5 px-2.5 rounded-md w-full border-solid border-slate-400 focus:border-solid focus:border-blue-500 focus:box-shadow border-2  focus:outline-none bg-gray-800 text-sm text-slate-300"}),N.jsxs("div",{className:"mt-3 flex justify-start gap-1.5",children:[N.jsx("button",{onClick:U,className:"bg-blue-500 hover:bg-blue-600 text-gray-900  py-1 px-2 rounded-md  text-m",children:"Add List"}),N.jsx("button",{onClick:K,className:" justify-self-end  text-slate-300  py-1 px-2  rounded-md  text-md hover:bg-gray-800",children:"✕"})]})]})})]})]})}var cc={},GC,qC;Object.defineProperty(cc,"__esModule",{value:!0});var pa=N,Kn=M,bn=function(){return bn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},bn.apply(this,arguments)};function GO(t,e){var n,r;switch(e.type){case"TYPE":return bn(bn({},t),{speed:e.speed,text:(n=e.payload)===null||n===void 0?void 0:n.substring(0,t.text.length+1)});case"DELAY":return bn(bn({},t),{speed:e.payload});case"DELETE":return bn(bn({},t),{speed:e.speed,text:(r=e.payload)===null||r===void 0?void 0:r.substring(0,t.text.length-1)});case"COUNT":return bn(bn({},t),{count:t.count+1});default:return t}}var fx=function(t){var e=t.words,n=e===void 0?["Hello World!","This is","a simple Typewriter"]:e,r=t.loop,i=r===void 0?1:r,s=t.typeSpeed,o=s===void 0?80:s,a=t.deleteSpeed,l=a===void 0?50:a,u=t.delaySpeed,c=u===void 0?1500:u,f=t.onLoopDone,p=t.onType,h=t.onDelete,g=t.onDelay,m=Kn.useReducer(GO,{speed:o,text:"",count:0}),v=m[0],w=v.speed,x=v.text,E=v.count,k=m[1],S=Kn.useRef(0),R=Kn.useRef(!1),T=Kn.useRef(!1),y=Kn.useRef(!1),I=Kn.useRef(!1),C=Kn.useCallback(function(){var A=E%n.length,b=n[A];T.current?(k({type:"DELETE",payload:b,speed:l}),x===""&&(T.current=!1,k({type:"COUNT"}))):(k({type:"TYPE",payload:b,speed:o}),y.current=!0,x===b&&(k({type:"DELAY",payload:c}),y.current=!1,I.current=!0,setTimeout(function(){I.current=!1,T.current=!0},c),i>0&&(S.current+=1,S.current/n.length===i&&(I.current=!1,R.current=!0)))),y.current&&p&&p(S.current),T.current&&h&&h(),I.current&&g&&g()},[E,c,l,i,o,n,x,p,h,g]);return Kn.useEffect(function(){var A=setTimeout(C,w);return R.current&&clearTimeout(A),function(){return clearTimeout(A)}},[C,w]),Kn.useEffect(function(){f&&R.current&&f()},[f]),[x,{isType:y.current,isDelay:I.current,isDelete:T.current,isDone:R.current}]},qO="styles-module_blinkingCursor__yugAC",QO="styles-module_blinking__9VXRT";(function(t,e){e===void 0&&(e={});var n=e.insertAt;if(typeof document<"u"){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}})(".styles-module_blinkingCursor__yugAC{color:inherit;font:inherit;left:3px;line-height:inherit;opacity:1;position:relative;top:0}.styles-module_blinking__9VXRT{animation-duration:.8s;animation-iteration-count:infinite;animation-name:styles-module_blink__rqfaf}@keyframes styles-module_blink__rqfaf{0%{opacity:1}to{opacity:0}}");var px=Kn.memo(function(t){var e=t.cursorBlinking,n=e===void 0||e,r=t.cursorStyle,i=r===void 0?"|":r,s=t.cursorColor,o=s===void 0?"inherit":s;return pa.jsx("span",bn({style:{color:o},className:"".concat(qO," ").concat(n?QO:"")},{children:i}))});qC=cc.Cursor=px,cc.Typewriter=function(t){var e=t.words,n=e===void 0?["Hello World!","This is","a simple Typewriter"]:e,r=t.loop,i=r===void 0?1:r,s=t.typeSpeed,o=s===void 0?80:s,a=t.deleteSpeed,l=a===void 0?50:a,u=t.delaySpeed,c=u===void 0?1500:u,f=t.cursor,p=f!==void 0&&f,h=t.cursorStyle,g=h===void 0?"|":h,m=t.cursorColor,v=m===void 0?"inherit":m,w=t.cursorBlinking,x=w===void 0||w,E=t.onLoopDone,k=t.onType,S=t.onDelay,R=t.onDelete,T=fx({words:n,loop:i,typeSpeed:o,deleteSpeed:l,delaySpeed:c,onLoopDone:E,onType:k,onDelay:S,onDelete:R})[0];return pa.jsxs(pa.Fragment,{children:[pa.jsx("span",{children:T}),p&&pa.jsx(px,{cursorStyle:g,cursorColor:v,cursorBlinking:x})]})},GC=cc.useTypewriter=fx;function QC(){const t=["/alone-lonely-loneliness-dream-planet-robot-butterflies-3840x2160-6347.jpg","/alone-surreal-dream-fishes-moon-travel-explorer-3840x2160-1058.jpg","/astronaut-asteroids-blue-planet-space-travel-no-gravity-3840x2160-2484.jpg","/astronaut-nasa-flower-garden-butterflies-surreal-moon-3840x2160-3197.jpg","/astronaut-space-cosmos-planet-rings-of-saturn-orbit-surreal-3840x2160-6739.jpg","/astronaut-space-station-laptop-sci-fi-space-suit-lights-3840x2160-2478.jpg","/astronaut-space-travel-gravity-earth-nebula-universe-galaxy-3840x2160-2352.jpg","/balancing-rocks-3840x2160-16599.jpg","/couple-lovers-above-clouds-surreal-dream-romantic-together-3840x2160-6250.jpg","/cozy-cabin-sunset-3840x2160-14443.jpg","/dolomites-mountains-milky-way-night-starry-sky-dolomite-7000x3937-8361.jpg","/earth-clouds-surreal-star-trek-digital-composition-3840x2160-6075.jpg","/full-moon-landscape-3840x2160-13385.jpg","/gta-6-teaser-3840x2160-13559.png","/hot-air-balloon-night-full-moon-dark-background-sea-stars-3840x2160-2409.jpg","/lakeside-sunset-deer-minimal-art-landscape-scenic-panorama-3840x2160-4592.png","/lighthouse-sunset-dusk-twilight-seascape-scenic-ocean-5k-3840x2160-451.jpg","/moon-night-seascape-sailing-boat-blue-minimal-5k-8k-3840x2160-4522.jpg","/night-man-alone-starry-sky-night-sky-comet-silhouette-3840x2160-8325.jpg","/sun-valley-purple-sky-cracked-daytime-surreal-scenery-5k-3840x2160-3280.jpg"],e=Cl(),[n,r]=M.useState(!1),[i,s]=M.useState(""),[o,a]=M.useState(""),[l,u]=M.useState(""),c=M.useRef(null),[f,p]=M.useState("Board Visibility"),h=()=>{r(!n)},g=S=>{c.current&&!c.current.contains(S.target)&&r(!1)};M.useEffect(()=>(document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}),[]);const m=n?{borderColor:"lightblue"}:{},v=S=>{x==="Make sure you fill the board title"&&E(""),u(S.target.value)},w=i===""?{backgroundImage:`url('${o}')`,backgroundSize:"cover",backgroundPosition:"center",color:"rgba(255,255,255,0)"}:{},[x,E]=M.useState(""),k=async()=>{if(l==="")E("Make sure you fill the board title");else if(i===""&&o==="")E("Make sure you choose a background or images");else if(f==="Board Visibility")E("Make sure you choose a visibility option");else{const S=kt.currentUser;if(S)try{const R=Ut(Ze,`users/${S.uid}`),T=await LS(R);let y="",I={};if(T.exists()){const B=T.data();y=B.name,I=B.avatar}const C=new Date().getTime().toString(),A=Ut(Ze,`users/${S.uid}/Boards`,C),D={id:C,title:l,background:i,backgroundImage:o,boardVisibility:f==="Shareable Board"?"shareable":"private",sharedWith:[{id:S.uid,email:S.email,name:y,avatar:I}]};await Ll(A,D),e(`/Board/${C}`,{state:D})}catch(R){console.log(R)}else alert("Please Sign In First")}};return N.jsxs("div",{className:"flex  mt-10 items-center z-10  w-screen h-screen px-7  flex-col",children:[N.jsx("img",{draggable:!1,style:w,src:"https://trello.com/assets/14cda5dc635d1f13bc48.svg",className:`w-[60%] p-1 px-2 max-w-[210px] mb-6 mt-[-70px]  select-none sm:mt-[-50px] ${i}`}),N.jsxs("div",{className:"flex w-[100%] max-w-[470px] justify-between items-center ",children:[N.jsxs("div",{className:"main",children:[N.jsx("input",{onChange:S=>{v(S)},type:"text",className:"input "}),N.jsxs("label",{children:[N.jsx("span",{style:{transitionDelay:"0ms",left:"0px"},children:"B"}),N.jsx("span",{style:{transitionDelay:"75ms",left:"15px"},children:"o"}),N.jsx("span",{style:{transitionDelay:"150ms",left:"30px"},children:"a"}),N.jsx("span",{style:{transitionDelay:"225ms",left:"44px"},children:"r"}),N.jsx("span",{style:{transitionDelay:"300ms",left:"53px"},children:"d"}),N.jsx("span",{style:{transitionDelay:"375ms",left:"80px"},children:"T"}),N.jsx("span",{style:{transitionDelay:"450ms",left:"94px"},children:"i"}),N.jsx("span",{style:{transitionDelay:"525ms",left:"101px"},children:"t"}),N.jsx("span",{style:{transitionDelay:"600ms",left:"111px"},children:"l"}),N.jsx("span",{style:{transitionDelay:"675ms",left:"118px"},children:"e"}),N.jsx("p",{className:" absolute left-[18px] top-[4px] text-2xl m-2 text-gray-300 transition duration-500 cursor-pointer pointer-events-none",children:"Board Title"})]})]}),N.jsx("div",{children:N.jsxs("div",{className:"relative inline-block text-left text-slate-300",ref:c,children:[N.jsx("button",{onClick:h,className:"button2  ${boardVisibility==='Board Visibility",style:m,children:f}),n&&N.jsx("div",{className:"origin-top-right absolute right-[-10%] sm:right-[-15%]  mt-2 z-[1000] w-72 rounded-2xl shadow-lg bg-zinc-800  ring-1 ring-black ring-opacity-5 focus:outline-none",children:N.jsxs("div",{className:"py-1",children:[N.jsxs("button",{style:{borderColor:f==="Private Board"?"lightblue":""},onClick:()=>{p("Private Board")},className:"block w-full border-2 border-zinc-800 text-left px-4 py-2 text-sm bg-zinc-800 text-gray-300 hover:bg-zinc-700",children:[N.jsx("span",{className:"text-[1.1rem] text-gray-200",children:"Private Board"})," - A personal board where all tasks and data are private and only visible to you."]}),N.jsxs("button",{style:{borderColor:f==="Shareable Board"?"lightblue":""},onClick:()=>{p("Shareable Board")},className:"block border-2 border-zinc-800 w-full text-left px-4 py-2 text-sm bg-zinc-800 text-gray-300 hover:bg-zinc-700",children:[N.jsx("span",{className:"text-[1.1rem] text-gray-200",children:"Shareable Board"})," - A collaborative board that allows you to share tasks with others for group work."]})]})})]})})]}),N.jsxs("div",{className:" self-center ",children:[N.jsx("h1",{className:"text-xl mt-4 mb-1 opacity-90 text-gray-300  text-center",children:"Background"}),N.jsx("div",{className:"color max-h-[150px] mb-4 rounded-md px-3 overflow-y-auto container bg-neutral-800",children:N.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-2  mt-2 md:grid-cols-3 p-1  lg:grid-cols-4 gap-5",children:[N.jsx("div",{onClick:()=>{s("bg-gradient-to-r from-teal-400 to-blue-500"),x==="Make sure you choose a background and images"&&E("")},className:"cursor-pointer bg-gradient-to-r from-teal-400 to-blue-500 py-7  rounded-sm"}),N.jsx("div",{onClick:()=>{s("bg-gradient-to-r from-blue-800 to-blue-400"),x==="Make sure you choose a background and images"&&E("")},className:"bg-gradient-to-r cursor-pointer from-blue-800 to-blue-400 py-7 rounded-sm"}),N.jsx("div",{onClick:()=>{s("bg-gradient-to-r from-purple-500 to-pink-500"),x==="Make sure you choose a background and images"&&E("")},className:"bg-gradient-to-r from-purple-500 to-pink-500 py-7 cursor-pointer rounded-sm"}),N.jsx("div",{onClick:()=>{s("bg-gradient-to-r from-purple-400 to-blue-300"),x==="Make sure you choose a background and images"&&E("")},className:"bg-gradient-to-r from-purple-400 to-blue-300 py-7 cursor-pointer rounded-sm"}),N.jsx("div",{onClick:()=>{s("bg-gradient-to-r from-orange-400 to-yellow-300"),x==="Make sure you choose a background and images"&&E("")},className:"bg-gradient-to-r from-orange-400 to-yellow-300 py-7 cursor-pointer rounded-sm"}),N.jsx("div",{onClick:()=>{s("bg-gradient-to-r from-pink-400 to-pink-200"),x==="Make sure you choose a background and images"&&E("")},className:"bg-gradient-to-r from-pink-400 to-pink-200 py-7 cursor-pointer rounded-sm"}),N.jsx("div",{onClick:()=>{s("bg-gradient-to-r from-teal-400 to-green-500"),x==="Make sure you choose a background and images"&&E("")},className:"bg-gradient-to-r from-teal-400 to-green-500 py-7 cursor-pointer rounded-sm"}),N.jsx("div",{onClick:()=>{s("bg-gradient-to-r from-blue-800 to-blue-400"),x==="Make sure you choose a background and images"&&E("")},className:"bg-gradient-to-r from-blue-800 to-blue-400 py-7 cursor-pointer rounded-sm"}),N.jsx("div",{onClick:()=>{s("bg-gradient-to-r from-red-800 to-brown-500"),x==="Make sure you choose a background and images"&&E("")},className:"bg-gradient-to-r from-red-800 to-brown-500 py-7 cursor-pointer rounded-sm"}),N.jsx("div",{onClick:()=>{s("bg-blue-500"),x==="Make sure you choose a background and images"&&E("")},className:"bg-blue-500 py-7 cursor-pointer rounded-sm"}),N.jsx("div",{onClick:()=>{s("bg-orange-500"),x==="Make sure you choose a background and images"&&E("")},className:"bg-orange-500 py-7 cursor-pointer rounded-sm"}),N.jsx("div",{onClick:()=>{s("bg-green-50"),x==="Make sure you choose a background and images"&&E("")},className:"bg-green-500 py-7 cursor-pointer rounded-sm"}),N.jsx("div",{onClick:()=>{s("bg-red-500"),x==="Make sure you choose a background and images"&&E("")},className:"bg-red-500 py-7 cursor-pointer rounded-sm"}),N.jsx("div",{onClick:()=>{s("bg-purple-500"),x==="Make sure you choose a background and images"&&E("")},className:"bg-purple-500 py-7 cursor-pointer rounded-sm"}),N.jsx("div",{onClick:()=>{s("bg-pink-500"),x==="Make sure you choose a background and images"&&E("")},className:"bg-pink-500 py-7 cursor-pointer rounded-sm",children:"   "}),N.jsx("div",{onClick:()=>{s("bg-green-300"),x==="Make sure you choose a background and images"&&E("")},className:"bg-green-300 py-7 cursor-pointer rounded-sm"}),N.jsx("div",{onClick:()=>{s("bg-cyan-500"),x==="Make sure you choose a background and images"&&E("")},className:"bg-cyan-500 py-7 cursor-pointer rounded-sm"}),N.jsx("div",{onClick:()=>{s("bg-gray-500"),x==="Make sure you choose a background and images"&&E("")},className:"bg-gray-500 py-7 cursor-pointer rounded-sm"})]})}),N.jsx("div",{className:"color max-h-[150px] sm:max-h-[165px]  rounded-md px-3 overflow-y-auto container bg-neutral-800",children:N.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-2  mt-2 md:grid-cols-3 p-1  lg:grid-cols-4 gap-5",children:t.map(S=>N.jsx("div",{style:{backgroundImage:`url('${S}')`,backgroundSize:"cover",backgroundPosition:"center",color:"rgba(255,255,255,0)"},onClick:()=>{s(""),a(S),x==="Make sure you choose a background and images"&&E("")},className:"border-gray-100 cursor-pointer text-opacity-0  bg-black p-4 sm:p-5 select-none  rounded-sm",children:"Board 1"},S))})}),N.jsx("div",{className:"flex items-center   justify-center",children:N.jsx("button",{onClick:k,type:"submit",className:"bg-blue-600 hover:bg-blue-500 text-gray-100  mb-3 py-1.5 px-20 mt-8 rounded-lg  text-md",children:"Create"})}),N.jsx("div",{className:"text-red-600 text-sm text-center",children:x})]})]})}function YC(t){const e=Cl(),[n,r]=M.useState(!1),i=M.useRef();M.useEffect(()=>{const a=new IntersectionObserver(([l])=>{l.isIntersecting&&(r(!0),a.disconnect())},{threshold:.1});return i.current&&a.observe(i.current),()=>{i.current&&a.unobserve(i.current)}},[i]);const s=n&&t.backgroundImage?{backgroundImage:`url('${t.backgroundImage}')`,backgroundSize:"cover",backgroundPosition:"center",color:"rgba(255,255,255,0)"}:{},o=()=>{e(`/Board/${t.id}`,{state:t})};return N.jsx("div",{ref:i,style:s,onClick:o,className:`p-5 min-w-[130px] hover:opacity-85 cursor-pointer rounded-sm ${t.background}`,children:N.jsx("h2",{className:"text-zinc-50 text-lg truncate whitespace-nowrap overflow-hidden",children:t.title})})}function YO(){const[t,e]=M.useState([]);M.useEffect(()=>{const i=dl(kt,s=>{s?(async()=>{const a=Ml(Ze,`users/${s.uid}/Boards`),u=(await Vl(a)).docs.map(c=>({id:c.id,data:c.data()})).filter(c=>c.data.boardVisibility==="private");e(u)})().catch(a=>console.error("Error fetching lists:",a)):e([])});return()=>i()},[]);const[n,r]=M.useState(!1);return N.jsxs("div",{children:[n&&N.jsx("button",{onClick:()=>{r(!1)},className:"  absolute  text-slate-300  py-1 px-2 left-[90%] sm:left-[70%] sm:top-[-5%] top-[-10%] rounded-xl    text-2xl hover:bg-zinc-900",children:"✕"}),!n&&N.jsxs("div",{children:[N.jsx("h1",{className:"text-gray-300 mt-2 mb-2  p-1 rounded-md text-xl flex justify-center items-center gap-4",children:"Your Boards"}),N.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 px-0 sm:px-7  md:grid-cols-3 mt-7 mx-4 lg:grid-cols-4 gap-6 overflow-y-auto max-h-[65vh] shadow-sm",children:[t.map(i=>N.jsx(YC,{id:i.id,title:i.data.title,background:i.data.background,backgroundImage:i.data.backgroundImage,boardVisibility:i.data.boardVisibility},i.id)),N.jsx("div",{onClick:()=>{r(!0)},className:" bg-neutral-700 opacity-90 cursor-pointer hover:opacity-70 border-gray-200 p-5 rounded-sm",children:N.jsx("h2",{className:"text-gray-400 text-center text-sm ",children:"Create new board"})})]})]}),n&&N.jsx(QC,{})]})}function XO(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function pl(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Xp=t=>Array.isArray(t);function XC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function ml(t){return typeof t=="string"||Array.isArray(t)}function mx(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function cv(t,e,n,r){if(typeof e=="function"){const[i,s]=mx(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=mx(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function nh(t,e,n){const r=t.getProps();return cv(r,e,n!==void 0?n:r.custom,t)}const dv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],hv=["initial",...dv],Wl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Di=new Set(Wl),Tr=t=>t*1e3,Sr=t=>t/1e3,JO={type:"spring",stiffness:500,damping:25,restSpeed:10},ZO=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),e4={type:"keyframes",duration:.8},t4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},n4=(t,{keyframes:e})=>e.length>2?e4:Di.has(t)?t.startsWith("scale")?ZO(e[1]):JO:t4;function fv(t,e){return t?t[e]||t.default||t:void 0}const r4={skipAnimations:!1,useManualTiming:!1},i4=t=>t!==null;function rh(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(i4),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const Dt=t=>t;function s4(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(u){s.has(u)&&(l.schedule(u),t()),u(o)}const l={schedule:(u,c=!1,f=!1)=>{const h=f&&r?e:n;return c&&s.add(u),h.has(u)||h.add(u),u},cancel:u=>{n.delete(u),s.delete(u)},process:u=>{if(o=u,r){i=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(a),r=!1,i&&(i=!1,l.process(u))}};return l}const Ou=["read","resolveKeyframes","update","preRender","render","postRender"],o4=40;function JC(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Ou.reduce((w,x)=>(w[x]=s4(s),w),{}),{read:a,resolveKeyframes:l,update:u,preRender:c,render:f,postRender:p}=o,h=()=>{const w=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(w-i.timestamp,o4),1),i.timestamp=w,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),f.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(h))},g=()=>{n=!0,r=!0,i.isProcessing||t(h)};return{schedule:Ou.reduce((w,x)=>{const E=o[x];return w[x]=(k,S=!1,R=!1)=>(n||g(),E.schedule(k,S,R)),w},{}),cancel:w=>{for(let x=0;x<Ou.length;x++)o[Ou[x]].cancel(w)},state:i,steps:o}}const{schedule:Ce,cancel:Ti,state:dt,steps:ff}=JC(typeof requestAnimationFrame<"u"?requestAnimationFrame:Dt,!0),ZC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,a4=1e-7,l4=12;function u4(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=ZC(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>a4&&++a<l4);return o}function Hl(t,e,n,r){if(t===e&&n===r)return Dt;const i=s=>u4(s,0,1,t,n);return s=>s===0||s===1?s:ZC(i(s),e,r)}const eI=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,tI=t=>e=>1-t(1-e),nI=Hl(.33,1.53,.69,.99),pv=tI(nI),rI=eI(pv),iI=t=>(t*=2)<1?.5*pv(t):.5*(2-Math.pow(2,-10*(t-1))),mv=t=>1-Math.sin(Math.acos(t)),sI=tI(mv),oI=eI(mv),aI=t=>/^0[^.\s]+$/u.test(t);function c4(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||aI(t):!0}let Jp=Dt;const lI=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),uI=t=>e=>typeof e=="string"&&e.startsWith(t),cI=uI("--"),d4=uI("var(--"),gv=t=>d4(t)?h4.test(t.split("/*")[0].trim()):!1,h4=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,f4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function p4(t){const e=f4.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function dI(t,e,n=1){const[r,i]=p4(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return lI(o)?parseFloat(o):o}return gv(i)?dI(i,e,n+1):i}const Si=(t,e,n)=>n>e?e:n<t?t:n,Oo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},gl={...Oo,transform:t=>Si(0,1,t)},Fu={...Oo,default:1},Kl=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Hr=Kl("deg"),nr=Kl("%"),oe=Kl("px"),m4=Kl("vh"),g4=Kl("vw"),gx={...nr,parse:t=>nr.parse(t)/100,transform:t=>nr.transform(t*100)},v4=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),vx=t=>t===Oo||t===oe,yx=(t,e)=>parseFloat(t.split(", ")[e]),wx=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return yx(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?yx(s[1],t):0}},y4=new Set(["x","y","z"]),w4=Wl.filter(t=>!y4.has(t));function x4(t){const e=[];return w4.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const _o={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:wx(4,13),y:wx(5,14)};_o.translateX=_o.x;_o.translateY=_o.y;const hI=t=>e=>e.test(t),_4={test:t=>t==="auto",parse:t=>t},fI=[Oo,oe,nr,Hr,g4,m4,_4],xx=t=>fI.find(hI(t)),ns=new Set;let Zp=!1,em=!1;function pI(){if(em){const t=Array.from(ns).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=x4(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}em=!1,Zp=!1,ns.forEach(t=>t.complete()),ns.clear()}function mI(){ns.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(em=!0)})}function E4(){mI(),pI()}class vv{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ns.add(this),Zp||(Zp=!0,Ce.read(mI),Ce.resolveKeyframes(pI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ns.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ns.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Ma=t=>Math.round(t*1e5)/1e5,yv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function T4(t){return t==null}const S4=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,wv=(t,e)=>n=>!!(typeof n=="string"&&S4.test(n)&&n.startsWith(t)||e&&!T4(n)&&Object.prototype.hasOwnProperty.call(n,e)),gI=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(yv);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},C4=t=>Si(0,255,t),pf={...Oo,transform:t=>Math.round(C4(t))},Xi={test:wv("rgb","red"),parse:gI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+pf.transform(t)+", "+pf.transform(e)+", "+pf.transform(n)+", "+Ma(gl.transform(r))+")"};function I4(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const tm={test:wv("#"),parse:I4,transform:Xi.transform},$s={test:wv("hsl","hue"),parse:gI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+nr.transform(Ma(e))+", "+nr.transform(Ma(n))+", "+Ma(gl.transform(r))+")"},It={test:t=>Xi.test(t)||tm.test(t)||$s.test(t),parse:t=>Xi.test(t)?Xi.parse(t):$s.test(t)?$s.parse(t):tm.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Xi.transform(t):$s.transform(t)},P4=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function A4(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(yv))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(P4))===null||n===void 0?void 0:n.length)||0)>0}const vI="number",yI="color",R4="var",k4="var(",_x="${}",b4=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vl(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(b4,l=>(It.test(l)?(r.color.push(s),i.push(yI),n.push(It.parse(l))):l.startsWith(k4)?(r.var.push(s),i.push(R4),n.push(l)):(r.number.push(s),i.push(vI),n.push(parseFloat(l))),++s,_x)).split(_x);return{values:n,split:a,indexes:r,types:i}}function wI(t){return vl(t).values}function xI(t){const{split:e,types:n}=vl(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===vI?s+=Ma(i[o]):a===yI?s+=It.transform(i[o]):s+=i[o]}return s}}const D4=t=>typeof t=="number"?0:t;function N4(t){const e=wI(t);return xI(t)(e.map(D4))}const Ci={test:A4,parse:wI,createTransformer:xI,getAnimatableNone:N4},M4=new Set(["brightness","contrast","saturate","opacity"]);function V4(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(yv)||[];if(!r)return t;const i=n.replace(r,"");let s=M4.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const L4=/\b([a-z-]*)\(.*?\)/gu,nm={...Ci,getAnimatableNone:t=>{const e=t.match(L4);return e?e.map(V4).join(" "):t}},O4={borderWidth:oe,borderTopWidth:oe,borderRightWidth:oe,borderBottomWidth:oe,borderLeftWidth:oe,borderRadius:oe,radius:oe,borderTopLeftRadius:oe,borderTopRightRadius:oe,borderBottomRightRadius:oe,borderBottomLeftRadius:oe,width:oe,maxWidth:oe,height:oe,maxHeight:oe,top:oe,right:oe,bottom:oe,left:oe,padding:oe,paddingTop:oe,paddingRight:oe,paddingBottom:oe,paddingLeft:oe,margin:oe,marginTop:oe,marginRight:oe,marginBottom:oe,marginLeft:oe,backgroundPositionX:oe,backgroundPositionY:oe},F4={rotate:Hr,rotateX:Hr,rotateY:Hr,rotateZ:Hr,scale:Fu,scaleX:Fu,scaleY:Fu,scaleZ:Fu,skew:Hr,skewX:Hr,skewY:Hr,distance:oe,translateX:oe,translateY:oe,translateZ:oe,x:oe,y:oe,z:oe,perspective:oe,transformPerspective:oe,opacity:gl,originX:gx,originY:gx,originZ:oe},Ex={...Oo,transform:Math.round},xv={...O4,...F4,zIndex:Ex,size:oe,fillOpacity:gl,strokeOpacity:gl,numOctaves:Ex},j4={...xv,color:It,backgroundColor:It,outlineColor:It,fill:It,stroke:It,borderColor:It,borderTopColor:It,borderRightColor:It,borderBottomColor:It,borderLeftColor:It,filter:nm,WebkitFilter:nm},_v=t=>j4[t];function _I(t,e){let n=_v(t);return n!==nm&&(n=Ci),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const B4=new Set(["auto","none","0"]);function U4(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!B4.has(s)&&vl(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=_I(n,i)}class EI extends vv{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),gv(u))){const c=dI(u,n.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!v4.has(r)||e.length!==2)return;const[i,s]=e,o=xx(i),a=xx(s);if(o!==a)if(vx(o)&&vx(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)c4(e[i])&&r.push(i);r.length&&U4(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_o[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=_o[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function Ev(t){return typeof t=="function"}let dc;function z4(){dc=void 0}const rr={now:()=>(dc===void 0&&rr.set(dt.isProcessing||r4.useManualTiming?dt.timestamp:performance.now()),dc),set:t=>{dc=t,queueMicrotask(z4)}},Tx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ci.test(t)||t==="0")&&!t.startsWith("url("));function $4(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function W4(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Tx(i,e),a=Tx(s,e);return!o||!a?!1:$4(t)||(n==="spring"||Ev(n))&&r}const H4=40;class TI{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=rr.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>H4?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&E4(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=rr.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!W4(e,r,i,s))if(o)this.options.duration=0;else{l==null||l(rh(e,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const c=this.initPlayback(e,n);c!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function SI(t,e){return e?t*(1e3/e):0}const K4=5;function CI(t,e,n){const r=Math.max(e-K4,0);return SI(n-t(r),e-r)}const mf=.001,G4=.01,q4=10,Q4=.05,Y4=1;function X4({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=Si(Q4,Y4,o),t=Si(G4,q4,Sr(t)),o<1?(i=u=>{const c=u*o,f=c*t,p=c-n,h=rm(u,o),g=Math.exp(-f);return mf-p/h*g},s=u=>{const f=u*o*t,p=f*n+n,h=Math.pow(o,2)*Math.pow(u,2)*t,g=Math.exp(-f),m=rm(Math.pow(u,2),o);return(-i(u)+mf>0?-1:1)*((p-h)*g)/m}):(i=u=>{const c=Math.exp(-u*t),f=(u-n)*t+1;return-mf+c*f},s=u=>{const c=Math.exp(-u*t),f=(n-u)*(t*t);return c*f});const a=5/t,l=Z4(i,s,a);if(t=Tr(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const J4=12;function Z4(t,e,n){let r=n;for(let i=1;i<J4;i++)r=r-t(r)/e(r);return r}function rm(t,e){return t*Math.sqrt(1-e*e)}const eF=["duration","bounce"],tF=["stiffness","damping","mass"];function Sx(t,e){return e.some(n=>t[n]!==void 0)}function nF(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Sx(t,tF)&&Sx(t,eF)){const n=X4(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function II({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:u,duration:c,velocity:f,isResolvedFromDuration:p}=nF({...r,velocity:-Sr(r.velocity||0)}),h=f||0,g=l/(2*Math.sqrt(a*u)),m=s-i,v=Sr(Math.sqrt(a/u)),w=Math.abs(m)<5;n||(n=w?.01:2),e||(e=w?.005:.5);let x;if(g<1){const E=rm(v,g);x=k=>{const S=Math.exp(-g*v*k);return s-S*((h+g*v*m)/E*Math.sin(E*k)+m*Math.cos(E*k))}}else if(g===1)x=E=>s-Math.exp(-v*E)*(m+(h+v*m)*E);else{const E=v*Math.sqrt(g*g-1);x=k=>{const S=Math.exp(-g*v*k),R=Math.min(E*k,300);return s-S*((h+g*v*m)*Math.sinh(R)+E*m*Math.cosh(R))/E}}return{calculatedDuration:p&&c||null,next:E=>{const k=x(E);if(p)o.done=E>=c;else{let S=0;g<1&&(S=E===0?Tr(h):CI(x,E,k));const R=Math.abs(S)<=n,T=Math.abs(s-k)<=e;o.done=R&&T}return o.value=o.done?s:k,o}}}function Cx({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const f=t[0],p={done:!1,value:f},h=y=>a!==void 0&&y<a||l!==void 0&&y>l,g=y=>a===void 0?l:l===void 0||Math.abs(a-y)<Math.abs(l-y)?a:l;let m=n*e;const v=f+m,w=o===void 0?v:o(v);w!==v&&(m=w-f);const x=y=>-m*Math.exp(-y/r),E=y=>w+x(y),k=y=>{const I=x(y),C=E(y);p.done=Math.abs(I)<=u,p.value=p.done?w:C};let S,R;const T=y=>{h(p.value)&&(S=y,R=II({keyframes:[p.value,g(p.value)],velocity:CI(E,y,p.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return T(0),{calculatedDuration:null,next:y=>{let I=!1;return!R&&S===void 0&&(I=!0,k(y),T(y)),S!==void 0&&y>=S?R.next(y-S):(!I&&k(y),p)}}}const rF=Hl(.42,0,1,1),iF=Hl(0,0,.58,1),PI=Hl(.42,0,.58,1),sF=t=>Array.isArray(t)&&typeof t[0]!="number",Tv=t=>Array.isArray(t)&&typeof t[0]=="number",Ix={linear:Dt,easeIn:rF,easeInOut:PI,easeOut:iF,circIn:mv,circInOut:oI,circOut:sI,backIn:pv,backInOut:rI,backOut:nI,anticipate:iI},Px=t=>{if(Tv(t)){Jp(t.length===4);const[e,n,r,i]=t;return Hl(e,n,r,i)}else if(typeof t=="string")return Jp(Ix[t]!==void 0),Ix[t];return t},oF=(t,e)=>n=>e(t(n)),Cr=(...t)=>t.reduce(oF),Eo=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Fe=(t,e,n)=>t+(e-t)*n;function gf(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function aF({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=gf(l,a,t+1/3),s=gf(l,a,t),o=gf(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function ud(t,e){return n=>n>0?e:t}const vf=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},lF=[tm,Xi,$s],uF=t=>lF.find(e=>e.test(t));function Ax(t){const e=uF(t);if(!e)return!1;let n=e.parse(t);return e===$s&&(n=aF(n)),n}const Rx=(t,e)=>{const n=Ax(t),r=Ax(e);if(!n||!r)return ud(t,e);const i={...n};return s=>(i.red=vf(n.red,r.red,s),i.green=vf(n.green,r.green,s),i.blue=vf(n.blue,r.blue,s),i.alpha=Fe(n.alpha,r.alpha,s),Xi.transform(i))},im=new Set(["none","hidden"]);function cF(t,e){return im.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function dF(t,e){return n=>Fe(t,e,n)}function Sv(t){return typeof t=="number"?dF:typeof t=="string"?gv(t)?ud:It.test(t)?Rx:pF:Array.isArray(t)?AI:typeof t=="object"?It.test(t)?Rx:hF:ud}function AI(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Sv(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function hF(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Sv(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function fF(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const pF=(t,e)=>{const n=Ci.createTransformer(e),r=vl(t),i=vl(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?im.has(t)&&!i.values.length||im.has(e)&&!r.values.length?cF(t,e):Cr(AI(fF(r,i),i.values),n):ud(t,e)};function RI(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Fe(t,e,n):Sv(t)(t,e)}function mF(t,e,n){const r=[],i=n||RI,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Dt:e;a=Cr(l,a)}r.push(a)}return r}function gF(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Jp(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=mF(e,r,i),a=o.length,l=u=>{let c=0;if(a>1)for(;c<t.length-2&&!(u<t[c+1]);c++);const f=Eo(t[c],t[c+1],u);return o[c](f)};return n?u=>l(Si(t[0],t[s-1],u)):l}function vF(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Eo(0,e,r);t.push(Fe(n,1,i))}}function yF(t){const e=[0];return vF(e,t.length-1),e}function wF(t,e){return t.map(n=>n*e)}function xF(t,e){return t.map(()=>e||PI).splice(0,t.length-1)}function cd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=sF(r)?r.map(Px):Px(r),s={done:!1,value:e[0]},o=wF(n&&n.length===e.length?n:yF(e),t),a=gF(o,e,{ease:Array.isArray(i)?i:xF(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const kx=2e4;function _F(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<kx;)e+=n,r=t.next(e);return e>=kx?1/0:e}const EF=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ce.update(e,!0),stop:()=>Ti(e),now:()=>dt.isProcessing?dt.timestamp:rr.now()}},TF={decay:Cx,inertia:Cx,tween:cd,keyframes:cd,spring:II},SF=t=>t/100;class Cv extends TI{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||vv,a=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=Ev(n)?n:TF[n]||cd;let l,u;a!==cd&&typeof e[0]!="number"&&(l=Cr(SF,RI(e[0],e[1])),e=[0,100]);const c=a({...this.options,keyframes:e});s==="mirror"&&(u=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=_F(c));const{calculatedDuration:f}=c,p=f+i,h=p*(r+1)-i;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:p,totalDuration:h}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:y}=this.options;return{done:!0,value:y[y.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:p,repeat:h,repeatType:g,repeatDelay:m,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const w=this.currentTime-p*(this.speed>=0?1:-1),x=this.speed>=0?w<0:w>c;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let E=this.currentTime,k=s;if(h){const y=Math.min(this.currentTime,c)/f;let I=Math.floor(y),C=y%1;!C&&y>=1&&(C=1),C===1&&I--,I=Math.min(I,h+1),!!(I%2)&&(g==="reverse"?(C=1-C,m&&(C-=m/f)):g==="mirror"&&(k=o)),E=Si(0,1,C)*f}const S=x?{done:!1,value:l[0]}:k.next(E);a&&(S.value=a(S.value));let{done:R}=S;!x&&u!==null&&(R=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return T&&i!==void 0&&(S.value=rh(l,this.options,i)),v&&v(S.value),T&&this.finish(),S}get duration(){const{resolved:e}=this;return e?Sr(e.calculatedDuration):0}get time(){return Sr(this.currentTime)}set time(e){e=Tr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Sr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=EF,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const kI=new Set(["opacity","clipPath","filter","transform"]),CF=10,IF=(t,e)=>{let n="";const r=Math.max(Math.round(e/CF),2);for(let i=0;i<r;i++)n+=t(Eo(0,r-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function Iv(t){let e;return()=>(e===void 0&&(e=t()),e)}const PF={linearEasing:void 0};function AF(t,e){const n=Iv(t);return()=>{var r;return(r=PF[e])!==null&&r!==void 0?r:n()}}const dd=AF(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function bI(t){return!!(typeof t=="function"&&dd()||!t||typeof t=="string"&&(t in sm||dd())||Tv(t)||Array.isArray(t)&&t.every(bI))}const ma=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,sm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ma([0,.65,.55,1]),circOut:ma([.55,0,1,.45]),backIn:ma([.31,.01,.66,-.59]),backOut:ma([.33,1.53,.69,.99])};function DI(t,e){if(t)return typeof t=="function"&&dd()?IF(t,e):Tv(t)?ma(t):Array.isArray(t)?t.map(n=>DI(n,e)||sm.easeOut):sm[t]}function RF(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:n};l&&(u.offset=l);const c=DI(a,i);return Array.isArray(c)&&(u.easing=c),t.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function bx(t,e){t.timeline=e,t.onfinish=null}const kF=Iv(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),hd=10,bF=2e4;function DF(t){return Ev(t.type)||t.type==="spring"||!bI(t.ease)}function NF(t,e){const n=new Cv({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<bF;)r=n.sample(s),i.push(r.value),s+=hd;return{times:void 0,keyframes:i,duration:s-hd,ease:"linear"}}const NI={anticipate:iI,backInOut:rI,circInOut:oI};function MF(t){return t in NI}class Dx extends TI{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new EI(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:s,ease:o,type:a,motionValue:l,name:u,startTime:c}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof o=="string"&&dd()&&MF(o)&&(o=NI[o]),DF(this.options)){const{onComplete:p,onUpdate:h,motionValue:g,element:m,...v}=this.options,w=NF(e,v);e=w.keyframes,e.length===1&&(e[1]=e[0]),i=w.duration,s=w.times,o=w.ease,a="keyframes"}const f=RF(l.owner.current,u,e,{...this.options,duration:i,times:s,ease:o});return f.startTime=c??this.calcStartTime(),this.pendingTimeline?(bx(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:p}=this.options;l.set(rh(e,this.options,n)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:i,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Sr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Sr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Tr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Dt;const{animation:r}=n;bx(r,e)}return Dt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:f,element:p,...h}=this.options,g=new Cv({...h,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),m=Tr(this.time);u.setWithVelocity(g.sample(m-hd).value,g.sample(m).value,hd)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;return kF()&&r&&kI.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const VF=Iv(()=>window.ScrollTimeline!==void 0);class LF{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>VF()&&i.attachTimeline?i.attachTimeline(e):n(i));return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function OF({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Pv=(t,e,n,r={},i,s)=>o=>{const a=fv(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Tr(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};OF(a)||(c={...c,...n4(t,c)}),c.duration&&(c.duration=Tr(c.duration)),c.repeatDelay&&(c.repeatDelay=Tr(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let f=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const p=rh(c.keyframes,a);if(p!==void 0)return Ce.update(()=>{c.onUpdate(p),c.onComplete()}),new LF([])}return!s&&Dx.supports(c)?new Dx(c):new Cv(c)},FF=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),jF=t=>Xp(t)?t[t.length-1]||0:t;function Av(t,e){t.indexOf(e)===-1&&t.push(e)}function Rv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class kv{constructor(){this.subscriptions=[]}add(e){return Av(this.subscriptions,e),()=>Rv(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Nx=30,BF=t=>!isNaN(parseFloat(t));class UF{constructor(e,n={}){this.version="11.11.9",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=rr.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=rr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=BF(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new kv);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ce.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=rr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Nx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Nx);return SI(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function yl(t,e){return new UF(t,e)}function zF(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,yl(n))}function $F(t,e){const n=nh(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=jF(s[o]);zF(t,o,a)}}const ih=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),WF="framerAppearId",MI="data-"+ih(WF);function VI(t){return t.props[MI]}const bt=t=>!!(t&&t.getVelocity);function HF(t){return!!(bt(t)&&t.add)}function om(t,e){if(!t.applyWillChange)return;const n=t.getValue("willChange");if(HF(n))return n.add(e)}function KF({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function LI(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const u=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const f in l){const p=t.getValue(f,(s=t.latestValues[f])!==null&&s!==void 0?s:null),h=l[f];if(h===void 0||c&&KF(c,f))continue;const g={delay:n,...fv(o||{},f)};let m=!1;if(window.MotionHandoffAnimation){const w=VI(t);if(w){const x=window.MotionHandoffAnimation(w,f,Ce);x!==null&&(g.startTime=x,m=!0)}}om(t,f),p.start(Pv(f,p,h,t.shouldReduceMotion&&Di.has(f)?{type:!1}:g,t,m));const v=p.animation;v&&u.push(v)}return a&&Promise.all(u).then(()=>{Ce.update(()=>{a&&$F(t,a)})}),u}function am(t,e,n={}){var r;const i=nh(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(LI(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:p}=s;return GF(t,e,c+u,f,p,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,c]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>c())}else return Promise.all([o(),a(n.delay)])}function GF(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(qF).forEach((u,c)=>{u.notify("AnimationStart",e),o.push(am(u,e,{...s,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function qF(t,e){return t.sortNodePosition(e)}function QF(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>am(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=am(t,e,n);else{const i=typeof e=="function"?nh(t,e,n.custom):e;r=Promise.all(LI(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const YF=hv.length;function OI(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?OI(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<YF;n++){const r=hv[n],i=t.props[r];(ml(i)||i===!1)&&(e[r]=i)}return e}const XF=[...dv].reverse(),JF=dv.length;function ZF(t){return e=>Promise.all(e.map(({animation:n,options:r})=>QF(t,n,r)))}function ej(t){let e=ZF(t),n=Mx(),r=!0;const i=l=>(u,c)=>{var f;const p=nh(t,c,l==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(p){const{transition:h,transitionEnd:g,...m}=p;u={...u,...m,...g}}return u};function s(l){e=l(t)}function o(l){const{props:u}=t,c=OI(t.parent)||{},f=[],p=new Set;let h={},g=1/0;for(let v=0;v<JF;v++){const w=XF[v],x=n[w],E=u[w]!==void 0?u[w]:c[w],k=ml(E),S=w===l?x.isActive:null;S===!1&&(g=v);let R=E===c[w]&&E!==u[w]&&k;if(R&&r&&t.manuallyAnimateOnMount&&(R=!1),x.protectedKeys={...h},!x.isActive&&S===null||!E&&!x.prevProp||pl(E)||typeof E=="boolean")continue;const T=tj(x.prevProp,E);let y=T||w===l&&x.isActive&&!R&&k||v>g&&k,I=!1;const C=Array.isArray(E)?E:[E];let A=C.reduce(i(w),{});S===!1&&(A={});const{prevResolvedValues:b={}}=x,D={...b,...A},B=U=>{y=!0,p.has(U)&&(I=!0,p.delete(U)),x.needsAnimating[U]=!0;const F=t.getValue(U);F&&(F.liveStyle=!1)};for(const U in D){const F=A[U],z=b[U];if(h.hasOwnProperty(U))continue;let Q=!1;Xp(F)&&Xp(z)?Q=!XC(F,z):Q=F!==z,Q?F!=null?B(U):p.add(U):F!==void 0&&p.has(U)?B(U):x.protectedKeys[U]=!0}x.prevProp=E,x.prevResolvedValues=A,x.isActive&&(h={...h,...A}),r&&t.blockInitialAnimation&&(y=!1),y&&(!(R&&T)||I)&&f.push(...C.map(U=>({animation:U,options:{type:w}})))}if(p.size){const v={};p.forEach(w=>{const x=t.getBaseTarget(w),E=t.getValue(w);E&&(E.liveStyle=!0),v[w]=x??null}),f.push({animation:v})}let m=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(f):Promise.resolve()}function a(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=t.variantChildren)===null||c===void 0||c.forEach(p=>{var h;return(h=p.animationState)===null||h===void 0?void 0:h.setActive(l,u)}),n[l].isActive=u;const f=o(l);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Mx(),r=!0}}}function tj(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!XC(e,t):!1}function Bi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Mx(){return{animate:Bi(!0),whileInView:Bi(),whileHover:Bi(),whileTap:Bi(),whileDrag:Bi(),whileFocus:Bi(),exit:Bi()}}class Ni{constructor(e){this.isMounted=!1,this.node=e}update(){}}class nj extends Ni{constructor(e){super(e),e.animationState||(e.animationState=ej(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();pl(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let rj=0;class ij extends Ni{constructor(){super(...arguments),this.id=rj++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const sj={animation:{Feature:nj},exit:{Feature:ij}},FI=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function sh(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const oj=t=>e=>FI(e)&&t(e,sh(e));function wr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Ir(t,e,n,r){return wr(t,e,oj(n),r)}const Vx=(t,e)=>Math.abs(t-e);function aj(t,e){const n=Vx(t.x,e.x),r=Vx(t.y,e.y);return Math.sqrt(n**2+r**2)}class jI{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=wf(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,h=aj(f.offset,{x:0,y:0})>=3;if(!p&&!h)return;const{point:g}=f,{timestamp:m}=dt;this.history.push({...g,timestamp:m});const{onStart:v,onMove:w}=this.handlers;p||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=yf(p,this.transformPagePoint),Ce.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:h,onSessionEnd:g,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=wf(f.type==="pointercancel"?this.lastMoveEventInfo:yf(p,this.transformPagePoint),this.history);this.startEvent&&h&&h(f,v),g&&g(f,v)},!FI(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=sh(e),a=yf(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=dt;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(e,wf(a,this.history)),this.removeListeners=Cr(Ir(this.contextWindow,"pointermove",this.handlePointerMove),Ir(this.contextWindow,"pointerup",this.handlePointerUp),Ir(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ti(this.updatePoint)}}function yf(t,e){return e?{point:e(t.point)}:t}function Lx(t,e){return{x:t.x-e.x,y:t.y-e.y}}function wf({point:t},e){return{point:t,delta:Lx(t,BI(e)),offset:Lx(t,lj(e)),velocity:uj(e,.1)}}function lj(t){return t[0]}function BI(t){return t[t.length-1]}function uj(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=BI(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Tr(e)));)n--;if(!r)return{x:0,y:0};const s=Sr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function UI(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const Ox=UI("dragHorizontal"),Fx=UI("dragVertical");function zI(t){let e=!1;if(t==="y")e=Fx();else if(t==="x")e=Ox();else{const n=Ox(),r=Fx();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function $I(){const t=zI(!0);return t?(t(),!1):!0}function Ws(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const WI=1e-4,cj=1-WI,dj=1+WI,HI=.01,hj=0-HI,fj=0+HI;function dn(t){return t.max-t.min}function pj(t,e,n){return Math.abs(t-e)<=n}function jx(t,e,n,r=.5){t.origin=r,t.originPoint=Fe(e.min,e.max,t.origin),t.scale=dn(n)/dn(e),t.translate=Fe(n.min,n.max,t.origin)-t.originPoint,(t.scale>=cj&&t.scale<=dj||isNaN(t.scale))&&(t.scale=1),(t.translate>=hj&&t.translate<=fj||isNaN(t.translate))&&(t.translate=0)}function Va(t,e,n,r){jx(t.x,e.x,n.x,r?r.originX:void 0),jx(t.y,e.y,n.y,r?r.originY:void 0)}function Bx(t,e,n){t.min=n.min+e.min,t.max=t.min+dn(e)}function mj(t,e,n){Bx(t.x,e.x,n.x),Bx(t.y,e.y,n.y)}function Ux(t,e,n){t.min=e.min-n.min,t.max=t.min+dn(e)}function La(t,e,n){Ux(t.x,e.x,n.x),Ux(t.y,e.y,n.y)}function gj(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Fe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Fe(n,t,r.max):Math.min(t,n)),t}function zx(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function vj(t,{top:e,left:n,bottom:r,right:i}){return{x:zx(t.x,n,i),y:zx(t.y,e,r)}}function $x(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function yj(t,e){return{x:$x(t.x,e.x),y:$x(t.y,e.y)}}function wj(t,e){let n=.5;const r=dn(t),i=dn(e);return i>r?n=Eo(e.min,e.max-r,t.min):r>i&&(n=Eo(t.min,t.max-i,e.min)),Si(0,1,n)}function xj(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const lm=.35;function _j(t=lm){return t===!1?t=0:t===!0&&(t=lm),{x:Wx(t,"left","right"),y:Wx(t,"top","bottom")}}function Wx(t,e,n){return{min:Hx(t,e),max:Hx(t,n)}}function Hx(t,e){return typeof t=="number"?t:t[e]||0}const Kx=()=>({translate:0,scale:1,origin:0,originPoint:0}),Hs=()=>({x:Kx(),y:Kx()}),Gx=()=>({min:0,max:0}),He=()=>({x:Gx(),y:Gx()});function wn(t){return[t("x"),t("y")]}function KI({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Ej({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Tj(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function xf(t){return t===void 0||t===1}function um({scale:t,scaleX:e,scaleY:n}){return!xf(t)||!xf(e)||!xf(n)}function Wi(t){return um(t)||GI(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function GI(t){return qx(t.x)||qx(t.y)}function qx(t){return t&&t!=="0%"}function fd(t,e,n){const r=t-n,i=e*r;return n+i}function Qx(t,e,n,r,i){return i!==void 0&&(t=fd(t,i,r)),fd(t,n,r)+e}function cm(t,e=0,n=1,r,i){t.min=Qx(t.min,e,n,r,i),t.max=Qx(t.max,e,n,r,i)}function qI(t,{x:e,y:n}){cm(t.x,e.translate,e.scale,e.originPoint),cm(t.y,n.translate,n.scale,n.originPoint)}const Yx=.999999999999,Xx=1.0000000000001;function Sj(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Gs(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,qI(t,o)),r&&Wi(s.latestValues)&&Gs(t,s.latestValues))}e.x<Xx&&e.x>Yx&&(e.x=1),e.y<Xx&&e.y>Yx&&(e.y=1)}function Ks(t,e){t.min=t.min+e,t.max=t.max+e}function Jx(t,e,n,r,i=.5){const s=Fe(t.min,t.max,i);cm(t,e,n,s,r)}function Gs(t,e){Jx(t.x,e.x,e.scaleX,e.scale,e.originX),Jx(t.y,e.y,e.scaleY,e.scale,e.originY)}function QI(t,e){return KI(Tj(t.getBoundingClientRect(),e))}function Cj(t,e,n){const r=QI(t,n),{scroll:i}=e;return i&&(Ks(r.x,i.offset.x),Ks(r.y,i.offset.y)),r}const YI=({current:t})=>t?t.ownerDocument.defaultView:null,Ij=new WeakMap;class Pj{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=He(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(sh(c,"page").point)},s=(c,f)=>{const{drag:p,dragPropagation:h,onDragStart:g}=this.getProps();if(p&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=zI(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wn(v=>{let w=this.getAxisMotionValue(v).get()||0;if(nr.test(w)){const{projection:x}=this.visualElement;if(x&&x.layout){const E=x.layout.layoutBox[v];E&&(w=dn(E)*(parseFloat(w)/100))}}this.originPoint[v]=w}),g&&Ce.postRender(()=>g(c,f)),om(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(c,f)=>{const{dragPropagation:p,dragDirectionLock:h,onDirectionLock:g,onDrag:m}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:v}=f;if(h&&this.currentDirection===null){this.currentDirection=Aj(v),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),m&&m(c,f)},a=(c,f)=>this.stop(c,f),l=()=>wn(c=>{var f;return this.getAnimationState(c)==="paused"&&((f=this.getAxisMotionValue(c).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new jI(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:YI(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ce.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!ju(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=gj(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ws(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=vj(i.layoutBox,n):this.constraints=!1,this.elastic=_j(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&wn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=xj(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ws(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Cj(r,i.root,this.visualElement.getTransformPagePoint());let o=yj(i.layout.layoutBox,s);if(n){const a=n(Ej(o));this.hasMutatedConstraints=!!a,a&&(o=KI(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=wn(c=>{if(!ju(c,n,this.currentDirection))return;let f=l&&l[c]||{};o&&(f={min:0,max:0});const p=i?200:1e6,h=i?40:1e7,g={type:"inertia",velocity:r?e[c]:0,bounceStiffness:p,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(c,g)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return om(this.visualElement,e),r.start(Pv(e,r,0,n,this.visualElement,!1))}stopAnimation(){wn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){wn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){wn(n=>{const{drag:r}=this.getProps();if(!ju(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Fe(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ws(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};wn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=wj({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),wn(o=>{if(!ju(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Fe(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;Ij.set(this.visualElement,this);const e=this.visualElement.current,n=Ir(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ws(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ce.read(r);const o=wr(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(wn(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=lm,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function ju(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Aj(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Rj extends Ni{constructor(e){super(e),this.removeGroupControls=Dt,this.removeListeners=Dt,this.controls=new Pj(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Dt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Zx=t=>(e,n)=>{t&&Ce.postRender(()=>t(e,n))};class kj extends Ni{constructor(){super(...arguments),this.removePointerDownListener=Dt}onPointerDown(e){this.session=new jI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:YI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Zx(e),onStart:Zx(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ce.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Ir(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const oh=M.createContext(null);function bj(){const t=M.useContext(oh);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=M.useId();M.useEffect(()=>r(i),[]);const s=M.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,s]:[!0]}const bv=M.createContext({}),XI=M.createContext({}),hc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function e1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ra={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(oe.test(t))t=parseFloat(t);else return t;const n=e1(t,e.target.x),r=e1(t,e.target.y);return`${n}% ${r}%`}},Dj={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Ci.parse(t);if(i.length>5)return r;const s=Ci.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=Fe(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}},pd={};function Nj(t){Object.assign(pd,t)}const{schedule:Dv,cancel:OB}=JC(queueMicrotask,!1);class Mj extends M.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Nj(Vj),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),hc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ce.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Dv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function JI(t){const[e,n]=bj(),r=M.useContext(bv);return N.jsx(Mj,{...t,layoutGroup:r,switchLayoutGroup:M.useContext(XI),isPresent:e,safeToRemove:n})}const Vj={borderRadius:{...ra,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ra,borderTopRightRadius:ra,borderBottomLeftRadius:ra,borderBottomRightRadius:ra,boxShadow:Dj},ZI=["TopLeft","TopRight","BottomLeft","BottomRight"],Lj=ZI.length,t1=t=>typeof t=="string"?parseFloat(t):t,n1=t=>typeof t=="number"||oe.test(t);function Oj(t,e,n,r,i,s){i?(t.opacity=Fe(0,n.opacity!==void 0?n.opacity:1,Fj(r)),t.opacityExit=Fe(e.opacity!==void 0?e.opacity:1,0,jj(r))):s&&(t.opacity=Fe(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<Lj;o++){const a=`border${ZI[o]}Radius`;let l=r1(e,a),u=r1(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||n1(l)===n1(u)?(t[a]=Math.max(Fe(t1(l),t1(u),r),0),(nr.test(u)||nr.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=Fe(e.rotate||0,n.rotate||0,r))}function r1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Fj=eP(0,.5,sI),jj=eP(.5,.95,Dt);function eP(t,e,n){return r=>r<t?0:r>e?1:n(Eo(t,e,r))}function i1(t,e){t.min=e.min,t.max=e.max}function yn(t,e){i1(t.x,e.x),i1(t.y,e.y)}function s1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function o1(t,e,n,r,i){return t-=e,t=fd(t,1/n,r),i!==void 0&&(t=fd(t,1/i,r)),t}function Bj(t,e=0,n=1,r=.5,i,s=t,o=t){if(nr.test(e)&&(e=parseFloat(e),e=Fe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Fe(s.min,s.max,r);t===s&&(a-=e),t.min=o1(t.min,e,n,a,i),t.max=o1(t.max,e,n,a,i)}function a1(t,e,[n,r,i],s,o){Bj(t,e[n],e[r],e[i],e.scale,s,o)}const Uj=["x","scaleX","originX"],zj=["y","scaleY","originY"];function l1(t,e,n,r){a1(t.x,e,Uj,n?n.x:void 0,r?r.x:void 0),a1(t.y,e,zj,n?n.y:void 0,r?r.y:void 0)}function u1(t){return t.translate===0&&t.scale===1}function tP(t){return u1(t.x)&&u1(t.y)}function c1(t,e){return t.min===e.min&&t.max===e.max}function $j(t,e){return c1(t.x,e.x)&&c1(t.y,e.y)}function d1(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function nP(t,e){return d1(t.x,e.x)&&d1(t.y,e.y)}function h1(t){return dn(t.x)/dn(t.y)}function f1(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Wj{constructor(){this.members=[]}add(e){Av(this.members,e),e.scheduleRender()}remove(e){if(Rv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Hj(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:f,rotateY:p,skewX:h,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),h&&(r+=`skewX(${h}deg) `),g&&(r+=`skewY(${g}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Kj=(t,e)=>t.depth-e.depth;class Gj{constructor(){this.children=[],this.isDirty=!1}add(e){Av(this.children,e),this.isDirty=!0}remove(e){Rv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Kj),this.isDirty=!1,this.children.forEach(e)}}function fc(t){const e=bt(t)?t.get():t;return FF(e)?e.toValue():e}function qj(t,e){const n=rr.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Ti(r),t(s-e))};return Ce.read(r,!0),()=>Ti(r)}function Qj(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Yj(t,e,n){const r=bt(t)?t:yl(t);return r.start(Pv("",r,e,n)),r.animation}const Hi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ga=typeof window<"u"&&window.MotionDebug!==void 0,_f=["","X","Y","Z"],Xj={visibility:"hidden"},p1=1e3;let Jj=0;function Ef(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function rP(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=VI(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ce,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&rP(r)}function iP({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Jj++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ga&&(Hi.totalNodes=Hi.resolvedTargetDeltas=Hi.recalculatedProjection=0),this.nodes.forEach(t3),this.nodes.forEach(o3),this.nodes.forEach(a3),this.nodes.forEach(n3),ga&&window.MotionDebug.record(Hi)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Gj)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new kv),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Qj(o),this.instance=o;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let f;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=qj(p,250),hc.hasAnimatedSinceResize&&(hc.hasAnimatedSinceResize=!1,this.nodes.forEach(g1))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:h,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||c.getDefaultTransition()||h3,{onLayoutAnimationStart:v,onLayoutAnimationComplete:w}=c.getProps(),x=!this.targetLayout||!nP(this.targetLayout,g)||h,E=!p&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||p&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,E);const k={...fv(m,"layout"),onPlay:v,onComplete:w};(c.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else p||g1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ti(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(l3),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&rP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(m1);return}this.isUpdating||this.nodes.forEach(i3),this.isUpdating=!1,this.nodes.forEach(s3),this.nodes.forEach(Zj),this.nodes.forEach(e3),this.clearAllSnapshots();const a=rr.now();dt.delta=Si(0,1e3/60,a-dt.timestamp),dt.timestamp=a,dt.isProcessing=!0,ff.update.process(dt),ff.preRender.process(dt),ff.render.process(dt),dt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Dv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(r3),this.sharedNodes.forEach(u3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ce.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ce.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=He(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!tP(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&(a||Wi(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),f3(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return He();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(p3))){const{scroll:c}=this.root;c&&(Ks(l.x,c.offset.x),Ks(l.y,c.offset.y))}return l}removeElementScroll(o){var a;const l=He();if(yn(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:f,options:p}=c;c!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&yn(l,o),Ks(l.x,f.offset.x),Ks(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=He();yn(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Gs(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Wi(c.latestValues)&&Gs(l,c.latestValues)}return Wi(this.latestValues)&&Gs(l,this.latestValues),l}removeTransform(o){const a=He();yn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Wi(u.latestValues))continue;um(u.latestValues)&&u.updateSnapshot();const c=He(),f=u.measurePageBox();yn(c,f),l1(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Wi(this.latestValues)&&l1(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==dt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=dt.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=He(),this.relativeTargetOrigin=He(),La(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=He(),this.targetWithTransforms=He()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),mj(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):yn(this.target,this.layout.layoutBox),qI(this.target,this.targetDelta)):yn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=He(),this.relativeTargetOrigin=He(),La(this.relativeTargetOrigin,this.target,h.target),yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ga&&Hi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||um(this.parent.latestValues)||GI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===dt.timestamp&&(u=!1),u)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;yn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,h=this.treeScale.y;Sj(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=He());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(s1(this.prevProjectionDelta.x,this.projectionDelta.x),s1(this.prevProjectionDelta.y,this.projectionDelta.y)),Va(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==h||!f1(this.projectionDelta.x,this.prevProjectionDelta.x)||!f1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),ga&&Hi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Hs(),this.projectionDelta=Hs(),this.projectionDeltaWithTransform=Hs()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=Hs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=He(),h=l?l.source:void 0,g=this.layout?this.layout.source:void 0,m=h!==g,v=this.getStack(),w=!v||v.members.length<=1,x=!!(m&&!w&&this.options.crossfade===!0&&!this.path.some(d3));this.animationProgress=0;let E;this.mixTargetDelta=k=>{const S=k/1e3;v1(f.x,o.x,S),v1(f.y,o.y,S),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(La(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),c3(this.relativeTarget,this.relativeTargetOrigin,p,S),E&&$j(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=He()),yn(E,this.relativeTarget)),m&&(this.animationValues=c,Oj(c,u,this.latestValues,S,x,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ti(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ce.update(()=>{hc.hasAnimatedSinceResize=!0,this.currentAnimation=Yj(0,p1,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(p1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&sP(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||He();const f=dn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=dn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}yn(a,l),Gs(a,c),Va(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Wj),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&Ef("z",o,u,this.animationValues);for(let c=0;c<_f.length;c++)Ef(`rotate${_f[c]}`,o,u,this.animationValues),Ef(`skew${_f[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Xj;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=fc(o==null?void 0:o.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=fc(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Wi(this.latestValues)&&(m.transform=c?c({},""):"none",this.hasProjected=!1),m}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=Hj(this.projectionDeltaWithTransform,this.treeScale,p),c&&(u.transform=c(p,u.transform));const{x:h,y:g}=this.projectionDelta;u.transformOrigin=`${h.origin*100}% ${g.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const m in pd){if(p[m]===void 0)continue;const{correct:v,applyTo:w}=pd[m],x=u.transform==="none"?p[m]:v(p[m],f);if(w){const E=w.length;for(let k=0;k<E;k++)u[w[k]]=x}else u[m]=x}return this.options.layoutId&&(u.pointerEvents=f===this?fc(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(m1),this.root.sharedNodes.clear()}}}function Zj(t){t.updateLayout()}function e3(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?wn(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],h=dn(p);p.min=r[f].min,p.max=p.min+h}):sP(s,n.layoutBox,r)&&wn(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],h=dn(r[f]);p.max=p.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+h)});const a=Hs();Va(a,r,n.layoutBox);const l=Hs();o?Va(l,t.applyTransform(i,!0),n.measuredBox):Va(l,r,n.layoutBox);const u=!tP(a);let c=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:h}=f;if(p&&h){const g=He();La(g,n.layoutBox,p.layoutBox);const m=He();La(m,r,h.layoutBox),nP(g,m)||(c=!0),f.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=g,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function t3(t){ga&&Hi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function n3(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function r3(t){t.clearSnapshot()}function m1(t){t.clearMeasurements()}function i3(t){t.isLayoutDirty=!1}function s3(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function g1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function o3(t){t.resolveTargetDelta()}function a3(t){t.calcProjection()}function l3(t){t.resetSkewAndRotation()}function u3(t){t.removeLeadSnapshot()}function v1(t,e,n){t.translate=Fe(e.translate,0,n),t.scale=Fe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function y1(t,e,n,r){t.min=Fe(e.min,n.min,r),t.max=Fe(e.max,n.max,r)}function c3(t,e,n,r){y1(t.x,e.x,n.x,r),y1(t.y,e.y,n.y,r)}function d3(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const h3={duration:.45,ease:[.4,0,.1,1]},w1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),x1=w1("applewebkit/")&&!w1("chrome/")?Math.round:Dt;function _1(t){t.min=x1(t.min),t.max=x1(t.max)}function f3(t){_1(t.x),_1(t.y)}function sP(t,e,n){return t==="position"||t==="preserve-aspect"&&!pj(h1(e),h1(n),.2)}function p3(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const m3=iP({attachResizeListener:(t,e)=>wr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Tf={current:void 0},oP=iP({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Tf.current){const t=new m3({});t.mount(window),t.setOptions({layoutScroll:!0}),Tf.current=t}return Tf.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),g3={pan:{Feature:kj},drag:{Feature:Rj,ProjectionNode:oP,MeasureLayout:JI}};function E1(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",i=(s,o)=>{if(s.pointerType==="touch"||$I())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e);const l=a[r];l&&Ce.postRender(()=>l(s,o))};return Ir(t.current,n,i,{passive:!t.getProps()[r]})}class v3 extends Ni{mount(){this.unmount=Cr(E1(this.node,!0),E1(this.node,!1))}unmount(){}}class y3 extends Ni{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Cr(wr(this.node.current,"focus",()=>this.onFocus()),wr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const aP=(t,e)=>e?t===e?!0:aP(t,e.parentElement):!1;function Sf(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,sh(n))}class w3 extends Ni{constructor(){super(...arguments),this.removeStartListeners=Dt,this.removeEndListeners=Dt,this.removeAccessibleListeners=Dt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Ir(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c,globalTapTarget:f}=this.node.getProps(),p=!f&&!aP(this.node.current,a.target)?c:u;p&&Ce.update(()=>p(a,l))},{passive:!(r.onTap||r.onPointerUp)}),o=Ir(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Cr(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Sf("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&Ce.postRender(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=wr(this.node.current,"keyup",o),Sf("down",(a,l)=>{this.startPress(a,l)})},n=wr(this.node.current,"keydown",e),r=()=>{this.isPressing&&Sf("cancel",(s,o)=>this.cancelPress(s,o))},i=wr(this.node.current,"blur",r);this.removeAccessibleListeners=Cr(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ce.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!$I()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ce.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Ir(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=wr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Cr(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const dm=new WeakMap,Cf=new WeakMap,x3=t=>{const e=dm.get(t.target);e&&e(t)},_3=t=>{t.forEach(x3)};function E3({root:t,...e}){const n=t||document;Cf.has(n)||Cf.set(n,{});const r=Cf.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(_3,{root:t,...e})),r[i]}function T3(t,e,n){const r=E3(e);return dm.set(t,n),r.observe(t),()=>{dm.delete(t),r.unobserve(t)}}const S3={some:0,all:1};class C3 extends Ni{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:S3[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),p=u?c:f;p&&p(l)};return T3(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(I3(e,n))&&this.startObserver()}unmount(){}}function I3({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const P3={inView:{Feature:C3},tap:{Feature:w3},focus:{Feature:y3},hover:{Feature:v3}},A3={layout:{ProjectionNode:oP,MeasureLayout:JI}},Nv=M.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),ah=M.createContext({}),Mv=typeof window<"u",lP=Mv?M.useLayoutEffect:M.useEffect,uP=M.createContext({strict:!1});function R3(t,e,n,r,i){var s,o;const{visualElement:a}=M.useContext(ah),l=M.useContext(uP),u=M.useContext(oh),c=M.useContext(Nv).reducedMotion,f=M.useRef();r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const p=f.current,h=M.useContext(XI);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&k3(f.current,n,i,h),M.useInsertionEffect(()=>{p&&p.update(n,u)});const g=n[MI],m=M.useRef(!!g&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,g))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,g)));return lP(()=>{p&&(window.MotionIsMounted=!0,p.updateFeatures(),Dv.render(p.render),m.current&&p.animationState&&p.animationState.animateChanges())}),M.useEffect(()=>{p&&(!m.current&&p.animationState&&p.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,g)}),m.current=!1))}),p}function k3(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:cP(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Ws(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function cP(t){if(t)return t.options.allowProjection!==!1?t.projection:cP(t.parent)}function b3(t,e,n){return M.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ws(n)&&(n.current=r))},[e])}function lh(t){return pl(t.animate)||hv.some(e=>ml(t[e]))}function dP(t){return!!(lh(t)||t.variants)}function D3(t,e){if(lh(t)){const{initial:n,animate:r}=t;return{initial:n===!1||ml(n)?n:void 0,animate:ml(r)?r:void 0}}return t.inherit!==!1?e:{}}function N3(t){const{initial:e,animate:n}=D3(t,M.useContext(ah));return M.useMemo(()=>({initial:e,animate:n}),[T1(e),T1(n)])}function T1(t){return Array.isArray(t)?t.join(" "):t}const S1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},To={};for(const t in S1)To[t]={isEnabled:e=>S1[t].some(n=>!!e[n])};function M3(t){for(const e in t)To[e]={...To[e],...t[e]}}const V3=Symbol.for("motionComponentSymbol");function L3({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&M3(t);function s(a,l){let u;const c={...M.useContext(Nv),...a,layoutId:O3(a)},{isStatic:f}=c,p=N3(a),h=r(a,f);if(!f&&Mv){F3();const g=j3(c);u=g.MeasureLayout,p.visualElement=R3(i,h,c,e,g.ProjectionNode)}return N.jsxs(ah.Provider,{value:p,children:[u&&p.visualElement?N.jsx(u,{visualElement:p.visualElement,...c}):null,n(i,a,b3(h,p.visualElement,l),h,f,p.visualElement)]})}const o=M.forwardRef(s);return o[V3]=i,o}function O3({layoutId:t}){const e=M.useContext(bv).id;return e&&t!==void 0?e+"-"+t:t}function F3(t,e){M.useContext(uP).strict}function j3(t){const{drag:e,layout:n}=To;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const B3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Vv(t){return typeof t!="string"||t.includes("-")?!1:!!(B3.indexOf(t)>-1||/[A-Z]/u.test(t))}function hP(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const fP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function pP(t,e,n,r){hP(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(fP.has(i)?i:ih(i),e.attrs[i])}function mP(t,{layout:e,layoutId:n}){return Di.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!pd[t]||t==="opacity")}function Lv(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(bt(i[o])||e.style&&bt(e.style[o])||mP(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return n&&i&&typeof i.willChange=="string"&&(n.applyWillChange=!1),s}function gP(t,e,n){const r=Lv(t,e,n);for(const i in t)if(bt(t[i])||bt(e[i])){const s=Wl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function Ov(t){const e=M.useRef(null);return e.current===null&&(e.current=t()),e.current}function U3(t){if(Di.has(t))return"transform";if(kI.has(t))return ih(t)}function z3({applyWillChange:t=!1,scrapeMotionValuesFromProps:e,createRenderState:n,onMount:r},i,s,o,a){const l={latestValues:$3(i,s,o,a?!1:t,e),renderState:n()};return r&&(l.mount=u=>r(i,u,l)),l}const vP=t=>(e,n)=>{const r=M.useContext(ah),i=M.useContext(oh),s=()=>z3(t,e,r,i,n);return n?s():Ov(s)};function C1(t,e,n){const r=Array.isArray(e)?e:[e];for(let i=0;i<r.length;i++){const s=cv(t,r[i]);if(s){const{transitionEnd:o,transition:a,...l}=s;n(l,o)}}}function $3(t,e,n,r,i){var s;const o={},a=new Set,l=r&&((s=t.style)===null||s===void 0?void 0:s.willChange)===void 0,u=i(t,{});for(const v in u)o[v]=fc(u[v]);let{initial:c,animate:f}=t;const p=lh(t),h=dP(t);e&&h&&!p&&t.inherit!==!1&&(c===void 0&&(c=e.initial),f===void 0&&(f=e.animate));let g=n?n.initial===!1:!1;g=g||c===!1;const m=g?f:c;return m&&typeof m!="boolean"&&!pl(m)&&C1(t,m,(v,w)=>{for(const x in v){let E=v[x];if(Array.isArray(E)){const k=g?E.length-1:0;E=E[k]}E!==null&&(o[x]=E)}for(const x in w)o[x]=w[x]}),l&&(f&&c!==!1&&!pl(f)&&C1(t,f,v=>{for(const w in v){const x=U3(w);x&&a.add(x)}}),a.size&&(o.willChange=Array.from(a).join(","))),o}const Fv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),yP=()=>({...Fv(),attrs:{}}),wP=(t,e)=>e&&typeof t=="number"?e.transform(t):t,W3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},H3=Wl.length;function K3(t,e,n){let r="",i=!0;for(let s=0;s<H3;s++){const o=Wl[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=wP(a,xv[o]);if(!l){i=!1;const c=W3[o]||o;r+=`${c}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function jv(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(Di.has(l)){o=!0;continue}else if(cI(l)){i[l]=u;continue}else{const c=wP(u,xv[l]);l.startsWith("origin")?(a=!0,s[l]=c):r[l]=c}}if(e.transform||(o||n?r.transform=K3(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}function I1(t,e,n){return typeof t=="string"?t:oe.transform(e+n*t)}function G3(t,e,n){const r=I1(e,t.x,t.width),i=I1(n,t.y,t.height);return`${r} ${i}`}const q3={offset:"stroke-dashoffset",array:"stroke-dasharray"},Q3={offset:"strokeDashoffset",array:"strokeDasharray"};function Y3(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?q3:Q3;t[s.offset]=oe.transform(-r);const o=oe.transform(e),a=oe.transform(n);t[s.array]=`${o} ${a}`}function Bv(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},c,f){if(jv(t,u,f),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:h,dimensions:g}=t;p.transform&&(g&&(h.transform=p.transform),delete p.transform),g&&(i!==void 0||s!==void 0||h.transform)&&(h.transformOrigin=G3(g,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&Y3(p,o,a,l,!1)}const Uv=t=>typeof t=="string"&&t.toLowerCase()==="svg",X3={useVisualState:vP({scrapeMotionValuesFromProps:gP,createRenderState:yP,onMount:(t,e,{renderState:n,latestValues:r})=>{Ce.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ce.render(()=>{Bv(n,r,Uv(e.tagName),t.transformTemplate),pP(e,n)})}})},J3={useVisualState:vP({applyWillChange:!0,scrapeMotionValuesFromProps:Lv,createRenderState:Fv})};function xP(t,e,n){for(const r in e)!bt(e[r])&&!mP(r,n)&&(t[r]=e[r])}function Z3({transformTemplate:t},e){return M.useMemo(()=>{const n=Fv();return jv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function eB(t,e){const n=t.style||{},r={};return xP(r,n,t),Object.assign(r,Z3(t,e)),r}function tB(t,e){const n={},r=eB(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const nB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function md(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||nB.has(t)}let _P=t=>!md(t);function rB(t){t&&(_P=e=>e.startsWith("on")?!md(e):t(e))}try{rB(require("@emotion/is-prop-valid").default)}catch{}function iB(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(_P(i)||n===!0&&md(i)||!e&&!md(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function sB(t,e,n,r){const i=M.useMemo(()=>{const s=yP();return Bv(s,e,Uv(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};xP(s,t.style,t),i.style={...s,...i.style}}return i}function oB(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(Vv(n)?sB:tB)(r,s,o,n),u=iB(r,typeof n=="string",t),c=n!==M.Fragment?{...u,...l,ref:i}:{},{children:f}=r,p=M.useMemo(()=>bt(f)?f.get():f,[f]);return M.createElement(n,{...c,children:p})}}function aB(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Vv(r)?X3:J3,preloadedFeatures:t,useRender:oB(i),createVisualElement:e,Component:r};return L3(o)}}const hm={current:null},EP={current:!1};function lB(){if(EP.current=!0,!!Mv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>hm.current=t.matches;t.addListener(e),e()}else hm.current=!1}function uB(t,e,n){for(const r in e){const i=e[r],s=n[r];if(bt(i))t.addValue(r,i);else if(bt(s))t.addValue(r,yl(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,yl(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const P1=new WeakMap,cB=[...fI,It,Ci],dB=t=>cB.find(hI(t)),A1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class hB{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=vv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=rr.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Ce.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=lh(n),this.isVariantNode=dP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const h=f[p];l[p]!==void 0&&bt(h)&&h.set(l[p],!1)}}mount(e){this.current=e,P1.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),EP.current||lB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){P1.delete(this.current),this.projection&&this.projection.unmount(),Ti(this.notifyUpdate),Ti(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Di.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ce.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in To){const n=To[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):He()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<A1.length;r++){const i=A1[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=uB(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=yl(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(lI(i)||aI(i))?i=parseFloat(i):!dB(i)&&Ci.test(n)&&(i=_I(e,n)),this.setBaseTarget(e,bt(i)?i.get():i)),bt(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=cv(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!bt(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new kv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class TP extends hB{constructor(){super(...arguments),this.KeyframeResolver=EI}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function fB(t){return window.getComputedStyle(t)}class pB extends TP{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=hP}readValueFromInstance(e,n){if(Di.has(n)){const r=_v(n);return r&&r.default||0}else{const r=fB(e),i=(cI(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return QI(e,n)}build(e,n,r){jv(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Lv(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;bt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class mB extends TP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=He}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Di.has(n)){const r=_v(n);return r&&r.default||0}return n=fP.has(n)?n:ih(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return gP(e,n,r)}build(e,n,r){Bv(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){pP(e,n,r,i)}mount(e){this.isSVGTag=Uv(e.tagName),super.mount(e)}}const gB=(t,e)=>Vv(t)?new mB(e):new pB(e,{allowProjection:t!==M.Fragment}),vB=aB({...sj,...P3,...g3,...A3},gB),If=XO(vB);class yB extends M.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function wB({children:t,isPresent:e}){const n=M.useId(),r=M.useRef(null),i=M.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=M.useContext(Nv);return M.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:u}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return s&&(c.nonce=s),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),N.jsx(yB,{isPresent:e,childRef:r,sizeRef:i,children:M.cloneElement(t,{ref:r})})}const xB=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=Ov(_B),l=M.useId(),u=M.useCallback(f=>{a.set(f,!0);for(const p of a.values())if(!p)return;r&&r()},[a,r]),c=M.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:u,register:f=>(a.set(f,!1),()=>a.delete(f))}),s?[Math.random(),u]:[n,u]);return M.useMemo(()=>{a.forEach((f,p)=>a.set(p,!1))},[n]),M.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=N.jsx(wB,{isPresent:n,children:t})),N.jsx(oh.Provider,{value:c,children:t})};function _B(){return new Map}const Bu=t=>t.key||"";function R1(t){const e=[];return M.Children.forEach(t,n=>{M.isValidElement(n)&&e.push(n)}),e}const EB=({children:t,exitBeforeEnter:e,custom:n,initial:r=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=M.useMemo(()=>R1(t),[t]),l=a.map(Bu),u=M.useRef(!0),c=M.useRef(a),f=Ov(()=>new Map),[p,h]=M.useState(a),[g,m]=M.useState(a);lP(()=>{u.current=!1,c.current=a;for(let x=0;x<g.length;x++){const E=Bu(g[x]);l.includes(E)?f.delete(E):f.get(E)!==!0&&f.set(E,!1)}},[g,l.length,l.join("-")]);const v=[];if(a!==p){let x=[...a];for(let E=0;E<g.length;E++){const k=g[E],S=Bu(k);l.includes(S)||(x.splice(E,0,k),v.push(k))}o==="wait"&&v.length&&(x=v),m(R1(x)),h(a);return}const{forceRender:w}=M.useContext(bv);return N.jsx(N.Fragment,{children:g.map(x=>{const E=Bu(x),k=a===g||l.includes(E),S=()=>{if(f.has(E))f.set(E,!0);else return;let R=!0;f.forEach(T=>{T||(R=!1)}),R&&(w==null||w(),m(c.current),i&&i())};return N.jsx(xB,{isPresent:k,initial:!u.current||r?void 0:!1,custom:k?void 0:n,presenceAffectsLayout:s,mode:o,onExitComplete:k?void 0:S,children:x},E)})})};function TB(){const[t,e]=M.useState([]);M.useEffect(()=>{const i=dl(kt,s=>{s?(async()=>{const a=Ml(Ze,`users/${s.uid}/Boards`),u=(await Vl(a)).docs.map(c=>({id:c.id,data:c.data()})).filter(c=>c.data.boardVisibility==="shareable");e(u)})().catch(a=>console.error("Error fetching lists:",a)):e([])});return()=>i()},[]);const[n,r]=M.useState(!1);return N.jsxs("div",{children:[n&&N.jsx("button",{onClick:()=>{r(!1)},className:"  absolute  text-slate-300  py-1 px-2 left-[90%] sm:left-[70%] sm:top-[-5%] top-[-10%] rounded-xl    text-2xl hover:bg-zinc-900",children:"✕"}),!n&&N.jsxs("div",{children:[N.jsx("h1",{className:"text-gray-300 mt-2 mb-2  p-1 rounded-md text-xl flex justify-center items-center gap-4",children:"Shared Boards"}),N.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 px-0 sm:px-7  md:grid-cols-3 mt-7 mx-4 lg:grid-cols-4 gap-6 overflow-y-auto max-h-[65vh] shadow-sm",children:[t.map(i=>N.jsx(YC,{id:i.id,title:i.data.title,background:i.data.background,backgroundImage:i.data.backgroundImage,boardVisibility:i.data.boardVisibility},i.id)),N.jsx("div",{onClick:()=>{r(!0)},className:" bg-neutral-700 opacity-90 cursor-pointer hover:opacity-70 border-gray-200 p-5 rounded-sm",children:N.jsx("h2",{className:"text-gray-400 text-center text-sm ",children:"Create new board"})})]})]}),n&&N.jsx(QC,{})]})}var SP={exports:{}};/*!
 * matter-js 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(t,e){(function(r,i){t.exports=i()})(Eh,function(){return function(n){var r={};function i(s){if(r[s])return r[s].exports;var o=r[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=r,i.d=function(s,o,a){i.o(s,o)||Object.defineProperty(s,o,{enumerable:!0,get:a})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,o){if(o&1&&(s=i(s)),o&8||o&4&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),o&2&&typeof s!="string")for(var l in s)i.d(a,l,(function(u){return s[u]}).bind(null,l));return a},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="",i(i.s=20)}([function(n,r){var i={};n.exports=i,function(){i._baseDelta=1e3/60,i._nextId=0,i._seed=0,i._nowStartTime=+new Date,i._warnedOnce={},i._decomp=null,i.extend=function(o,a){var l,u;typeof a=="boolean"?(l=2,u=a):(l=1,u=!0);for(var c=l;c<arguments.length;c++){var f=arguments[c];if(f)for(var p in f)u&&f[p]&&f[p].constructor===Object&&(!o[p]||o[p].constructor===Object)?(o[p]=o[p]||{},i.extend(o[p],u,f[p])):o[p]=f[p]}return o},i.clone=function(o,a){return i.extend({},a,o)},i.keys=function(o){if(Object.keys)return Object.keys(o);var a=[];for(var l in o)a.push(l);return a},i.values=function(o){var a=[];if(Object.keys){for(var l=Object.keys(o),u=0;u<l.length;u++)a.push(o[l[u]]);return a}for(var c in o)a.push(o[c]);return a},i.get=function(o,a,l,u){a=a.split(".").slice(l,u);for(var c=0;c<a.length;c+=1)o=o[a[c]];return o},i.set=function(o,a,l,u,c){var f=a.split(".").slice(u,c);return i.get(o,a,0,-1)[f[f.length-1]]=l,l},i.shuffle=function(o){for(var a=o.length-1;a>0;a--){var l=Math.floor(i.random()*(a+1)),u=o[a];o[a]=o[l],o[l]=u}return o},i.choose=function(o){return o[Math.floor(i.random()*o.length)]},i.isElement=function(o){return typeof HTMLElement<"u"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},i.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},i.isFunction=function(o){return typeof o=="function"},i.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},i.isString=function(o){return toString.call(o)==="[object String]"},i.clamp=function(o,a,l){return o<a?a:o>l?l:o},i.sign=function(o){return o<0?-1:1},i.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-i._nowStartTime},i.random=function(o,a){return o=typeof o<"u"?o:0,a=typeof a<"u"?a:1,o+s()*(a-o)};var s=function(){return i._seed=(i._seed*9301+49297)%233280,i._seed/233280};i.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},i.logLevel=1,i.log=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.info=function(){console&&i.logLevel>0&&i.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warn=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warnOnce=function(){var o=Array.prototype.slice.call(arguments).join(" ");i._warnedOnce[o]||(i.warn(o),i._warnedOnce[o]=!0)},i.deprecated=function(o,a,l){o[a]=i.chain(function(){i.warnOnce("🔅 deprecated 🔅",l)},o[a])},i.nextId=function(){return i._nextId++},i.indexOf=function(o,a){if(o.indexOf)return o.indexOf(a);for(var l=0;l<o.length;l++)if(o[l]===a)return l;return-1},i.map=function(o,a){if(o.map)return o.map(a);for(var l=[],u=0;u<o.length;u+=1)l.push(a(o[u]));return l},i.topologicalSort=function(o){var a=[],l=[],u=[];for(var c in o)!l[c]&&!u[c]&&i._topologicalSort(c,l,u,o,a);return a},i._topologicalSort=function(o,a,l,u,c){var f=u[o]||[];l[o]=!0;for(var p=0;p<f.length;p+=1){var h=f[p];l[h]||a[h]||i._topologicalSort(h,a,l,u,c)}l[o]=!1,a[o]=!0,c.push(o)},i.chain=function(){for(var o=[],a=0;a<arguments.length;a+=1){var l=arguments[a];l._chained?o.push.apply(o,l._chained):o.push(l)}var u=function(){for(var c,f=new Array(arguments.length),p=0,h=arguments.length;p<h;p++)f[p]=arguments[p];for(p=0;p<o.length;p+=1){var g=o[p].apply(c,f);typeof g<"u"&&(c=g)}return c};return u._chained=o,u},i.chainPathBefore=function(o,a,l){return i.set(o,a,i.chain(l,i.get(o,a)))},i.chainPathAfter=function(o,a,l){return i.set(o,a,i.chain(i.get(o,a),l))},i.setDecomp=function(o){i._decomp=o},i.getDecomp=function(){var o=i._decomp;try{!o&&typeof window<"u"&&(o=window.decomp),!o&&typeof Eh<"u"&&(o=Eh.decomp)}catch{o=null}return o}}()},function(n,r){var i={};n.exports=i,function(){i.create=function(s){var o={min:{x:0,y:0},max:{x:0,y:0}};return s&&i.update(o,s),o},i.update=function(s,o,a){s.min.x=1/0,s.max.x=-1/0,s.min.y=1/0,s.max.y=-1/0;for(var l=0;l<o.length;l++){var u=o[l];u.x>s.max.x&&(s.max.x=u.x),u.x<s.min.x&&(s.min.x=u.x),u.y>s.max.y&&(s.max.y=u.y),u.y<s.min.y&&(s.min.y=u.y)}a&&(a.x>0?s.max.x+=a.x:s.min.x+=a.x,a.y>0?s.max.y+=a.y:s.min.y+=a.y)},i.contains=function(s,o){return o.x>=s.min.x&&o.x<=s.max.x&&o.y>=s.min.y&&o.y<=s.max.y},i.overlaps=function(s,o){return s.min.x<=o.max.x&&s.max.x>=o.min.x&&s.max.y>=o.min.y&&s.min.y<=o.max.y},i.translate=function(s,o){s.min.x+=o.x,s.max.x+=o.x,s.min.y+=o.y,s.max.y+=o.y},i.shift=function(s,o){var a=s.max.x-s.min.x,l=s.max.y-s.min.y;s.min.x=o.x,s.max.x=o.x+a,s.min.y=o.y,s.max.y=o.y+l}}()},function(n,r){var i={};n.exports=i,function(){i.create=function(s,o){return{x:s||0,y:o||0}},i.clone=function(s){return{x:s.x,y:s.y}},i.magnitude=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},i.magnitudeSquared=function(s){return s.x*s.x+s.y*s.y},i.rotate=function(s,o,a){var l=Math.cos(o),u=Math.sin(o);a||(a={});var c=s.x*l-s.y*u;return a.y=s.x*u+s.y*l,a.x=c,a},i.rotateAbout=function(s,o,a,l){var u=Math.cos(o),c=Math.sin(o);l||(l={});var f=a.x+((s.x-a.x)*u-(s.y-a.y)*c);return l.y=a.y+((s.x-a.x)*c+(s.y-a.y)*u),l.x=f,l},i.normalise=function(s){var o=i.magnitude(s);return o===0?{x:0,y:0}:{x:s.x/o,y:s.y/o}},i.dot=function(s,o){return s.x*o.x+s.y*o.y},i.cross=function(s,o){return s.x*o.y-s.y*o.x},i.cross3=function(s,o,a){return(o.x-s.x)*(a.y-s.y)-(o.y-s.y)*(a.x-s.x)},i.add=function(s,o,a){return a||(a={}),a.x=s.x+o.x,a.y=s.y+o.y,a},i.sub=function(s,o,a){return a||(a={}),a.x=s.x-o.x,a.y=s.y-o.y,a},i.mult=function(s,o){return{x:s.x*o,y:s.y*o}},i.div=function(s,o){return{x:s.x/o,y:s.y/o}},i.perp=function(s,o){return o=o===!0?-1:1,{x:o*-s.y,y:o*s.x}},i.neg=function(s){return{x:-s.x,y:-s.y}},i.angle=function(s,o){return Math.atan2(o.y-s.y,o.x-s.x)},i._temp=[i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]}()},function(n,r,i){var s={};n.exports=s;var o=i(2),a=i(0);(function(){s.create=function(l,u){for(var c=[],f=0;f<l.length;f++){var p=l[f],h={x:p.x,y:p.y,index:f,body:u,isInternal:!1};c.push(h)}return c},s.fromPath=function(l,u){var c=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return l.replace(c,function(p,h,g){f.push({x:parseFloat(h),y:parseFloat(g)})}),s.create(f,u)},s.centre=function(l){for(var u=s.area(l,!0),c={x:0,y:0},f,p,h,g=0;g<l.length;g++)h=(g+1)%l.length,f=o.cross(l[g],l[h]),p=o.mult(o.add(l[g],l[h]),f),c=o.add(c,p);return o.div(c,6*u)},s.mean=function(l){for(var u={x:0,y:0},c=0;c<l.length;c++)u.x+=l[c].x,u.y+=l[c].y;return o.div(u,l.length)},s.area=function(l,u){for(var c=0,f=l.length-1,p=0;p<l.length;p++)c+=(l[f].x-l[p].x)*(l[f].y+l[p].y),f=p;return u?c/2:Math.abs(c)/2},s.inertia=function(l,u){for(var c=0,f=0,p=l,h,g,m=0;m<p.length;m++)g=(m+1)%p.length,h=Math.abs(o.cross(p[g],p[m])),c+=h*(o.dot(p[g],p[g])+o.dot(p[g],p[m])+o.dot(p[m],p[m])),f+=h;return u/6*(c/f)},s.translate=function(l,u,c){c=typeof c<"u"?c:1;var f=l.length,p=u.x*c,h=u.y*c,g;for(g=0;g<f;g++)l[g].x+=p,l[g].y+=h;return l},s.rotate=function(l,u,c){if(u!==0){var f=Math.cos(u),p=Math.sin(u),h=c.x,g=c.y,m=l.length,v,w,x,E;for(E=0;E<m;E++)v=l[E],w=v.x-h,x=v.y-g,v.x=h+(w*f-x*p),v.y=g+(w*p+x*f);return l}},s.contains=function(l,u){for(var c=u.x,f=u.y,p=l.length,h=l[p-1],g,m=0;m<p;m++){if(g=l[m],(c-h.x)*(g.y-h.y)+(f-h.y)*(h.x-g.x)>0)return!1;h=g}return!0},s.scale=function(l,u,c,f){if(u===1&&c===1)return l;f=f||s.centre(l);for(var p,h,g=0;g<l.length;g++)p=l[g],h=o.sub(p,f),l[g].x=f.x+h.x*u,l[g].y=f.y+h.y*c;return l},s.chamfer=function(l,u,c,f,p){typeof u=="number"?u=[u]:u=u||[8],c=typeof c<"u"?c:-1,f=f||2,p=p||14;for(var h=[],g=0;g<l.length;g++){var m=l[g-1>=0?g-1:l.length-1],v=l[g],w=l[(g+1)%l.length],x=u[g<u.length?g:u.length-1];if(x===0){h.push(v);continue}var E=o.normalise({x:v.y-m.y,y:m.x-v.x}),k=o.normalise({x:w.y-v.y,y:v.x-w.x}),S=Math.sqrt(2*Math.pow(x,2)),R=o.mult(a.clone(E),x),T=o.normalise(o.mult(o.add(E,k),.5)),y=o.sub(v,o.mult(T,S)),I=c;c===-1&&(I=Math.pow(x,.32)*1.75),I=a.clamp(I,f,p),I%2===1&&(I+=1);for(var C=Math.acos(o.dot(E,k)),A=C/I,b=0;b<I;b++)h.push(o.add(o.rotate(R,A*b),y))}return h},s.clockwiseSort=function(l){var u=s.mean(l);return l.sort(function(c,f){return o.angle(u,c)-o.angle(u,f)}),l},s.isConvex=function(l){var u=0,c=l.length,f,p,h,g;if(c<3)return null;for(f=0;f<c;f++)if(p=(f+1)%c,h=(f+2)%c,g=(l[p].x-l[f].x)*(l[h].y-l[p].y),g-=(l[p].y-l[f].y)*(l[h].x-l[p].x),g<0?u|=1:g>0&&(u|=2),u===3)return!1;return u!==0?!0:null},s.hull=function(l){var u=[],c=[],f,p;for(l=l.slice(0),l.sort(function(h,g){var m=h.x-g.x;return m!==0?m:h.y-g.y}),p=0;p<l.length;p+=1){for(f=l[p];c.length>=2&&o.cross3(c[c.length-2],c[c.length-1],f)<=0;)c.pop();c.push(f)}for(p=l.length-1;p>=0;p-=1){for(f=l[p];u.length>=2&&o.cross3(u[u.length-2],u[u.length-1],f)<=0;)u.pop();u.push(f)}return u.pop(),c.pop(),u.concat(c)}})()},function(n,r,i){var s={};n.exports=s;var o=i(3),a=i(2),l=i(7),u=i(0),c=i(1),f=i(11);(function(){s._timeCorrection=!0,s._inertiaScale=4,s._nextCollidingGroupId=1,s._nextNonCollidingGroupId=-1,s._nextCategory=1,s._baseDelta=1e3/60,s.create=function(h){var g={id:u.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},m=u.extend(g,h);return p(m,h),m},s.nextGroup=function(h){return h?s._nextNonCollidingGroupId--:s._nextCollidingGroupId++},s.nextCategory=function(){return s._nextCategory=s._nextCategory<<1,s._nextCategory};var p=function(h,g){g=g||{},s.set(h,{bounds:h.bounds||c.create(h.vertices),positionPrev:h.positionPrev||a.clone(h.position),anglePrev:h.anglePrev||h.angle,vertices:h.vertices,parts:h.parts||[h],isStatic:h.isStatic,isSleeping:h.isSleeping,parent:h.parent||h}),o.rotate(h.vertices,h.angle,h.position),f.rotate(h.axes,h.angle),c.update(h.bounds,h.vertices,h.velocity),s.set(h,{axes:g.axes||h.axes,area:g.area||h.area,mass:g.mass||h.mass,inertia:g.inertia||h.inertia});var m=h.isStatic?"#14151f":u.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),v=h.isStatic?"#555":"#ccc",w=h.isStatic&&h.render.fillStyle===null?1:0;h.render.fillStyle=h.render.fillStyle||m,h.render.strokeStyle=h.render.strokeStyle||v,h.render.lineWidth=h.render.lineWidth||w,h.render.sprite.xOffset+=-(h.bounds.min.x-h.position.x)/(h.bounds.max.x-h.bounds.min.x),h.render.sprite.yOffset+=-(h.bounds.min.y-h.position.y)/(h.bounds.max.y-h.bounds.min.y)};s.set=function(h,g,m){var v;typeof g=="string"&&(v=g,g={},g[v]=m);for(v in g)if(Object.prototype.hasOwnProperty.call(g,v))switch(m=g[v],v){case"isStatic":s.setStatic(h,m);break;case"isSleeping":l.set(h,m);break;case"mass":s.setMass(h,m);break;case"density":s.setDensity(h,m);break;case"inertia":s.setInertia(h,m);break;case"vertices":s.setVertices(h,m);break;case"position":s.setPosition(h,m);break;case"angle":s.setAngle(h,m);break;case"velocity":s.setVelocity(h,m);break;case"angularVelocity":s.setAngularVelocity(h,m);break;case"speed":s.setSpeed(h,m);break;case"angularSpeed":s.setAngularSpeed(h,m);break;case"parts":s.setParts(h,m);break;case"centre":s.setCentre(h,m);break;default:h[v]=m}},s.setStatic=function(h,g){for(var m=0;m<h.parts.length;m++){var v=h.parts[m];g?(v.isStatic||(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia}),v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null),v.isStatic=g}},s.setMass=function(h,g){var m=h.inertia/(h.mass/6);h.inertia=m*(g/6),h.inverseInertia=1/h.inertia,h.mass=g,h.inverseMass=1/h.mass,h.density=h.mass/h.area},s.setDensity=function(h,g){s.setMass(h,g*h.area),h.density=g},s.setInertia=function(h,g){h.inertia=g,h.inverseInertia=1/h.inertia},s.setVertices=function(h,g){g[0].body===h?h.vertices=g:h.vertices=o.create(g,h),h.axes=f.fromVertices(h.vertices),h.area=o.area(h.vertices),s.setMass(h,h.density*h.area);var m=o.centre(h.vertices);o.translate(h.vertices,m,-1),s.setInertia(h,s._inertiaScale*o.inertia(h.vertices,h.mass)),o.translate(h.vertices,h.position),c.update(h.bounds,h.vertices,h.velocity)},s.setParts=function(h,g,m){var v;for(g=g.slice(0),h.parts.length=0,h.parts.push(h),h.parent=h,v=0;v<g.length;v++){var w=g[v];w!==h&&(w.parent=h,h.parts.push(w))}if(h.parts.length!==1){if(m=typeof m<"u"?m:!0,m){var x=[];for(v=0;v<g.length;v++)x=x.concat(g[v].vertices);o.clockwiseSort(x);var E=o.hull(x),k=o.centre(E);s.setVertices(h,E),o.translate(h.vertices,k)}var S=s._totalProperties(h);h.area=S.area,h.parent=h,h.position.x=S.centre.x,h.position.y=S.centre.y,h.positionPrev.x=S.centre.x,h.positionPrev.y=S.centre.y,s.setMass(h,S.mass),s.setInertia(h,S.inertia),s.setPosition(h,S.centre)}},s.setCentre=function(h,g,m){m?(h.positionPrev.x+=g.x,h.positionPrev.y+=g.y,h.position.x+=g.x,h.position.y+=g.y):(h.positionPrev.x=g.x-(h.position.x-h.positionPrev.x),h.positionPrev.y=g.y-(h.position.y-h.positionPrev.y),h.position.x=g.x,h.position.y=g.y)},s.setPosition=function(h,g,m){var v=a.sub(g,h.position);m?(h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.velocity.x=v.x,h.velocity.y=v.y,h.speed=a.magnitude(v)):(h.positionPrev.x+=v.x,h.positionPrev.y+=v.y);for(var w=0;w<h.parts.length;w++){var x=h.parts[w];x.position.x+=v.x,x.position.y+=v.y,o.translate(x.vertices,v),c.update(x.bounds,x.vertices,h.velocity)}},s.setAngle=function(h,g,m){var v=g-h.angle;m?(h.anglePrev=h.angle,h.angularVelocity=v,h.angularSpeed=Math.abs(v)):h.anglePrev+=v;for(var w=0;w<h.parts.length;w++){var x=h.parts[w];x.angle+=v,o.rotate(x.vertices,v,h.position),f.rotate(x.axes,v),c.update(x.bounds,x.vertices,h.velocity),w>0&&a.rotateAbout(x.position,v,h.position,x.position)}},s.setVelocity=function(h,g){var m=h.deltaTime/s._baseDelta;h.positionPrev.x=h.position.x-g.x*m,h.positionPrev.y=h.position.y-g.y*m,h.velocity.x=(h.position.x-h.positionPrev.x)/m,h.velocity.y=(h.position.y-h.positionPrev.y)/m,h.speed=a.magnitude(h.velocity)},s.getVelocity=function(h){var g=s._baseDelta/h.deltaTime;return{x:(h.position.x-h.positionPrev.x)*g,y:(h.position.y-h.positionPrev.y)*g}},s.getSpeed=function(h){return a.magnitude(s.getVelocity(h))},s.setSpeed=function(h,g){s.setVelocity(h,a.mult(a.normalise(s.getVelocity(h)),g))},s.setAngularVelocity=function(h,g){var m=h.deltaTime/s._baseDelta;h.anglePrev=h.angle-g*m,h.angularVelocity=(h.angle-h.anglePrev)/m,h.angularSpeed=Math.abs(h.angularVelocity)},s.getAngularVelocity=function(h){return(h.angle-h.anglePrev)*s._baseDelta/h.deltaTime},s.getAngularSpeed=function(h){return Math.abs(s.getAngularVelocity(h))},s.setAngularSpeed=function(h,g){s.setAngularVelocity(h,u.sign(s.getAngularVelocity(h))*g)},s.translate=function(h,g,m){s.setPosition(h,a.add(h.position,g),m)},s.rotate=function(h,g,m,v){if(!m)s.setAngle(h,h.angle+g,v);else{var w=Math.cos(g),x=Math.sin(g),E=h.position.x-m.x,k=h.position.y-m.y;s.setPosition(h,{x:m.x+(E*w-k*x),y:m.y+(E*x+k*w)},v),s.setAngle(h,h.angle+g,v)}},s.scale=function(h,g,m,v){var w=0,x=0;v=v||h.position;for(var E=0;E<h.parts.length;E++){var k=h.parts[E];o.scale(k.vertices,g,m,v),k.axes=f.fromVertices(k.vertices),k.area=o.area(k.vertices),s.setMass(k,h.density*k.area),o.translate(k.vertices,{x:-k.position.x,y:-k.position.y}),s.setInertia(k,s._inertiaScale*o.inertia(k.vertices,k.mass)),o.translate(k.vertices,{x:k.position.x,y:k.position.y}),E>0&&(w+=k.area,x+=k.inertia),k.position.x=v.x+(k.position.x-v.x)*g,k.position.y=v.y+(k.position.y-v.y)*m,c.update(k.bounds,k.vertices,h.velocity)}h.parts.length>1&&(h.area=w,h.isStatic||(s.setMass(h,h.density*w),s.setInertia(h,x))),h.circleRadius&&(g===m?h.circleRadius*=g:h.circleRadius=null)},s.update=function(h,g){g=(typeof g<"u"?g:1e3/60)*h.timeScale;var m=g*g,v=s._timeCorrection?g/(h.deltaTime||g):1,w=1-h.frictionAir*(g/u._baseDelta),x=(h.position.x-h.positionPrev.x)*v,E=(h.position.y-h.positionPrev.y)*v;h.velocity.x=x*w+h.force.x/h.mass*m,h.velocity.y=E*w+h.force.y/h.mass*m,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.position.x+=h.velocity.x,h.position.y+=h.velocity.y,h.deltaTime=g,h.angularVelocity=(h.angle-h.anglePrev)*w*v+h.torque/h.inertia*m,h.anglePrev=h.angle,h.angle+=h.angularVelocity;for(var k=0;k<h.parts.length;k++){var S=h.parts[k];o.translate(S.vertices,h.velocity),k>0&&(S.position.x+=h.velocity.x,S.position.y+=h.velocity.y),h.angularVelocity!==0&&(o.rotate(S.vertices,h.angularVelocity,h.position),f.rotate(S.axes,h.angularVelocity),k>0&&a.rotateAbout(S.position,h.angularVelocity,h.position,S.position)),c.update(S.bounds,S.vertices,h.velocity)}},s.updateVelocities=function(h){var g=s._baseDelta/h.deltaTime,m=h.velocity;m.x=(h.position.x-h.positionPrev.x)*g,m.y=(h.position.y-h.positionPrev.y)*g,h.speed=Math.sqrt(m.x*m.x+m.y*m.y),h.angularVelocity=(h.angle-h.anglePrev)*g,h.angularSpeed=Math.abs(h.angularVelocity)},s.applyForce=function(h,g,m){var v={x:g.x-h.position.x,y:g.y-h.position.y};h.force.x+=m.x,h.force.y+=m.y,h.torque+=v.x*m.y-v.y*m.x},s._totalProperties=function(h){for(var g={mass:0,area:0,inertia:0,centre:{x:0,y:0}},m=h.parts.length===1?0:1;m<h.parts.length;m++){var v=h.parts[m],w=v.mass!==1/0?v.mass:1;g.mass+=w,g.area+=v.area,g.inertia+=v.inertia,g.centre=a.add(g.centre,a.mult(v.position,w))}return g.centre=a.div(g.centre,g.mass),g}})()},function(n,r,i){var s={};n.exports=s;var o=i(0);(function(){s.on=function(a,l,u){for(var c=l.split(" "),f,p=0;p<c.length;p++)f=c[p],a.events=a.events||{},a.events[f]=a.events[f]||[],a.events[f].push(u);return u},s.off=function(a,l,u){if(!l){a.events={};return}typeof l=="function"&&(u=l,l=o.keys(a.events).join(" "));for(var c=l.split(" "),f=0;f<c.length;f++){var p=a.events[c[f]],h=[];if(u&&p)for(var g=0;g<p.length;g++)p[g]!==u&&h.push(p[g]);a.events[c[f]]=h}},s.trigger=function(a,l,u){var c,f,p,h,g=a.events;if(g&&o.keys(g).length>0){u||(u={}),c=l.split(" ");for(var m=0;m<c.length;m++)if(f=c[m],p=g[f],p){h=o.clone(u,!1),h.name=f,h.source=a;for(var v=0;v<p.length;v++)p[v].apply(a,[h])}}}})()},function(n,r,i){var s={};n.exports=s;var o=i(5),a=i(0),l=i(1),u=i(4);(function(){s.create=function(c){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},c)},s.setModified=function(c,f,p,h){if(c.isModified=f,f&&c.cache&&(c.cache.allBodies=null,c.cache.allConstraints=null,c.cache.allComposites=null),p&&c.parent&&s.setModified(c.parent,f,p,h),h)for(var g=0;g<c.composites.length;g++){var m=c.composites[g];s.setModified(m,f,p,h)}},s.add=function(c,f){var p=[].concat(f);o.trigger(c,"beforeAdd",{object:f});for(var h=0;h<p.length;h++){var g=p[h];switch(g.type){case"body":if(g.parent!==g){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}s.addBody(c,g);break;case"constraint":s.addConstraint(c,g);break;case"composite":s.addComposite(c,g);break;case"mouseConstraint":s.addConstraint(c,g.constraint);break}}return o.trigger(c,"afterAdd",{object:f}),c},s.remove=function(c,f,p){var h=[].concat(f);o.trigger(c,"beforeRemove",{object:f});for(var g=0;g<h.length;g++){var m=h[g];switch(m.type){case"body":s.removeBody(c,m,p);break;case"constraint":s.removeConstraint(c,m,p);break;case"composite":s.removeComposite(c,m,p);break;case"mouseConstraint":s.removeConstraint(c,m.constraint);break}}return o.trigger(c,"afterRemove",{object:f}),c},s.addComposite=function(c,f){return c.composites.push(f),f.parent=c,s.setModified(c,!0,!0,!1),c},s.removeComposite=function(c,f,p){var h=a.indexOf(c.composites,f);if(h!==-1){var g=s.allBodies(f);s.removeCompositeAt(c,h);for(var m=0;m<g.length;m++)g[m].sleepCounter=0}if(p)for(var m=0;m<c.composites.length;m++)s.removeComposite(c.composites[m],f,!0);return c},s.removeCompositeAt=function(c,f){return c.composites.splice(f,1),s.setModified(c,!0,!0,!1),c},s.addBody=function(c,f){return c.bodies.push(f),s.setModified(c,!0,!0,!1),c},s.removeBody=function(c,f,p){var h=a.indexOf(c.bodies,f);if(h!==-1&&(s.removeBodyAt(c,h),f.sleepCounter=0),p)for(var g=0;g<c.composites.length;g++)s.removeBody(c.composites[g],f,!0);return c},s.removeBodyAt=function(c,f){return c.bodies.splice(f,1),s.setModified(c,!0,!0,!1),c},s.addConstraint=function(c,f){return c.constraints.push(f),s.setModified(c,!0,!0,!1),c},s.removeConstraint=function(c,f,p){var h=a.indexOf(c.constraints,f);if(h!==-1&&s.removeConstraintAt(c,h),p)for(var g=0;g<c.composites.length;g++)s.removeConstraint(c.composites[g],f,!0);return c},s.removeConstraintAt=function(c,f){return c.constraints.splice(f,1),s.setModified(c,!0,!0,!1),c},s.clear=function(c,f,p){if(p)for(var h=0;h<c.composites.length;h++)s.clear(c.composites[h],f,!0);return f?c.bodies=c.bodies.filter(function(g){return g.isStatic}):c.bodies.length=0,c.constraints.length=0,c.composites.length=0,s.setModified(c,!0,!0,!1),c},s.allBodies=function(c){if(c.cache&&c.cache.allBodies)return c.cache.allBodies;for(var f=[].concat(c.bodies),p=0;p<c.composites.length;p++)f=f.concat(s.allBodies(c.composites[p]));return c.cache&&(c.cache.allBodies=f),f},s.allConstraints=function(c){if(c.cache&&c.cache.allConstraints)return c.cache.allConstraints;for(var f=[].concat(c.constraints),p=0;p<c.composites.length;p++)f=f.concat(s.allConstraints(c.composites[p]));return c.cache&&(c.cache.allConstraints=f),f},s.allComposites=function(c){if(c.cache&&c.cache.allComposites)return c.cache.allComposites;for(var f=[].concat(c.composites),p=0;p<c.composites.length;p++)f=f.concat(s.allComposites(c.composites[p]));return c.cache&&(c.cache.allComposites=f),f},s.get=function(c,f,p){var h,g;switch(p){case"body":h=s.allBodies(c);break;case"constraint":h=s.allConstraints(c);break;case"composite":h=s.allComposites(c).concat(c);break}return h?(g=h.filter(function(m){return m.id.toString()===f.toString()}),g.length===0?null:g[0]):null},s.move=function(c,f,p){return s.remove(c,f),s.add(p,f),c},s.rebase=function(c){for(var f=s.allBodies(c).concat(s.allConstraints(c)).concat(s.allComposites(c)),p=0;p<f.length;p++)f[p].id=a.nextId();return c},s.translate=function(c,f,p){for(var h=p?s.allBodies(c):c.bodies,g=0;g<h.length;g++)u.translate(h[g],f);return c},s.rotate=function(c,f,p,h){for(var g=Math.cos(f),m=Math.sin(f),v=h?s.allBodies(c):c.bodies,w=0;w<v.length;w++){var x=v[w],E=x.position.x-p.x,k=x.position.y-p.y;u.setPosition(x,{x:p.x+(E*g-k*m),y:p.y+(E*m+k*g)}),u.rotate(x,f)}return c},s.scale=function(c,f,p,h,g){for(var m=g?s.allBodies(c):c.bodies,v=0;v<m.length;v++){var w=m[v],x=w.position.x-h.x,E=w.position.y-h.y;u.setPosition(w,{x:h.x+x*f,y:h.y+E*p}),u.scale(w,f,p)}return c},s.bounds=function(c){for(var f=s.allBodies(c),p=[],h=0;h<f.length;h+=1){var g=f[h];p.push(g.bounds.min,g.bounds.max)}return l.create(p)}})()},function(n,r,i){var s={};n.exports=s;var o=i(4),a=i(5),l=i(0);(function(){s._motionWakeThreshold=.18,s._motionSleepThreshold=.08,s._minBias=.9,s.update=function(u,c){for(var f=c/l._baseDelta,p=s._motionSleepThreshold,h=0;h<u.length;h++){var g=u[h],m=o.getSpeed(g),v=o.getAngularSpeed(g),w=m*m+v*v;if(g.force.x!==0||g.force.y!==0){s.set(g,!1);continue}var x=Math.min(g.motion,w),E=Math.max(g.motion,w);g.motion=s._minBias*x+(1-s._minBias)*E,g.sleepThreshold>0&&g.motion<p?(g.sleepCounter+=1,g.sleepCounter>=g.sleepThreshold/f&&s.set(g,!0)):g.sleepCounter>0&&(g.sleepCounter-=1)}},s.afterCollisions=function(u){for(var c=s._motionSleepThreshold,f=0;f<u.length;f++){var p=u[f];if(p.isActive){var h=p.collision,g=h.bodyA.parent,m=h.bodyB.parent;if(!(g.isSleeping&&m.isSleeping||g.isStatic||m.isStatic)&&(g.isSleeping||m.isSleeping)){var v=g.isSleeping&&!g.isStatic?g:m,w=v===g?m:g;!v.isStatic&&w.motion>c&&s.set(v,!1)}}}},s.set=function(u,c){var f=u.isSleeping;c?(u.isSleeping=!0,u.sleepCounter=u.sleepThreshold,u.positionImpulse.x=0,u.positionImpulse.y=0,u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.anglePrev=u.angle,u.speed=0,u.angularSpeed=0,u.motion=0,f||a.trigger(u,"sleepStart")):(u.isSleeping=!1,u.sleepCounter=0,f&&a.trigger(u,"sleepEnd"))}})()},function(n,r,i){var s={};n.exports=s;var o=i(3),a=i(9);(function(){var l=[],u={overlap:0,axis:null},c={overlap:0,axis:null};s.create=function(f,p){return{pair:null,collided:!1,bodyA:f,bodyB:p,parentA:f.parent,parentB:p.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},s.collides=function(f,p,h){if(s._overlapAxes(u,f.vertices,p.vertices,f.axes),u.overlap<=0||(s._overlapAxes(c,p.vertices,f.vertices,p.axes),c.overlap<=0))return null;var g=h&&h.table[a.id(f,p)],m;g?m=g.collision:(m=s.create(f,p),m.collided=!0,m.bodyA=f.id<p.id?f:p,m.bodyB=f.id<p.id?p:f,m.parentA=m.bodyA.parent,m.parentB=m.bodyB.parent),f=m.bodyA,p=m.bodyB;var v;u.overlap<c.overlap?v=u:v=c;var w=m.normal,x=m.tangent,E=m.penetration,k=m.supports,S=v.overlap,R=v.axis,T=R.x,y=R.y,I=p.position.x-f.position.x,C=p.position.y-f.position.y;T*I+y*C>=0&&(T=-T,y=-y),w.x=T,w.y=y,x.x=-y,x.y=T,E.x=T*S,E.y=y*S,m.depth=S;var A=s._findSupports(f,p,w,1),b=0;if(o.contains(f.vertices,A[0])&&(k[b++]=A[0]),o.contains(f.vertices,A[1])&&(k[b++]=A[1]),b<2){var D=s._findSupports(p,f,w,-1);o.contains(p.vertices,D[0])&&(k[b++]=D[0]),b<2&&o.contains(p.vertices,D[1])&&(k[b++]=D[1])}return b===0&&(k[b++]=A[0]),m.supportCount=b,m},s._overlapAxes=function(f,p,h,g){var m=p.length,v=h.length,w=p[0].x,x=p[0].y,E=h[0].x,k=h[0].y,S=g.length,R=Number.MAX_VALUE,T=0,y,I,C,A,b,D;for(b=0;b<S;b++){var B=g[b],O=B.x,K=B.y,U=w*O+x*K,F=E*O+k*K,z=U,Q=F;for(D=1;D<m;D+=1)A=p[D].x*O+p[D].y*K,A>z?z=A:A<U&&(U=A);for(D=1;D<v;D+=1)A=h[D].x*O+h[D].y*K,A>Q?Q=A:A<F&&(F=A);if(I=z-F,C=Q-U,y=I<C?I:C,y<R&&(R=y,T=b,y<=0))break}f.axis=g[T],f.overlap=R},s._findSupports=function(f,p,h,g){var m=p.vertices,v=m.length,w=f.position.x,x=f.position.y,E=h.x*g,k=h.y*g,S=m[0],R=S,T=E*(w-R.x)+k*(x-R.y),y,I,C;for(C=1;C<v;C+=1)R=m[C],I=E*(w-R.x)+k*(x-R.y),I<T&&(T=I,S=R);return y=m[(v+S.index-1)%v],T=E*(w-y.x)+k*(x-y.y),R=m[(S.index+1)%v],E*(w-R.x)+k*(x-R.y)<T?(l[0]=S,l[1]=R,l):(l[0]=S,l[1]=y,l)}})()},function(n,r,i){var s={};n.exports=s;var o=i(16);(function(){s.create=function(a,l){var u=a.bodyA,c=a.bodyB,f={id:s.id(u,c),bodyA:u,bodyB:c,collision:a,contacts:[o.create(),o.create()],contactCount:0,separation:0,isActive:!0,isSensor:u.isSensor||c.isSensor,timeCreated:l,timeUpdated:l,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return s.update(f,a,l),f},s.update=function(a,l,u){var c=l.supports,f=l.supportCount,p=a.contacts,h=l.parentA,g=l.parentB;a.isActive=!0,a.timeUpdated=u,a.collision=l,a.separation=l.depth,a.inverseMass=h.inverseMass+g.inverseMass,a.friction=h.friction<g.friction?h.friction:g.friction,a.frictionStatic=h.frictionStatic>g.frictionStatic?h.frictionStatic:g.frictionStatic,a.restitution=h.restitution>g.restitution?h.restitution:g.restitution,a.slop=h.slop>g.slop?h.slop:g.slop,a.contactCount=f,l.pair=a;var m=c[0],v=p[0],w=c[1],x=p[1];(x.vertex===m||v.vertex===w)&&(p[1]=v,p[0]=v=x,x=p[1]),v.vertex=m,x.vertex=w},s.setActive=function(a,l,u){l?(a.isActive=!0,a.timeUpdated=u):(a.isActive=!1,a.contactCount=0)},s.id=function(a,l){return a.id<l.id?a.id.toString(36)+":"+l.id.toString(36):l.id.toString(36)+":"+a.id.toString(36)}})()},function(n,r,i){var s={};n.exports=s;var o=i(3),a=i(2),l=i(7),u=i(1),c=i(11),f=i(0);(function(){s._warming=.4,s._torqueDampen=1,s._minLength=1e-6,s.create=function(p){var h=p;h.bodyA&&!h.pointA&&(h.pointA={x:0,y:0}),h.bodyB&&!h.pointB&&(h.pointB={x:0,y:0});var g=h.bodyA?a.add(h.bodyA.position,h.pointA):h.pointA,m=h.bodyB?a.add(h.bodyB.position,h.pointB):h.pointB,v=a.magnitude(a.sub(g,m));h.length=typeof h.length<"u"?h.length:v,h.id=h.id||f.nextId(),h.label=h.label||"Constraint",h.type="constraint",h.stiffness=h.stiffness||(h.length>0?1:.7),h.damping=h.damping||0,h.angularStiffness=h.angularStiffness||0,h.angleA=h.bodyA?h.bodyA.angle:h.angleA,h.angleB=h.bodyB?h.bodyB.angle:h.angleB,h.plugin={};var w={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return h.length===0&&h.stiffness>.1?(w.type="pin",w.anchors=!1):h.stiffness<.9&&(w.type="spring"),h.render=f.extend(w,h.render),h},s.preSolveAll=function(p){for(var h=0;h<p.length;h+=1){var g=p[h],m=g.constraintImpulse;g.isStatic||m.x===0&&m.y===0&&m.angle===0||(g.position.x+=m.x,g.position.y+=m.y,g.angle+=m.angle)}},s.solveAll=function(p,h){for(var g=f.clamp(h/f._baseDelta,0,1),m=0;m<p.length;m+=1){var v=p[m],w=!v.bodyA||v.bodyA&&v.bodyA.isStatic,x=!v.bodyB||v.bodyB&&v.bodyB.isStatic;(w||x)&&s.solve(p[m],g)}for(m=0;m<p.length;m+=1)v=p[m],w=!v.bodyA||v.bodyA&&v.bodyA.isStatic,x=!v.bodyB||v.bodyB&&v.bodyB.isStatic,!w&&!x&&s.solve(p[m],g)},s.solve=function(p,h){var g=p.bodyA,m=p.bodyB,v=p.pointA,w=p.pointB;if(!(!g&&!m)){g&&!g.isStatic&&(a.rotate(v,g.angle-p.angleA,v),p.angleA=g.angle),m&&!m.isStatic&&(a.rotate(w,m.angle-p.angleB,w),p.angleB=m.angle);var x=v,E=w;if(g&&(x=a.add(g.position,v)),m&&(E=a.add(m.position,w)),!(!x||!E)){var k=a.sub(x,E),S=a.magnitude(k);S<s._minLength&&(S=s._minLength);var R=(S-p.length)/S,T=p.stiffness>=1||p.length===0,y=T?p.stiffness*h:p.stiffness*h*h,I=p.damping*h,C=a.mult(k,R*y),A=(g?g.inverseMass:0)+(m?m.inverseMass:0),b=(g?g.inverseInertia:0)+(m?m.inverseInertia:0),D=A+b,B,O,K,U,F;if(I>0){var z=a.create();K=a.div(k,S),F=a.sub(m&&a.sub(m.position,m.positionPrev)||z,g&&a.sub(g.position,g.positionPrev)||z),U=a.dot(K,F)}g&&!g.isStatic&&(O=g.inverseMass/A,g.constraintImpulse.x-=C.x*O,g.constraintImpulse.y-=C.y*O,g.position.x-=C.x*O,g.position.y-=C.y*O,I>0&&(g.positionPrev.x-=I*K.x*U*O,g.positionPrev.y-=I*K.y*U*O),B=a.cross(v,C)/D*s._torqueDampen*g.inverseInertia*(1-p.angularStiffness),g.constraintImpulse.angle-=B,g.angle-=B),m&&!m.isStatic&&(O=m.inverseMass/A,m.constraintImpulse.x+=C.x*O,m.constraintImpulse.y+=C.y*O,m.position.x+=C.x*O,m.position.y+=C.y*O,I>0&&(m.positionPrev.x+=I*K.x*U*O,m.positionPrev.y+=I*K.y*U*O),B=a.cross(w,C)/D*s._torqueDampen*m.inverseInertia*(1-p.angularStiffness),m.constraintImpulse.angle+=B,m.angle+=B)}}},s.postSolveAll=function(p){for(var h=0;h<p.length;h++){var g=p[h],m=g.constraintImpulse;if(!(g.isStatic||m.x===0&&m.y===0&&m.angle===0)){l.set(g,!1);for(var v=0;v<g.parts.length;v++){var w=g.parts[v];o.translate(w.vertices,m),v>0&&(w.position.x+=m.x,w.position.y+=m.y),m.angle!==0&&(o.rotate(w.vertices,m.angle,g.position),c.rotate(w.axes,m.angle),v>0&&a.rotateAbout(w.position,m.angle,g.position,w.position)),u.update(w.bounds,w.vertices,g.velocity)}m.angle*=s._warming,m.x*=s._warming,m.y*=s._warming}}},s.pointAWorld=function(p){return{x:(p.bodyA?p.bodyA.position.x:0)+(p.pointA?p.pointA.x:0),y:(p.bodyA?p.bodyA.position.y:0)+(p.pointA?p.pointA.y:0)}},s.pointBWorld=function(p){return{x:(p.bodyB?p.bodyB.position.x:0)+(p.pointB?p.pointB.x:0),y:(p.bodyB?p.bodyB.position.y:0)+(p.pointB?p.pointB.y:0)}},s.currentLength=function(p){var h=(p.bodyA?p.bodyA.position.x:0)+(p.pointA?p.pointA.x:0),g=(p.bodyA?p.bodyA.position.y:0)+(p.pointA?p.pointA.y:0),m=(p.bodyB?p.bodyB.position.x:0)+(p.pointB?p.pointB.x:0),v=(p.bodyB?p.bodyB.position.y:0)+(p.pointB?p.pointB.y:0),w=h-m,x=g-v;return Math.sqrt(w*w+x*x)}})()},function(n,r,i){var s={};n.exports=s;var o=i(2),a=i(0);(function(){s.fromVertices=function(l){for(var u={},c=0;c<l.length;c++){var f=(c+1)%l.length,p=o.normalise({x:l[f].y-l[c].y,y:l[c].x-l[f].x}),h=p.y===0?1/0:p.x/p.y;h=h.toFixed(3).toString(),u[h]=p}return a.values(u)},s.rotate=function(l,u){if(u!==0)for(var c=Math.cos(u),f=Math.sin(u),p=0;p<l.length;p++){var h=l[p],g;g=h.x*c-h.y*f,h.y=h.x*f+h.y*c,h.x=g}}})()},function(n,r,i){var s={};n.exports=s;var o=i(3),a=i(0),l=i(4),u=i(1),c=i(2);(function(){s.rectangle=function(f,p,h,g,m){m=m||{};var v={label:"Rectangle Body",position:{x:f,y:p},vertices:o.fromPath("L 0 0 L "+h+" 0 L "+h+" "+g+" L 0 "+g)};if(m.chamfer){var w=m.chamfer;v.vertices=o.chamfer(v.vertices,w.radius,w.quality,w.qualityMin,w.qualityMax),delete m.chamfer}return l.create(a.extend({},v,m))},s.trapezoid=function(f,p,h,g,m,v){v=v||{},m>=1&&a.warn("Bodies.trapezoid: slope parameter must be < 1."),m*=.5;var w=(1-m*2)*h,x=h*m,E=x+w,k=E+x,S;m<.5?S="L 0 0 L "+x+" "+-g+" L "+E+" "+-g+" L "+k+" 0":S="L 0 0 L "+E+" "+-g+" L "+k+" 0";var R={label:"Trapezoid Body",position:{x:f,y:p},vertices:o.fromPath(S)};if(v.chamfer){var T=v.chamfer;R.vertices=o.chamfer(R.vertices,T.radius,T.quality,T.qualityMin,T.qualityMax),delete v.chamfer}return l.create(a.extend({},R,v))},s.circle=function(f,p,h,g,m){g=g||{};var v={label:"Circle Body",circleRadius:h};m=m||25;var w=Math.ceil(Math.max(10,Math.min(m,h)));return w%2===1&&(w+=1),s.polygon(f,p,w,h,a.extend({},v,g))},s.polygon=function(f,p,h,g,m){if(m=m||{},h<3)return s.circle(f,p,g,m);for(var v=2*Math.PI/h,w="",x=v*.5,E=0;E<h;E+=1){var k=x+E*v,S=Math.cos(k)*g,R=Math.sin(k)*g;w+="L "+S.toFixed(3)+" "+R.toFixed(3)+" "}var T={label:"Polygon Body",position:{x:f,y:p},vertices:o.fromPath(w)};if(m.chamfer){var y=m.chamfer;T.vertices=o.chamfer(T.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete m.chamfer}return l.create(a.extend({},T,m))},s.fromVertices=function(f,p,h,g,m,v,w,x){var E=a.getDecomp(),k,S,R,T,y,I,C,A,b,D,B;for(k=!!(E&&E.quickDecomp),g=g||{},R=[],m=typeof m<"u"?m:!1,v=typeof v<"u"?v:.01,w=typeof w<"u"?w:10,x=typeof x<"u"?x:.01,a.isArray(h[0])||(h=[h]),D=0;D<h.length;D+=1)if(I=h[D],T=o.isConvex(I),y=!T,y&&!k&&a.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),T||!k)T?I=o.clockwiseSort(I):I=o.hull(I),R.push({position:{x:f,y:p},vertices:I});else{var O=I.map(function(Z){return[Z.x,Z.y]});E.makeCCW(O),v!==!1&&E.removeCollinearPoints(O,v),x!==!1&&E.removeDuplicatePoints&&E.removeDuplicatePoints(O,x);var K=E.quickDecomp(O);for(C=0;C<K.length;C++){var U=K[C],F=U.map(function(Z){return{x:Z[0],y:Z[1]}});w>0&&o.area(F)<w||R.push({position:o.centre(F),vertices:F})}}for(C=0;C<R.length;C++)R[C]=l.create(a.extend(R[C],g));if(m){var z=5;for(C=0;C<R.length;C++){var Q=R[C];for(A=C+1;A<R.length;A++){var J=R[A];if(u.overlaps(Q.bounds,J.bounds)){var H=Q.vertices,X=J.vertices;for(b=0;b<Q.vertices.length;b++)for(B=0;B<J.vertices.length;B++){var he=c.magnitudeSquared(c.sub(H[(b+1)%H.length],X[B])),de=c.magnitudeSquared(c.sub(H[b],X[(B+1)%X.length]));he<z&&de<z&&(H[b].isInternal=!0,X[B].isInternal=!0)}}}}}return R.length>1?(S=l.create(a.extend({parts:R.slice(0)},g)),l.setPosition(S,{x:f,y:p}),S):R[0]}})()},function(n,r,i){var s={};n.exports=s;var o=i(0),a=i(8);(function(){s.create=function(l){var u={bodies:[],collisions:[],pairs:null};return o.extend(u,l)},s.setBodies=function(l,u){l.bodies=u.slice(0)},s.clear=function(l){l.bodies=[],l.collisions=[]},s.collisions=function(l){var u=l.pairs,c=l.bodies,f=c.length,p=s.canCollide,h=a.collides,g=l.collisions,m=0,v,w;for(c.sort(s._compareBoundsX),v=0;v<f;v++){var x=c[v],E=x.bounds,k=x.bounds.max.x,S=x.bounds.max.y,R=x.bounds.min.y,T=x.isStatic||x.isSleeping,y=x.parts.length,I=y===1;for(w=v+1;w<f;w++){var C=c[w],A=C.bounds;if(A.min.x>k)break;if(!(S<A.min.y||R>A.max.y)&&!(T&&(C.isStatic||C.isSleeping))&&p(x.collisionFilter,C.collisionFilter)){var b=C.parts.length;if(I&&b===1){var D=h(x,C,u);D&&(g[m++]=D)}else for(var B=y>1?1:0,O=b>1?1:0,K=B;K<y;K++)for(var U=x.parts[K],E=U.bounds,F=O;F<b;F++){var z=C.parts[F],A=z.bounds;if(!(E.min.x>A.max.x||E.max.x<A.min.x||E.max.y<A.min.y||E.min.y>A.max.y)){var D=h(U,z,u);D&&(g[m++]=D)}}}}}return g.length!==m&&(g.length=m),g},s.canCollide=function(l,u){return l.group===u.group&&l.group!==0?l.group>0:(l.mask&u.category)!==0&&(u.mask&l.category)!==0},s._compareBoundsX=function(l,u){return l.bounds.min.x-u.bounds.min.x}})()},function(n,r,i){var s={};n.exports=s;var o=i(0);(function(){s.create=function(a){var l={};return a||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),l.element=a||document.body,l.absolute={x:0,y:0},l.position={x:0,y:0},l.mousedownPosition={x:0,y:0},l.mouseupPosition={x:0,y:0},l.offset={x:0,y:0},l.scale={x:1,y:1},l.wheelDelta=0,l.button=-1,l.pixelRatio=parseInt(l.element.getAttribute("data-pixel-ratio"),10)||1,l.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},l.mousemove=function(u){var c=s._getRelativeMousePosition(u,l.element,l.pixelRatio),f=u.changedTouches;f&&(l.button=0,u.preventDefault()),l.absolute.x=c.x,l.absolute.y=c.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.sourceEvents.mousemove=u},l.mousedown=function(u){var c=s._getRelativeMousePosition(u,l.element,l.pixelRatio),f=u.changedTouches;f?(l.button=0,u.preventDefault()):l.button=u.button,l.absolute.x=c.x,l.absolute.y=c.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.mousedownPosition.x=l.position.x,l.mousedownPosition.y=l.position.y,l.sourceEvents.mousedown=u},l.mouseup=function(u){var c=s._getRelativeMousePosition(u,l.element,l.pixelRatio),f=u.changedTouches;f&&u.preventDefault(),l.button=-1,l.absolute.x=c.x,l.absolute.y=c.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.mouseupPosition.x=l.position.x,l.mouseupPosition.y=l.position.y,l.sourceEvents.mouseup=u},l.mousewheel=function(u){l.wheelDelta=Math.max(-1,Math.min(1,u.wheelDelta||-u.detail)),u.preventDefault(),l.sourceEvents.mousewheel=u},s.setElement(l,l.element),l},s.setElement=function(a,l){a.element=l,l.addEventListener("mousemove",a.mousemove,{passive:!0}),l.addEventListener("mousedown",a.mousedown,{passive:!0}),l.addEventListener("mouseup",a.mouseup,{passive:!0}),l.addEventListener("wheel",a.mousewheel,{passive:!1}),l.addEventListener("touchmove",a.mousemove,{passive:!1}),l.addEventListener("touchstart",a.mousedown,{passive:!1}),l.addEventListener("touchend",a.mouseup,{passive:!1})},s.clearSourceEvents=function(a){a.sourceEvents.mousemove=null,a.sourceEvents.mousedown=null,a.sourceEvents.mouseup=null,a.sourceEvents.mousewheel=null,a.wheelDelta=0},s.setOffset=function(a,l){a.offset.x=l.x,a.offset.y=l.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},s.setScale=function(a,l){a.scale.x=l.x,a.scale.y=l.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},s._getRelativeMousePosition=function(a,l,u){var c=l.getBoundingClientRect(),f=document.documentElement||document.body.parentNode||document.body,p=window.pageXOffset!==void 0?window.pageXOffset:f.scrollLeft,h=window.pageYOffset!==void 0?window.pageYOffset:f.scrollTop,g=a.changedTouches,m,v;return g?(m=g[0].pageX-c.left-p,v=g[0].pageY-c.top-h):(m=a.pageX-c.left-p,v=a.pageY-c.top-h),{x:m/(l.clientWidth/(l.width||l.clientWidth)*u),y:v/(l.clientHeight/(l.height||l.clientHeight)*u)}}})()},function(n,r,i){var s={};n.exports=s;var o=i(0);(function(){s._registry={},s.register=function(a){if(s.isPlugin(a)||o.warn("Plugin.register:",s.toString(a),"does not implement all required fields."),a.name in s._registry){var l=s._registry[a.name],u=s.versionParse(a.version).number,c=s.versionParse(l.version).number;u>c?(o.warn("Plugin.register:",s.toString(l),"was upgraded to",s.toString(a)),s._registry[a.name]=a):u<c?o.warn("Plugin.register:",s.toString(l),"can not be downgraded to",s.toString(a)):a!==l&&o.warn("Plugin.register:",s.toString(a),"is already registered to different plugin object")}else s._registry[a.name]=a;return a},s.resolve=function(a){return s._registry[s.dependencyParse(a).name]},s.toString=function(a){return typeof a=="string"?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},s.isPlugin=function(a){return a&&a.name&&a.version&&a.install},s.isUsed=function(a,l){return a.used.indexOf(l)>-1},s.isFor=function(a,l){var u=a.for&&s.dependencyParse(a.for);return!a.for||l.name===u.name&&s.versionSatisfies(l.version,u.range)},s.use=function(a,l){if(a.uses=(a.uses||[]).concat(l||[]),a.uses.length===0){o.warn("Plugin.use:",s.toString(a),"does not specify any dependencies to install.");return}for(var u=s.dependencies(a),c=o.topologicalSort(u),f=[],p=0;p<c.length;p+=1)if(c[p]!==a.name){var h=s.resolve(c[p]);if(!h){f.push("❌ "+c[p]);continue}s.isUsed(a,h.name)||(s.isFor(h,a)||(o.warn("Plugin.use:",s.toString(h),"is for",h.for,"but installed on",s.toString(a)+"."),h._warned=!0),h.install?h.install(a):(o.warn("Plugin.use:",s.toString(h),"does not specify an install function."),h._warned=!0),h._warned?(f.push("🔶 "+s.toString(h)),delete h._warned):f.push("✅ "+s.toString(h)),a.used.push(h.name))}f.length>0&&o.info(f.join("  "))},s.dependencies=function(a,l){var u=s.dependencyParse(a),c=u.name;if(l=l||{},!(c in l)){a=s.resolve(a)||a,l[c]=o.map(a.uses||[],function(p){s.isPlugin(p)&&s.register(p);var h=s.dependencyParse(p),g=s.resolve(p);return g&&!s.versionSatisfies(g.version,h.range)?(o.warn("Plugin.dependencies:",s.toString(g),"does not satisfy",s.toString(h),"used by",s.toString(u)+"."),g._warned=!0,a._warned=!0):g||(o.warn("Plugin.dependencies:",s.toString(p),"used by",s.toString(u),"could not be resolved."),a._warned=!0),h.name});for(var f=0;f<l[c].length;f+=1)s.dependencies(l[c][f],l);return l}},s.dependencyParse=function(a){if(o.isString(a)){var l=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return l.test(a)||o.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}}return{name:a.name,range:a.range||a.version}},s.versionParse=function(a){var l=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;l.test(a)||o.warn("Plugin.versionParse:",a,"is not a valid version or range.");var u=l.exec(a),c=Number(u[4]),f=Number(u[5]),p=Number(u[6]);return{isRange:!!(u[1]||u[2]),version:u[3],range:a,operator:u[1]||u[2]||"",major:c,minor:f,patch:p,parts:[c,f,p],prerelease:u[7],number:c*1e8+f*1e4+p}},s.versionSatisfies=function(a,l){l=l||"*";var u=s.versionParse(l),c=s.versionParse(a);if(u.isRange){if(u.operator==="*"||a==="*")return!0;if(u.operator===">")return c.number>u.number;if(u.operator===">=")return c.number>=u.number;if(u.operator==="~")return c.major===u.major&&c.minor===u.minor&&c.patch>=u.patch;if(u.operator==="^")return u.major>0?c.major===u.major&&c.number>=u.number:u.minor>0?c.minor===u.minor&&c.patch>=u.patch:c.patch===u.patch}return a===l||a==="*"}})()},function(n,r){var i={};n.exports=i,function(){i.create=function(s){return{vertex:s,normalImpulse:0,tangentImpulse:0}}}()},function(n,r,i){var s={};n.exports=s;var o=i(7),a=i(18),l=i(13),u=i(19),c=i(5),f=i(6),p=i(10),h=i(0),g=i(4);(function(){s._deltaMax=1e3/60,s.create=function(m){m=m||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},w=h.extend(v,m);return w.world=m.world||f.create({label:"World"}),w.pairs=m.pairs||u.create(),w.detector=m.detector||l.create(),w.detector.pairs=w.pairs,w.grid={buckets:[]},w.world.gravity=w.gravity,w.broadphase=w.grid,w.metrics={},w},s.update=function(m,v){var w=h.now(),x=m.world,E=m.detector,k=m.pairs,S=m.timing,R=S.timestamp,T;v>s._deltaMax&&h.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",s._deltaMax.toFixed(3),"ms."),v=typeof v<"u"?v:h._baseDelta,v*=S.timeScale,S.timestamp+=v,S.lastDelta=v;var y={timestamp:S.timestamp,delta:v};c.trigger(m,"beforeUpdate",y);var I=f.allBodies(x),C=f.allConstraints(x);for(x.isModified&&(l.setBodies(E,I),f.setModified(x,!1,!1,!0)),m.enableSleeping&&o.update(I,v),s._bodiesApplyGravity(I,m.gravity),v>0&&s._bodiesUpdate(I,v),c.trigger(m,"beforeSolve",y),p.preSolveAll(I),T=0;T<m.constraintIterations;T++)p.solveAll(C,v);p.postSolveAll(I);var A=l.collisions(E);u.update(k,A,R),m.enableSleeping&&o.afterCollisions(k.list),k.collisionStart.length>0&&c.trigger(m,"collisionStart",{pairs:k.collisionStart,timestamp:S.timestamp,delta:v});var b=h.clamp(20/m.positionIterations,0,1);for(a.preSolvePosition(k.list),T=0;T<m.positionIterations;T++)a.solvePosition(k.list,v,b);for(a.postSolvePosition(I),p.preSolveAll(I),T=0;T<m.constraintIterations;T++)p.solveAll(C,v);for(p.postSolveAll(I),a.preSolveVelocity(k.list),T=0;T<m.velocityIterations;T++)a.solveVelocity(k.list,v);return s._bodiesUpdateVelocities(I),k.collisionActive.length>0&&c.trigger(m,"collisionActive",{pairs:k.collisionActive,timestamp:S.timestamp,delta:v}),k.collisionEnd.length>0&&c.trigger(m,"collisionEnd",{pairs:k.collisionEnd,timestamp:S.timestamp,delta:v}),s._bodiesClearForces(I),c.trigger(m,"afterUpdate",y),m.timing.lastElapsed=h.now()-w,m},s.merge=function(m,v){if(h.extend(m,v),v.world){m.world=v.world,s.clear(m);for(var w=f.allBodies(m.world),x=0;x<w.length;x++){var E=w[x];o.set(E,!1),E.id=h.nextId()}}},s.clear=function(m){u.clear(m.pairs),l.clear(m.detector)},s._bodiesClearForces=function(m){for(var v=m.length,w=0;w<v;w++){var x=m[w];x.force.x=0,x.force.y=0,x.torque=0}},s._bodiesApplyGravity=function(m,v){var w=typeof v.scale<"u"?v.scale:.001,x=m.length;if(!(v.x===0&&v.y===0||w===0))for(var E=0;E<x;E++){var k=m[E];k.isStatic||k.isSleeping||(k.force.y+=k.mass*v.y*w,k.force.x+=k.mass*v.x*w)}},s._bodiesUpdate=function(m,v){for(var w=m.length,x=0;x<w;x++){var E=m[x];E.isStatic||E.isSleeping||g.update(E,v)}},s._bodiesUpdateVelocities=function(m){for(var v=m.length,w=0;w<v;w++)g.updateVelocities(m[w])}})()},function(n,r,i){var s={};n.exports=s;var o=i(3),a=i(0),l=i(1);(function(){s._restingThresh=2,s._restingThreshTangent=Math.sqrt(6),s._positionDampen=.9,s._positionWarming=.8,s._frictionNormalMultiplier=5,s._frictionMaxStatic=Number.MAX_VALUE,s.preSolvePosition=function(u){var c,f,p,h=u.length;for(c=0;c<h;c++)f=u[c],f.isActive&&(p=f.contactCount,f.collision.parentA.totalContacts+=p,f.collision.parentB.totalContacts+=p)},s.solvePosition=function(u,c,f){var p,h,g,m,v,w,x,E,k=s._positionDampen*(f||1),S=a.clamp(c/a._baseDelta,0,1),R=u.length;for(p=0;p<R;p++)h=u[p],!(!h.isActive||h.isSensor)&&(g=h.collision,m=g.parentA,v=g.parentB,w=g.normal,h.separation=g.depth+w.x*(v.positionImpulse.x-m.positionImpulse.x)+w.y*(v.positionImpulse.y-m.positionImpulse.y));for(p=0;p<R;p++)h=u[p],!(!h.isActive||h.isSensor)&&(g=h.collision,m=g.parentA,v=g.parentB,w=g.normal,E=h.separation-h.slop*S,(m.isStatic||v.isStatic)&&(E*=2),m.isStatic||m.isSleeping||(x=k/m.totalContacts,m.positionImpulse.x+=w.x*E*x,m.positionImpulse.y+=w.y*E*x),v.isStatic||v.isSleeping||(x=k/v.totalContacts,v.positionImpulse.x-=w.x*E*x,v.positionImpulse.y-=w.y*E*x))},s.postSolvePosition=function(u){for(var c=s._positionWarming,f=u.length,p=o.translate,h=l.update,g=0;g<f;g++){var m=u[g],v=m.positionImpulse,w=v.x,x=v.y,E=m.velocity;if(m.totalContacts=0,w!==0||x!==0){for(var k=0;k<m.parts.length;k++){var S=m.parts[k];p(S.vertices,v),h(S.bounds,S.vertices,E),S.position.x+=w,S.position.y+=x}m.positionPrev.x+=w,m.positionPrev.y+=x,w*E.x+x*E.y<0?(v.x=0,v.y=0):(v.x*=c,v.y*=c)}}},s.preSolveVelocity=function(u){var c=u.length,f,p;for(f=0;f<c;f++){var h=u[f];if(!(!h.isActive||h.isSensor)){var g=h.contacts,m=h.contactCount,v=h.collision,w=v.parentA,x=v.parentB,E=v.normal,k=v.tangent;for(p=0;p<m;p++){var S=g[p],R=S.vertex,T=S.normalImpulse,y=S.tangentImpulse;if(T!==0||y!==0){var I=E.x*T+k.x*y,C=E.y*T+k.y*y;w.isStatic||w.isSleeping||(w.positionPrev.x+=I*w.inverseMass,w.positionPrev.y+=C*w.inverseMass,w.anglePrev+=w.inverseInertia*((R.x-w.position.x)*C-(R.y-w.position.y)*I)),x.isStatic||x.isSleeping||(x.positionPrev.x-=I*x.inverseMass,x.positionPrev.y-=C*x.inverseMass,x.anglePrev-=x.inverseInertia*((R.x-x.position.x)*C-(R.y-x.position.y)*I))}}}}},s.solveVelocity=function(u,c){var f=c/a._baseDelta,p=f*f,h=p*f,g=-s._restingThresh*f,m=s._restingThreshTangent,v=s._frictionNormalMultiplier*f,w=s._frictionMaxStatic,x=u.length,E,k,S,R;for(S=0;S<x;S++){var T=u[S];if(!(!T.isActive||T.isSensor)){var y=T.collision,I=y.parentA,C=y.parentB,A=y.normal.x,b=y.normal.y,D=y.tangent.x,B=y.tangent.y,O=T.inverseMass,K=T.friction*T.frictionStatic*v,U=T.contacts,F=T.contactCount,z=1/F,Q=I.position.x-I.positionPrev.x,J=I.position.y-I.positionPrev.y,H=I.angle-I.anglePrev,X=C.position.x-C.positionPrev.x,he=C.position.y-C.positionPrev.y,de=C.angle-C.anglePrev;for(R=0;R<F;R++){var Z=U[R],q=Z.vertex,te=q.x-I.position.x,xe=q.y-I.position.y,ie=q.x-C.position.x,Ie=q.y-C.position.y,_e=Q-xe*H,Ht=J+te*H,Lt=X-Ie*de,pn=he+ie*de,mn=_e-Lt,Mi=Ht-pn,Or=A*mn+b*Mi,yt=D*mn+B*Mi,Ot=T.separation+Or,Pn=Math.min(Ot,1);Pn=Ot<0?0:Pn;var ar=Pn*K;yt<-ar||yt>ar?(k=yt>0?yt:-yt,E=T.friction*(yt>0?1:-1)*h,E<-k?E=-k:E>k&&(E=k)):(E=yt,k=w);var lr=te*b-xe*A,ur=ie*b-Ie*A,Vi=z/(O+I.inverseInertia*lr*lr+C.inverseInertia*ur*ur),Ve=(1+T.restitution)*Or*Vi;if(E*=Vi,Or<g)Z.normalImpulse=0;else{var De=Z.normalImpulse;Z.normalImpulse+=Ve,Z.normalImpulse>0&&(Z.normalImpulse=0),Ve=Z.normalImpulse-De}if(yt<-m||yt>m)Z.tangentImpulse=0;else{var tn=Z.tangentImpulse;Z.tangentImpulse+=E,Z.tangentImpulse<-k&&(Z.tangentImpulse=-k),Z.tangentImpulse>k&&(Z.tangentImpulse=k),E=Z.tangentImpulse-tn}var nn=A*Ve+D*E,Un=b*Ve+B*E;I.isStatic||I.isSleeping||(I.positionPrev.x+=nn*I.inverseMass,I.positionPrev.y+=Un*I.inverseMass,I.anglePrev+=(te*Un-xe*nn)*I.inverseInertia),C.isStatic||C.isSleeping||(C.positionPrev.x-=nn*C.inverseMass,C.positionPrev.y-=Un*C.inverseMass,C.anglePrev-=(ie*Un-Ie*nn)*C.inverseInertia)}}}}})()},function(n,r,i){var s={};n.exports=s;var o=i(9),a=i(0);(function(){s.create=function(l){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},l)},s.update=function(l,u,c){var f=o.update,p=o.create,h=o.setActive,g=l.table,m=l.list,v=m.length,w=v,x=l.collisionStart,E=l.collisionEnd,k=l.collisionActive,S=u.length,R=0,T=0,y=0,I,C,A;for(A=0;A<S;A++)I=u[A],C=I.pair,C?(C.isActive&&(k[y++]=C),f(C,I,c)):(C=p(I,c),g[C.id]=C,x[R++]=C,m[w++]=C);for(w=0,v=m.length,A=0;A<v;A++)C=m[A],C.timeUpdated>=c?m[w++]=C:(h(C,!1,c),C.collision.bodyA.sleepCounter>0&&C.collision.bodyB.sleepCounter>0?m[w++]=C:(E[T++]=C,delete g[C.id]));m.length!==w&&(m.length=w),x.length!==R&&(x.length=R),E.length!==T&&(E.length=T),k.length!==y&&(k.length=y)},s.clear=function(l){return l.table={},l.list.length=0,l.collisionStart.length=0,l.collisionActive.length=0,l.collisionEnd.length=0,l}})()},function(n,r,i){var s=n.exports=i(21);s.Axes=i(11),s.Bodies=i(12),s.Body=i(4),s.Bounds=i(1),s.Collision=i(8),s.Common=i(0),s.Composite=i(6),s.Composites=i(22),s.Constraint=i(10),s.Contact=i(16),s.Detector=i(13),s.Engine=i(17),s.Events=i(5),s.Grid=i(23),s.Mouse=i(14),s.MouseConstraint=i(24),s.Pair=i(9),s.Pairs=i(19),s.Plugin=i(15),s.Query=i(25),s.Render=i(26),s.Resolver=i(18),s.Runner=i(27),s.SAT=i(28),s.Sleeping=i(7),s.Svg=i(29),s.Vector=i(2),s.Vertices=i(3),s.World=i(30),s.Engine.run=s.Runner.run,s.Common.deprecated(s.Engine,"run","Engine.run ➤ use Matter.Runner.run(engine) instead")},function(n,r,i){var s={};n.exports=s;var o=i(15),a=i(0);(function(){s.name="matter-js",s.version="0.20.0",s.uses=[],s.used=[],s.use=function(){o.use(s,Array.prototype.slice.call(arguments))},s.before=function(l,u){return l=l.replace(/^Matter./,""),a.chainPathBefore(s,l,u)},s.after=function(l,u){return l=l.replace(/^Matter./,""),a.chainPathAfter(s,l,u)}})()},function(n,r,i){var s={};n.exports=s;var o=i(6),a=i(10),l=i(0),u=i(4),c=i(12),f=l.deprecated;(function(){s.stack=function(p,h,g,m,v,w,x){for(var E=o.create({label:"Stack"}),k=p,S=h,R,T=0,y=0;y<m;y++){for(var I=0,C=0;C<g;C++){var A=x(k,S,C,y,R,T);if(A){var b=A.bounds.max.y-A.bounds.min.y,D=A.bounds.max.x-A.bounds.min.x;b>I&&(I=b),u.translate(A,{x:D*.5,y:b*.5}),k=A.bounds.max.x+v,o.addBody(E,A),R=A,T+=1}else k+=v}S+=I+w,k=p}return E},s.chain=function(p,h,g,m,v,w){for(var x=p.bodies,E=1;E<x.length;E++){var k=x[E-1],S=x[E],R=k.bounds.max.y-k.bounds.min.y,T=k.bounds.max.x-k.bounds.min.x,y=S.bounds.max.y-S.bounds.min.y,I=S.bounds.max.x-S.bounds.min.x,C={bodyA:k,pointA:{x:T*h,y:R*g},bodyB:S,pointB:{x:I*m,y:y*v}},A=l.extend(C,w);o.addConstraint(p,a.create(A))}return p.label+=" Chain",p},s.mesh=function(p,h,g,m,v){var w=p.bodies,x,E,k,S,R;for(x=0;x<g;x++){for(E=1;E<h;E++)k=w[E-1+x*h],S=w[E+x*h],o.addConstraint(p,a.create(l.extend({bodyA:k,bodyB:S},v)));if(x>0)for(E=0;E<h;E++)k=w[E+(x-1)*h],S=w[E+x*h],o.addConstraint(p,a.create(l.extend({bodyA:k,bodyB:S},v))),m&&E>0&&(R=w[E-1+(x-1)*h],o.addConstraint(p,a.create(l.extend({bodyA:R,bodyB:S},v)))),m&&E<h-1&&(R=w[E+1+(x-1)*h],o.addConstraint(p,a.create(l.extend({bodyA:R,bodyB:S},v))))}return p.label+=" Mesh",p},s.pyramid=function(p,h,g,m,v,w,x){return s.stack(p,h,g,m,v,w,function(E,k,S,R,T,y){var I=Math.min(m,Math.ceil(g/2)),C=T?T.bounds.max.x-T.bounds.min.x:0;if(!(R>I)){R=I-R;var A=R,b=g-1-R;if(!(S<A||S>b)){y===1&&u.translate(T,{x:(S+(g%2===1?1:-1))*C,y:0});var D=T?S*C:0;return x(p+D+S*v,k,S,R,T,y)}}})},s.newtonsCradle=function(p,h,g,m,v){for(var w=o.create({label:"Newtons Cradle"}),x=0;x<g;x++){var E=1.9,k=c.circle(p+x*(m*E),h+v,m,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),S=a.create({pointA:{x:p+x*(m*E),y:h},bodyB:k});o.addBody(w,k),o.addConstraint(w,S)}return w},f(s,"newtonsCradle","Composites.newtonsCradle ➤ moved to newtonsCradle example"),s.car=function(p,h,g,m,v){var w=u.nextGroup(!0),x=20,E=-g*.5+x,k=g*.5-x,S=0,R=o.create({label:"Car"}),T=c.rectangle(p,h,g,m,{collisionFilter:{group:w},chamfer:{radius:m*.5},density:2e-4}),y=c.circle(p+E,h+S,v,{collisionFilter:{group:w},friction:.8}),I=c.circle(p+k,h+S,v,{collisionFilter:{group:w},friction:.8}),C=a.create({bodyB:T,pointB:{x:E,y:S},bodyA:y,stiffness:1,length:0}),A=a.create({bodyB:T,pointB:{x:k,y:S},bodyA:I,stiffness:1,length:0});return o.addBody(R,T),o.addBody(R,y),o.addBody(R,I),o.addConstraint(R,C),o.addConstraint(R,A),R},f(s,"car","Composites.car ➤ moved to car example"),s.softBody=function(p,h,g,m,v,w,x,E,k,S){k=l.extend({inertia:1/0},k),S=l.extend({stiffness:.2,render:{type:"line",anchors:!1}},S);var R=s.stack(p,h,g,m,v,w,function(T,y){return c.circle(T,y,E,k)});return s.mesh(R,g,m,x,S),R.label="Soft Body",R},f(s,"softBody","Composites.softBody ➤ moved to softBody and cloth examples")})()},function(n,r,i){var s={};n.exports=s;var o=i(9),a=i(0),l=a.deprecated;(function(){s.create=function(u){var c={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return a.extend(c,u)},s.update=function(u,c,f,p){var h,g,m,v=f.world,w=u.buckets,x,E,k=!1;for(h=0;h<c.length;h++){var S=c[h];if(!(S.isSleeping&&!p)&&!(v.bounds&&(S.bounds.max.x<v.bounds.min.x||S.bounds.min.x>v.bounds.max.x||S.bounds.max.y<v.bounds.min.y||S.bounds.min.y>v.bounds.max.y))){var R=s._getRegion(u,S);if(!S.region||R.id!==S.region.id||p){(!S.region||p)&&(S.region=R);var T=s._regionUnion(R,S.region);for(g=T.startCol;g<=T.endCol;g++)for(m=T.startRow;m<=T.endRow;m++){E=s._getBucketId(g,m),x=w[E];var y=g>=R.startCol&&g<=R.endCol&&m>=R.startRow&&m<=R.endRow,I=g>=S.region.startCol&&g<=S.region.endCol&&m>=S.region.startRow&&m<=S.region.endRow;!y&&I&&I&&x&&s._bucketRemoveBody(u,x,S),(S.region===R||y&&!I||p)&&(x||(x=s._createBucket(w,E)),s._bucketAddBody(u,x,S))}S.region=R,k=!0}}}k&&(u.pairsList=s._createActivePairsList(u))},l(s,"update","Grid.update ➤ replaced by Matter.Detector"),s.clear=function(u){u.buckets={},u.pairs={},u.pairsList=[]},l(s,"clear","Grid.clear ➤ replaced by Matter.Detector"),s._regionUnion=function(u,c){var f=Math.min(u.startCol,c.startCol),p=Math.max(u.endCol,c.endCol),h=Math.min(u.startRow,c.startRow),g=Math.max(u.endRow,c.endRow);return s._createRegion(f,p,h,g)},s._getRegion=function(u,c){var f=c.bounds,p=Math.floor(f.min.x/u.bucketWidth),h=Math.floor(f.max.x/u.bucketWidth),g=Math.floor(f.min.y/u.bucketHeight),m=Math.floor(f.max.y/u.bucketHeight);return s._createRegion(p,h,g,m)},s._createRegion=function(u,c,f,p){return{id:u+","+c+","+f+","+p,startCol:u,endCol:c,startRow:f,endRow:p}},s._getBucketId=function(u,c){return"C"+u+"R"+c},s._createBucket=function(u,c){var f=u[c]=[];return f},s._bucketAddBody=function(u,c,f){var p=u.pairs,h=o.id,g=c.length,m;for(m=0;m<g;m++){var v=c[m];if(!(f.id===v.id||f.isStatic&&v.isStatic)){var w=h(f,v),x=p[w];x?x[2]+=1:p[w]=[f,v,1]}}c.push(f)},s._bucketRemoveBody=function(u,c,f){var p=u.pairs,h=o.id,g;c.splice(a.indexOf(c,f),1);var m=c.length;for(g=0;g<m;g++){var v=p[h(f,c[g])];v&&(v[2]-=1)}},s._createActivePairsList=function(u){var c,f=u.pairs,p=a.keys(f),h=p.length,g=[],m;for(m=0;m<h;m++)c=f[p[m]],c[2]>0?g.push(c):delete f[p[m]];return g}})()},function(n,r,i){var s={};n.exports=s;var o=i(3),a=i(7),l=i(14),u=i(5),c=i(13),f=i(10),p=i(6),h=i(0),g=i(1);(function(){s.create=function(m,v){var w=(m?m.mouse:null)||(v?v.mouse:null);w||(m&&m.render&&m.render.canvas?w=l.create(m.render.canvas):v&&v.element?w=l.create(v.element):(w=l.create(),h.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var x=f.create({label:"Mouse Constraint",pointA:w.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),E={type:"mouseConstraint",mouse:w,element:null,body:null,constraint:x,collisionFilter:{category:1,mask:4294967295,group:0}},k=h.extend(E,v);return u.on(m,"beforeUpdate",function(){var S=p.allBodies(m.world);s.update(k,S),s._triggerEvents(k)}),k},s.update=function(m,v){var w=m.mouse,x=m.constraint,E=m.body;if(w.button===0){if(x.bodyB)a.set(x.bodyB,!1),x.pointA=w.position;else for(var k=0;k<v.length;k++)if(E=v[k],g.contains(E.bounds,w.position)&&c.canCollide(E.collisionFilter,m.collisionFilter))for(var S=E.parts.length>1?1:0;S<E.parts.length;S++){var R=E.parts[S];if(o.contains(R.vertices,w.position)){x.pointA=w.position,x.bodyB=m.body=E,x.pointB={x:w.position.x-E.position.x,y:w.position.y-E.position.y},x.angleB=E.angle,a.set(E,!1),u.trigger(m,"startdrag",{mouse:w,body:E});break}}}else x.bodyB=m.body=null,x.pointB=null,E&&u.trigger(m,"enddrag",{mouse:w,body:E})},s._triggerEvents=function(m){var v=m.mouse,w=v.sourceEvents;w.mousemove&&u.trigger(m,"mousemove",{mouse:v}),w.mousedown&&u.trigger(m,"mousedown",{mouse:v}),w.mouseup&&u.trigger(m,"mouseup",{mouse:v}),l.clearSourceEvents(v)}})()},function(n,r,i){var s={};n.exports=s;var o=i(2),a=i(8),l=i(1),u=i(12),c=i(3);(function(){s.collides=function(f,p){for(var h=[],g=p.length,m=f.bounds,v=a.collides,w=l.overlaps,x=0;x<g;x++){var E=p[x],k=E.parts.length,S=k===1?0:1;if(w(E.bounds,m))for(var R=S;R<k;R++){var T=E.parts[R];if(w(T.bounds,m)){var y=v(T,f);if(y){h.push(y);break}}}}return h},s.ray=function(f,p,h,g){g=g||1e-100;for(var m=o.angle(p,h),v=o.magnitude(o.sub(p,h)),w=(h.x+p.x)*.5,x=(h.y+p.y)*.5,E=u.rectangle(w,x,v,g,{angle:m}),k=s.collides(E,f),S=0;S<k.length;S+=1){var R=k[S];R.body=R.bodyB=R.bodyA}return k},s.region=function(f,p,h){for(var g=[],m=0;m<f.length;m++){var v=f[m],w=l.overlaps(v.bounds,p);(w&&!h||!w&&h)&&g.push(v)}return g},s.point=function(f,p){for(var h=[],g=0;g<f.length;g++){var m=f[g];if(l.contains(m.bounds,p))for(var v=m.parts.length===1?0:1;v<m.parts.length;v++){var w=m.parts[v];if(l.contains(w.bounds,p)&&c.contains(w.vertices,p)){h.push(m);break}}}return h}})()},function(n,r,i){var s={};n.exports=s;var o=i(4),a=i(0),l=i(6),u=i(1),c=i(5),f=i(2),p=i(14);(function(){var h,g;typeof window<"u"&&(h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(S){window.setTimeout(function(){S(a.now())},1e3/60)},g=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),s._goodFps=30,s._goodDelta=1e3/60,s.create=function(S){var R={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!S.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},T=a.extend(R,S);return T.canvas&&(T.canvas.width=T.options.width||T.canvas.width,T.canvas.height=T.options.height||T.canvas.height),T.mouse=S.mouse,T.engine=S.engine,T.canvas=T.canvas||w(T.options.width,T.options.height),T.context=T.canvas.getContext("2d"),T.textures={},T.bounds=T.bounds||{min:{x:0,y:0},max:{x:T.canvas.width,y:T.canvas.height}},T.controller=s,T.options.showBroadphase=!1,T.options.pixelRatio!==1&&s.setPixelRatio(T,T.options.pixelRatio),a.isElement(T.element)&&T.element.appendChild(T.canvas),T},s.run=function(S){(function R(T){S.frameRequestId=h(R),m(S,T),s.world(S,T),S.context.setTransform(S.options.pixelRatio,0,0,S.options.pixelRatio,0,0),(S.options.showStats||S.options.showDebug)&&s.stats(S,S.context,T),(S.options.showPerformance||S.options.showDebug)&&s.performance(S,S.context,T),S.context.setTransform(1,0,0,1,0,0)})()},s.stop=function(S){g(S.frameRequestId)},s.setPixelRatio=function(S,R){var T=S.options,y=S.canvas;R==="auto"&&(R=x(y)),T.pixelRatio=R,y.setAttribute("data-pixel-ratio",R),y.width=T.width*R,y.height=T.height*R,y.style.width=T.width+"px",y.style.height=T.height+"px"},s.setSize=function(S,R,T){S.options.width=R,S.options.height=T,S.bounds.max.x=S.bounds.min.x+R,S.bounds.max.y=S.bounds.min.y+T,S.options.pixelRatio!==1?s.setPixelRatio(S,S.options.pixelRatio):(S.canvas.width=R,S.canvas.height=T)},s.lookAt=function(S,R,T,y){y=typeof y<"u"?y:!0,R=a.isArray(R)?R:[R],T=T||{x:0,y:0};for(var I={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},C=0;C<R.length;C+=1){var A=R[C],b=A.bounds?A.bounds.min:A.min||A.position||A,D=A.bounds?A.bounds.max:A.max||A.position||A;b&&D&&(b.x<I.min.x&&(I.min.x=b.x),D.x>I.max.x&&(I.max.x=D.x),b.y<I.min.y&&(I.min.y=b.y),D.y>I.max.y&&(I.max.y=D.y))}var B=I.max.x-I.min.x+2*T.x,O=I.max.y-I.min.y+2*T.y,K=S.canvas.height,U=S.canvas.width,F=U/K,z=B/O,Q=1,J=1;z>F?J=z/F:Q=F/z,S.options.hasBounds=!0,S.bounds.min.x=I.min.x,S.bounds.max.x=I.min.x+B*Q,S.bounds.min.y=I.min.y,S.bounds.max.y=I.min.y+O*J,y&&(S.bounds.min.x+=B*.5-B*Q*.5,S.bounds.max.x+=B*.5-B*Q*.5,S.bounds.min.y+=O*.5-O*J*.5,S.bounds.max.y+=O*.5-O*J*.5),S.bounds.min.x-=T.x,S.bounds.max.x-=T.x,S.bounds.min.y-=T.y,S.bounds.max.y-=T.y,S.mouse&&(p.setScale(S.mouse,{x:(S.bounds.max.x-S.bounds.min.x)/S.canvas.width,y:(S.bounds.max.y-S.bounds.min.y)/S.canvas.height}),p.setOffset(S.mouse,S.bounds.min))},s.startViewTransform=function(S){var R=S.bounds.max.x-S.bounds.min.x,T=S.bounds.max.y-S.bounds.min.y,y=R/S.options.width,I=T/S.options.height;S.context.setTransform(S.options.pixelRatio/y,0,0,S.options.pixelRatio/I,0,0),S.context.translate(-S.bounds.min.x,-S.bounds.min.y)},s.endViewTransform=function(S){S.context.setTransform(S.options.pixelRatio,0,0,S.options.pixelRatio,0,0)},s.world=function(S,R){var T=a.now(),y=S.engine,I=y.world,C=S.canvas,A=S.context,b=S.options,D=S.timing,B=l.allBodies(I),O=l.allConstraints(I),K=b.wireframes?b.wireframeBackground:b.background,U=[],F=[],z,Q={timestamp:y.timing.timestamp};if(c.trigger(S,"beforeRender",Q),S.currentBackground!==K&&k(S,K),A.globalCompositeOperation="source-in",A.fillStyle="transparent",A.fillRect(0,0,C.width,C.height),A.globalCompositeOperation="source-over",b.hasBounds){for(z=0;z<B.length;z++){var J=B[z];u.overlaps(J.bounds,S.bounds)&&U.push(J)}for(z=0;z<O.length;z++){var H=O[z],X=H.bodyA,he=H.bodyB,de=H.pointA,Z=H.pointB;X&&(de=f.add(X.position,H.pointA)),he&&(Z=f.add(he.position,H.pointB)),!(!de||!Z)&&(u.contains(S.bounds,de)||u.contains(S.bounds,Z))&&F.push(H)}s.startViewTransform(S),S.mouse&&(p.setScale(S.mouse,{x:(S.bounds.max.x-S.bounds.min.x)/S.options.width,y:(S.bounds.max.y-S.bounds.min.y)/S.options.height}),p.setOffset(S.mouse,S.bounds.min))}else F=O,U=B,S.options.pixelRatio!==1&&S.context.setTransform(S.options.pixelRatio,0,0,S.options.pixelRatio,0,0);!b.wireframes||y.enableSleeping&&b.showSleeping?s.bodies(S,U,A):(b.showConvexHulls&&s.bodyConvexHulls(S,U,A),s.bodyWireframes(S,U,A)),b.showBounds&&s.bodyBounds(S,U,A),(b.showAxes||b.showAngleIndicator)&&s.bodyAxes(S,U,A),b.showPositions&&s.bodyPositions(S,U,A),b.showVelocity&&s.bodyVelocity(S,U,A),b.showIds&&s.bodyIds(S,U,A),b.showSeparations&&s.separations(S,y.pairs.list,A),b.showCollisions&&s.collisions(S,y.pairs.list,A),b.showVertexNumbers&&s.vertexNumbers(S,U,A),b.showMousePosition&&s.mousePosition(S,S.mouse,A),s.constraints(F,A),b.hasBounds&&s.endViewTransform(S),c.trigger(S,"afterRender",Q),D.lastElapsed=a.now()-T},s.stats=function(S,R,T){for(var y=S.engine,I=y.world,C=l.allBodies(I),A=0,b=55,D=44,B=0,O=0,K=0;K<C.length;K+=1)A+=C[K].parts.length;var U={Part:A,Body:C.length,Cons:l.allConstraints(I).length,Comp:l.allComposites(I).length,Pair:y.pairs.list.length};R.fillStyle="#0e0f19",R.fillRect(B,O,b*5.5,D),R.font="12px Arial",R.textBaseline="top",R.textAlign="right";for(var F in U){var z=U[F];R.fillStyle="#aaa",R.fillText(F,B+b,O+8),R.fillStyle="#eee",R.fillText(z,B+b,O+26),B+=b}},s.performance=function(S,R){var T=S.engine,y=S.timing,I=y.deltaHistory,C=y.elapsedHistory,A=y.timestampElapsedHistory,b=y.engineDeltaHistory,D=y.engineUpdatesHistory,B=y.engineElapsedHistory,O=T.timing.lastUpdatesPerFrame,K=T.timing.lastDelta,U=v(I),F=v(C),z=v(b),Q=v(D),J=v(B),H=v(A),X=H/U||0,he=Math.round(U/K),de=1e3/U||0,Z=4,q=12,te=60,xe=34,ie=10,Ie=69;R.fillStyle="#0e0f19",R.fillRect(0,50,q*5+te*6+22,xe),s.status(R,ie,Ie,te,Z,I.length,Math.round(de)+" fps",de/s._goodFps,function(_e){return I[_e]/U-1}),s.status(R,ie+q+te,Ie,te,Z,b.length,K.toFixed(2)+" dt",s._goodDelta/K,function(_e){return b[_e]/z-1}),s.status(R,ie+(q+te)*2,Ie,te,Z,D.length,O+" upf",Math.pow(a.clamp(Q/he||1,0,1),4),function(_e){return D[_e]/Q-1}),s.status(R,ie+(q+te)*3,Ie,te,Z,B.length,J.toFixed(2)+" ut",1-O*J/s._goodFps,function(_e){return B[_e]/J-1}),s.status(R,ie+(q+te)*4,Ie,te,Z,C.length,F.toFixed(2)+" rt",1-F/s._goodFps,function(_e){return C[_e]/F-1}),s.status(R,ie+(q+te)*5,Ie,te,Z,A.length,X.toFixed(2)+" x",X*X*X,function(_e){return(A[_e]/I[_e]/X||0)-1})},s.status=function(S,R,T,y,I,C,A,b,D){S.strokeStyle="#888",S.fillStyle="#444",S.lineWidth=1,S.fillRect(R,T+7,y,1),S.beginPath(),S.moveTo(R,T+7-I*a.clamp(.4*D(0),-2,2));for(var B=0;B<y;B+=1)S.lineTo(R+B,T+7-(B<C?I*a.clamp(.4*D(B),-2,2):0));S.stroke(),S.fillStyle="hsl("+a.clamp(25+95*b,0,120)+",100%,60%)",S.fillRect(R,T-7,4,4),S.font="12px Arial",S.textBaseline="middle",S.textAlign="right",S.fillStyle="#eee",S.fillText(A,R+y,T-5)},s.constraints=function(S,R){for(var T=R,y=0;y<S.length;y++){var I=S[y];if(!(!I.render.visible||!I.pointA||!I.pointB)){var C=I.bodyA,A=I.bodyB,b,D;if(C?b=f.add(C.position,I.pointA):b=I.pointA,I.render.type==="pin")T.beginPath(),T.arc(b.x,b.y,3,0,2*Math.PI),T.closePath();else{if(A?D=f.add(A.position,I.pointB):D=I.pointB,T.beginPath(),T.moveTo(b.x,b.y),I.render.type==="spring")for(var B=f.sub(D,b),O=f.perp(f.normalise(B)),K=Math.ceil(a.clamp(I.length/5,12,20)),U,F=1;F<K;F+=1)U=F%2===0?1:-1,T.lineTo(b.x+B.x*(F/K)+O.x*U*4,b.y+B.y*(F/K)+O.y*U*4);T.lineTo(D.x,D.y)}I.render.lineWidth&&(T.lineWidth=I.render.lineWidth,T.strokeStyle=I.render.strokeStyle,T.stroke()),I.render.anchors&&(T.fillStyle=I.render.strokeStyle,T.beginPath(),T.arc(b.x,b.y,3,0,2*Math.PI),T.arc(D.x,D.y,3,0,2*Math.PI),T.closePath(),T.fill())}}},s.bodies=function(S,R,T){var y=T;S.engine;var I=S.options,C=I.showInternalEdges||!I.wireframes,A,b,D,B;for(D=0;D<R.length;D++)if(A=R[D],!!A.render.visible){for(B=A.parts.length>1?1:0;B<A.parts.length;B++)if(b=A.parts[B],!!b.render.visible){if(I.showSleeping&&A.isSleeping?y.globalAlpha=.5*b.render.opacity:b.render.opacity!==1&&(y.globalAlpha=b.render.opacity),b.render.sprite&&b.render.sprite.texture&&!I.wireframes){var O=b.render.sprite,K=E(S,O.texture);y.translate(b.position.x,b.position.y),y.rotate(b.angle),y.drawImage(K,K.width*-O.xOffset*O.xScale,K.height*-O.yOffset*O.yScale,K.width*O.xScale,K.height*O.yScale),y.rotate(-b.angle),y.translate(-b.position.x,-b.position.y)}else{if(b.circleRadius)y.beginPath(),y.arc(b.position.x,b.position.y,b.circleRadius,0,2*Math.PI);else{y.beginPath(),y.moveTo(b.vertices[0].x,b.vertices[0].y);for(var U=1;U<b.vertices.length;U++)!b.vertices[U-1].isInternal||C?y.lineTo(b.vertices[U].x,b.vertices[U].y):y.moveTo(b.vertices[U].x,b.vertices[U].y),b.vertices[U].isInternal&&!C&&y.moveTo(b.vertices[(U+1)%b.vertices.length].x,b.vertices[(U+1)%b.vertices.length].y);y.lineTo(b.vertices[0].x,b.vertices[0].y),y.closePath()}I.wireframes?(y.lineWidth=1,y.strokeStyle=S.options.wireframeStrokeStyle,y.stroke()):(y.fillStyle=b.render.fillStyle,b.render.lineWidth&&(y.lineWidth=b.render.lineWidth,y.strokeStyle=b.render.strokeStyle,y.stroke()),y.fill())}y.globalAlpha=1}}},s.bodyWireframes=function(S,R,T){var y=T,I=S.options.showInternalEdges,C,A,b,D,B;for(y.beginPath(),b=0;b<R.length;b++)if(C=R[b],!!C.render.visible)for(B=C.parts.length>1?1:0;B<C.parts.length;B++){for(A=C.parts[B],y.moveTo(A.vertices[0].x,A.vertices[0].y),D=1;D<A.vertices.length;D++)!A.vertices[D-1].isInternal||I?y.lineTo(A.vertices[D].x,A.vertices[D].y):y.moveTo(A.vertices[D].x,A.vertices[D].y),A.vertices[D].isInternal&&!I&&y.moveTo(A.vertices[(D+1)%A.vertices.length].x,A.vertices[(D+1)%A.vertices.length].y);y.lineTo(A.vertices[0].x,A.vertices[0].y)}y.lineWidth=1,y.strokeStyle=S.options.wireframeStrokeStyle,y.stroke()},s.bodyConvexHulls=function(S,R,T){var y=T,I,C,A;for(y.beginPath(),C=0;C<R.length;C++)if(I=R[C],!(!I.render.visible||I.parts.length===1)){for(y.moveTo(I.vertices[0].x,I.vertices[0].y),A=1;A<I.vertices.length;A++)y.lineTo(I.vertices[A].x,I.vertices[A].y);y.lineTo(I.vertices[0].x,I.vertices[0].y)}y.lineWidth=1,y.strokeStyle="rgba(255,255,255,0.2)",y.stroke()},s.vertexNumbers=function(S,R,T){var y=T,I,C,A;for(I=0;I<R.length;I++){var b=R[I].parts;for(A=b.length>1?1:0;A<b.length;A++){var D=b[A];for(C=0;C<D.vertices.length;C++)y.fillStyle="rgba(255,255,255,0.2)",y.fillText(I+"_"+C,D.position.x+(D.vertices[C].x-D.position.x)*.8,D.position.y+(D.vertices[C].y-D.position.y)*.8)}}},s.mousePosition=function(S,R,T){var y=T;y.fillStyle="rgba(255,255,255,0.8)",y.fillText(R.position.x+"  "+R.position.y,R.position.x+5,R.position.y-5)},s.bodyBounds=function(S,R,T){var y=T;S.engine;var I=S.options;y.beginPath();for(var C=0;C<R.length;C++){var A=R[C];if(A.render.visible)for(var b=R[C].parts,D=b.length>1?1:0;D<b.length;D++){var B=b[D];y.rect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}I.wireframes?y.strokeStyle="rgba(255,255,255,0.08)":y.strokeStyle="rgba(0,0,0,0.1)",y.lineWidth=1,y.stroke()},s.bodyAxes=function(S,R,T){var y=T;S.engine;var I=S.options,C,A,b,D;for(y.beginPath(),A=0;A<R.length;A++){var B=R[A],O=B.parts;if(B.render.visible)if(I.showAxes)for(b=O.length>1?1:0;b<O.length;b++)for(C=O[b],D=0;D<C.axes.length;D++){var K=C.axes[D];y.moveTo(C.position.x,C.position.y),y.lineTo(C.position.x+K.x*20,C.position.y+K.y*20)}else for(b=O.length>1?1:0;b<O.length;b++)for(C=O[b],D=0;D<C.axes.length;D++)y.moveTo(C.position.x,C.position.y),y.lineTo((C.vertices[0].x+C.vertices[C.vertices.length-1].x)/2,(C.vertices[0].y+C.vertices[C.vertices.length-1].y)/2)}I.wireframes?(y.strokeStyle="indianred",y.lineWidth=1):(y.strokeStyle="rgba(255, 255, 255, 0.4)",y.globalCompositeOperation="overlay",y.lineWidth=2),y.stroke(),y.globalCompositeOperation="source-over"},s.bodyPositions=function(S,R,T){var y=T;S.engine;var I=S.options,C,A,b,D;for(y.beginPath(),b=0;b<R.length;b++)if(C=R[b],!!C.render.visible)for(D=0;D<C.parts.length;D++)A=C.parts[D],y.arc(A.position.x,A.position.y,3,0,2*Math.PI,!1),y.closePath();for(I.wireframes?y.fillStyle="indianred":y.fillStyle="rgba(0,0,0,0.5)",y.fill(),y.beginPath(),b=0;b<R.length;b++)C=R[b],C.render.visible&&(y.arc(C.positionPrev.x,C.positionPrev.y,2,0,2*Math.PI,!1),y.closePath());y.fillStyle="rgba(255,165,0,0.8)",y.fill()},s.bodyVelocity=function(S,R,T){var y=T;y.beginPath();for(var I=0;I<R.length;I++){var C=R[I];if(C.render.visible){var A=o.getVelocity(C);y.moveTo(C.position.x,C.position.y),y.lineTo(C.position.x+A.x,C.position.y+A.y)}}y.lineWidth=3,y.strokeStyle="cornflowerblue",y.stroke()},s.bodyIds=function(S,R,T){var y=T,I,C;for(I=0;I<R.length;I++)if(R[I].render.visible){var A=R[I].parts;for(C=A.length>1?1:0;C<A.length;C++){var b=A[C];y.font="12px Arial",y.fillStyle="rgba(255,255,255,0.5)",y.fillText(b.id,b.position.x+10,b.position.y-10)}}},s.collisions=function(S,R,T){var y=T,I=S.options,C,A,b,D;for(y.beginPath(),b=0;b<R.length;b++)if(C=R[b],!!C.isActive)for(A=C.collision,D=0;D<C.contactCount;D++){var B=C.contacts[D],O=B.vertex;y.rect(O.x-1.5,O.y-1.5,3.5,3.5)}for(I.wireframes?y.fillStyle="rgba(255,255,255,0.7)":y.fillStyle="orange",y.fill(),y.beginPath(),b=0;b<R.length;b++)if(C=R[b],!!C.isActive&&(A=C.collision,C.contactCount>0)){var K=C.contacts[0].vertex.x,U=C.contacts[0].vertex.y;C.contactCount===2&&(K=(C.contacts[0].vertex.x+C.contacts[1].vertex.x)/2,U=(C.contacts[0].vertex.y+C.contacts[1].vertex.y)/2),A.bodyB===A.supports[0].body||A.bodyA.isStatic===!0?y.moveTo(K-A.normal.x*8,U-A.normal.y*8):y.moveTo(K+A.normal.x*8,U+A.normal.y*8),y.lineTo(K,U)}I.wireframes?y.strokeStyle="rgba(255,165,0,0.7)":y.strokeStyle="orange",y.lineWidth=1,y.stroke()},s.separations=function(S,R,T){var y=T,I=S.options,C,A,b,D,B;for(y.beginPath(),B=0;B<R.length;B++)if(C=R[B],!!C.isActive){A=C.collision,b=A.bodyA,D=A.bodyB;var O=1;!D.isStatic&&!b.isStatic&&(O=.5),D.isStatic&&(O=0),y.moveTo(D.position.x,D.position.y),y.lineTo(D.position.x-A.penetration.x*O,D.position.y-A.penetration.y*O),O=1,!D.isStatic&&!b.isStatic&&(O=.5),b.isStatic&&(O=0),y.moveTo(b.position.x,b.position.y),y.lineTo(b.position.x+A.penetration.x*O,b.position.y+A.penetration.y*O)}I.wireframes?y.strokeStyle="rgba(255,165,0,0.5)":y.strokeStyle="orange",y.stroke()},s.inspector=function(S,R){S.engine;var T=S.selected,y=S.render,I=y.options,C;if(I.hasBounds){var A=y.bounds.max.x-y.bounds.min.x,b=y.bounds.max.y-y.bounds.min.y,D=A/y.options.width,B=b/y.options.height;R.scale(1/D,1/B),R.translate(-y.bounds.min.x,-y.bounds.min.y)}for(var O=0;O<T.length;O++){var K=T[O].data;switch(R.translate(.5,.5),R.lineWidth=1,R.strokeStyle="rgba(255,165,0,0.9)",R.setLineDash([1,2]),K.type){case"body":C=K.bounds,R.beginPath(),R.rect(Math.floor(C.min.x-3),Math.floor(C.min.y-3),Math.floor(C.max.x-C.min.x+6),Math.floor(C.max.y-C.min.y+6)),R.closePath(),R.stroke();break;case"constraint":var U=K.pointA;K.bodyA&&(U=K.pointB),R.beginPath(),R.arc(U.x,U.y,10,0,2*Math.PI),R.closePath(),R.stroke();break}R.setLineDash([]),R.translate(-.5,-.5)}S.selectStart!==null&&(R.translate(.5,.5),R.lineWidth=1,R.strokeStyle="rgba(255,165,0,0.6)",R.fillStyle="rgba(255,165,0,0.1)",C=S.selectBounds,R.beginPath(),R.rect(Math.floor(C.min.x),Math.floor(C.min.y),Math.floor(C.max.x-C.min.x),Math.floor(C.max.y-C.min.y)),R.closePath(),R.stroke(),R.fill(),R.translate(-.5,-.5)),I.hasBounds&&R.setTransform(1,0,0,1,0,0)};var m=function(S,R){var T=S.engine,y=S.timing,I=y.historySize,C=T.timing.timestamp;y.delta=R-y.lastTime||s._goodDelta,y.lastTime=R,y.timestampElapsed=C-y.lastTimestamp||0,y.lastTimestamp=C,y.deltaHistory.unshift(y.delta),y.deltaHistory.length=Math.min(y.deltaHistory.length,I),y.engineDeltaHistory.unshift(T.timing.lastDelta),y.engineDeltaHistory.length=Math.min(y.engineDeltaHistory.length,I),y.timestampElapsedHistory.unshift(y.timestampElapsed),y.timestampElapsedHistory.length=Math.min(y.timestampElapsedHistory.length,I),y.engineUpdatesHistory.unshift(T.timing.lastUpdatesPerFrame),y.engineUpdatesHistory.length=Math.min(y.engineUpdatesHistory.length,I),y.engineElapsedHistory.unshift(T.timing.lastElapsed),y.engineElapsedHistory.length=Math.min(y.engineElapsedHistory.length,I),y.elapsedHistory.unshift(y.lastElapsed),y.elapsedHistory.length=Math.min(y.elapsedHistory.length,I)},v=function(S){for(var R=0,T=0;T<S.length;T+=1)R+=S[T];return R/S.length||0},w=function(S,R){var T=document.createElement("canvas");return T.width=S,T.height=R,T.oncontextmenu=function(){return!1},T.onselectstart=function(){return!1},T},x=function(S){var R=S.getContext("2d"),T=window.devicePixelRatio||1,y=R.webkitBackingStorePixelRatio||R.mozBackingStorePixelRatio||R.msBackingStorePixelRatio||R.oBackingStorePixelRatio||R.backingStorePixelRatio||1;return T/y},E=function(S,R){var T=S.textures[R];return T||(T=S.textures[R]=new Image,T.src=R,T)},k=function(S,R){var T=R;/(jpg|gif|png)$/.test(R)&&(T="url("+R+")"),S.canvas.style.background=T,S.canvas.style.backgroundSize="contain",S.currentBackground=R}})()},function(n,r,i){var s={};n.exports=s;var o=i(5),a=i(17),l=i(0);(function(){s._maxFrameDelta=1e3/15,s._frameDeltaFallback=1e3/60,s._timeBufferMargin=1.5,s._elapsedNextEstimate=1,s._smoothingLowerBound=.1,s._smoothingUpperBound=.9,s.create=function(c){var f={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},p=l.extend(f,c);return p.fps=0,p},s.run=function(c,f){return c.timeBuffer=s._frameDeltaFallback,function p(h){c.frameRequestId=s._onNextFrame(c,p),h&&c.enabled&&s.tick(c,f,h)}(),c},s.tick=function(c,f,p){var h=l.now(),g=c.delta,m=0,v=p-c.timeLastTick;if((!v||!c.timeLastTick||v>Math.max(s._maxFrameDelta,c.maxFrameTime))&&(v=c.frameDelta||s._frameDeltaFallback),c.frameDeltaSmoothing){c.frameDeltaHistory.push(v),c.frameDeltaHistory=c.frameDeltaHistory.slice(-c.frameDeltaHistorySize);var w=c.frameDeltaHistory.slice(0).sort(),x=c.frameDeltaHistory.slice(w.length*s._smoothingLowerBound,w.length*s._smoothingUpperBound),E=u(x);v=E||v}c.frameDeltaSnapping&&(v=1e3/Math.round(1e3/v)),c.frameDelta=v,c.timeLastTick=p,c.timeBuffer+=c.frameDelta,c.timeBuffer=l.clamp(c.timeBuffer,0,c.frameDelta+g*s._timeBufferMargin),c.lastUpdatesDeferred=0;var k=c.maxUpdates||Math.ceil(c.maxFrameTime/g),S={timestamp:f.timing.timestamp};o.trigger(c,"beforeTick",S),o.trigger(c,"tick",S);for(var R=l.now();g>0&&c.timeBuffer>=g*s._timeBufferMargin;){o.trigger(c,"beforeUpdate",S),a.update(f,g),o.trigger(c,"afterUpdate",S),c.timeBuffer-=g,m+=1;var T=l.now()-h,y=l.now()-R,I=T+s._elapsedNextEstimate*y/m;if(m>=k||I>c.maxFrameTime){c.lastUpdatesDeferred=Math.round(Math.max(0,c.timeBuffer/g-s._timeBufferMargin));break}}f.timing.lastUpdatesPerFrame=m,o.trigger(c,"afterTick",S),c.frameDeltaHistory.length>=100&&(c.lastUpdatesDeferred&&Math.round(c.frameDelta/g)>k?l.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):c.lastUpdatesDeferred&&l.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof c.isFixed<"u"&&l.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(c.deltaMin||c.deltaMax)&&l.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),c.fps!==0&&l.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},s.stop=function(c){s._cancelNextFrame(c)},s._onNextFrame=function(c,f){if(typeof window<"u"&&window.requestAnimationFrame)c.frameRequestId=window.requestAnimationFrame(f);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return c.frameRequestId},s._cancelNextFrame=function(c){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(c.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var u=function(c){for(var f=0,p=c.length,h=0;h<p;h+=1)f+=c[h];return f/p||0}})()},function(n,r,i){var s={};n.exports=s;var o=i(8),a=i(0),l=a.deprecated;(function(){s.collides=function(u,c){return o.collides(u,c)},l(s,"collides","SAT.collides ➤ replaced by Collision.collides")})()},function(n,r,i){var s={};n.exports=s,i(1);var o=i(0);(function(){s.pathToVertices=function(a,l){typeof window<"u"&&!("SVGPathSeg"in window)&&o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var u,c,f,p,h,g,m,v,w,x,E=[],k,S,R=0,T=0,y=0;l=l||15;var I=function(A,b,D){var B=D%2===1&&D>1;if(!w||A!=w.x||b!=w.y){w&&B?(k=w.x,S=w.y):(k=0,S=0);var O={x:k+A,y:S+b};(B||!w)&&(w=O),E.push(O),T=k+A,y=S+b}},C=function(A){var b=A.pathSegTypeAsLetter.toUpperCase();if(b!=="Z"){switch(b){case"M":case"L":case"T":case"C":case"S":case"Q":T=A.x,y=A.y;break;case"H":T=A.x;break;case"V":y=A.y;break}I(T,y,A.pathSegType)}};for(s._svgPathToAbsolute(a),f=a.getTotalLength(),g=[],u=0;u<a.pathSegList.numberOfItems;u+=1)g.push(a.pathSegList.getItem(u));for(m=g.concat();R<f;){if(x=a.getPathSegAtLength(R),h=g[x],h!=v){for(;m.length&&m[0]!=h;)C(m.shift());v=h}switch(h.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":p=a.getPointAtLength(R),I(p.x,p.y,0);break}R+=l}for(u=0,c=m.length;u<c;++u)C(m[u]);return E},s._svgPathToAbsolute=function(a){for(var l,u,c,f,p,h,g=a.pathSegList,m=0,v=0,w=g.numberOfItems,x=0;x<w;++x){var E=g.getItem(x),k=E.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(k))"x"in E&&(m=E.x),"y"in E&&(v=E.y);else switch("x1"in E&&(c=m+E.x1),"x2"in E&&(p=m+E.x2),"y1"in E&&(f=v+E.y1),"y2"in E&&(h=v+E.y2),"x"in E&&(m+=E.x),"y"in E&&(v+=E.y),k){case"m":g.replaceItem(a.createSVGPathSegMovetoAbs(m,v),x);break;case"l":g.replaceItem(a.createSVGPathSegLinetoAbs(m,v),x);break;case"h":g.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(m),x);break;case"v":g.replaceItem(a.createSVGPathSegLinetoVerticalAbs(v),x);break;case"c":g.replaceItem(a.createSVGPathSegCurvetoCubicAbs(m,v,c,f,p,h),x);break;case"s":g.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(m,v,p,h),x);break;case"q":g.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(m,v,c,f),x);break;case"t":g.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(m,v),x);break;case"a":g.replaceItem(a.createSVGPathSegArcAbs(m,v,E.r1,E.r2,E.angle,E.largeArcFlag,E.sweepFlag),x);break;case"z":case"Z":m=l,v=u;break}(k=="M"||k=="m")&&(l=m,u=v)}}})()},function(n,r,i){var s={};n.exports=s;var o=i(6);i(0),function(){s.create=o.create,s.add=o.add,s.remove=o.remove,s.clear=o.clear,s.addComposite=o.addComposite,s.addBody=o.addBody,s.addConstraint=o.addConstraint}()}])})})(SP);var SB=SP.exports;const k1=b1(SB),CB=()=>{const t=M.useRef(null);return M.useEffect(()=>{const{Engine:e,Render:n,Runner:r,Body:i,Composite:s,Mouse:o,MouseConstraint:a,World:l,Bodies:u,Constraint:c}=k1,f=e.create(),p=f.world,h=window.innerWidth<700?window.innerWidth-window.innerWidth*.25:600,g=k1.Render.create({element:t.current,engine:f,options:{width:h,height:700,wireframes:!1,background:"transparent"}});n.run(g);const m=r.create();r.run(m,f);const v=[];let w=0;const x=(b,D,B)=>u.circle(b,D,B,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,render:{fillStyle:"hsl(340, 100%, 70%)",strokeStyle:"rgb(220, 220, 220)",lineWidth:2}}),E=(b,D,B,O,K)=>{const U=s.create({label:"NewtonsCradle"}),F=O*2;for(let z=0;z<B;z++){const Q=x(b+z*F,D+K,O),J=c.create({pointA:{x:b+z*F,y:D},bodyB:Q,pointB:{x:0,y:0},length:K,stiffness:.9,render:{strokeStyle:"rgb(220, 220, 220,1)",lineWidth:1.5}});s.addBody(U,Q),s.addConstraint(U,J),v.push(Q)}return U},k=5,S=21,R=S*2*k,T=h/2-R/2,y=E(T,135,k,S,175);l.add(p,y),i.translate(y.bodies[0],{x:-140,y:-60});const I=o.create(g.canvas),C=a.create(f,{mouse:I,constraint:{stiffness:.2,render:{visible:!1}}});l.add(p,C),g.mouse=I,n.lookAt(g,{min:{x:0,y:0},max:{x:h-50,y:700}});const A=()=>{w=(w+1)%360;const b=`hsl(340, 100%, ${70+Math.sin(w*.1)*7}%)`,D=`hsl(320, 100%, ${40+Math.sin(w*.1)*7}%)`;v.forEach(B=>{B.render.fillStyle=b,B.render.strokeStyle=D}),setTimeout(()=>{requestAnimationFrame(A)},200)};return A(),()=>{n.stop(g),r.stop(m),e.clear(f),g.canvas.remove(),g.canvas=null,g.context=null,g.textures={}}},[]),N.jsx("div",{ref:t,style:{backgroundColor:"rgba(0, 0, 0, 0)"}})},IB=()=>N.jsx("div",{className:"graph__wrapper",children:N.jsxs("svg",{width:"220px",viewBox:"0 0 315 107",version:"1.1",style:{overflow:"visible"},children:[N.jsx("defs",{children:N.jsx("path",{id:"textPath",d:"M1.4,2.1c0,0,86,57,211.5,41.5s172.5-24.5,289,81",fill:"none"})}),N.jsxs("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:[N.jsx("path",{id:"Path-1",className:"path",fill:"none",stroke:"#ea2088",strokeWidth:"3",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M1.4,2.1c0,0,86,57,211.5,41.5s172.5-24.5,289,81"}),N.jsx("path",{className:"dashed",fill:"none",stroke:"#E0E0E0",strokeWidth:"4",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M1.4,2.1c0,0,86,57,211.5,41.5s172.5-24.5,289,81"}),N.jsx("polyline",{id:"arrow",points:"0,-9 18,0 0,9 5,0",fill:"#db5862",children:N.jsx("animateMotion",{rotate:"auto",begin:"1s",dur:"1.6s",repeatCount:"1",fill:"freeze",children:N.jsx("mpath",{href:"#Path-1"})})}),N.jsxs("text",{className:"pointer-events-none arrowText",fill:"#E0E0E0",fontSize:"33",fontFamily:"Arial",transform:"translate(0,-10)",children:[N.jsx("textPath",{href:"#textPath",startOffset:"24%",textAnchor:"middle",children:"My Board"}),N.jsx("animate",{attributeName:"opacity",values:"1;0;1",dur:"4s",repeatCount:"indefinite"})]})]})]})}),PB=()=>N.jsx("div",{className:"graph__wrapper2",children:N.jsx("svg",{width:"220px",viewBox:"0 0 315 107",version:"1.1",style:{overflow:"visible"},children:N.jsxs("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:[N.jsx("path",{id:"Path-1",className:"path",fill:"none",stroke:"#ea2088",strokeWidth:"3",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M1.4,2.1c0,0,86,57,211.5,41.5s172.5-24.5,289,81"}),N.jsx("path",{className:"dashed",fill:"none",stroke:"#E0E0E0",strokeWidth:"4",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M1.4,2.1c0,0,86,57,211.5,41.5s172.5-24.5,289,81"}),N.jsx("polyline",{id:"arrow",points:"0,-9 18,0 0,9 5,0",fill:"#db5862",children:N.jsx("animateMotion",{rotate:"auto",begin:"1s",dur:"1.6s",repeatCount:"1",fill:"freeze",children:N.jsx("mpath",{href:"#Path-1"})})}),N.jsx("text",{className:"pointer-events-none",fill:"#E0E0E0",fontSize:"33",fontFamily:"Arial",transform:"rotate(180, 227.5, 43.5) translate(0,-7)",children:N.jsxs("textPath",{href:"#Path-1",startOffset:"64%",textAnchor:"middle",children:["Shared Boards",N.jsx("animate",{attributeName:"opacity",values:"1;0;1",dur:"4s",repeatCount:"indefinite"})]})})]})})});function AB(){const[t]=GC({words:["Manage Your Tasks","Organize Your Projects","Boost Your Productivity","Plan,Execute,Succeed","Track Your Progress","Collaborate Effortlessly","Get Things Done","Your Work Simplified"],loop:!0,typeSpeed:120,deleteSpeed:90,delaySpeed:3e3}),[e,n]=M.useState(!1),[r,i]=M.useState(1),s=()=>{n(!0),i(a=>(a+1)%3)},o=()=>{n(!1),i(a=>(a-1+3)%3)};return N.jsx("div",{className:"bg-zinc-800 overflow-x-hidden box-border   h-screen flex overflow-y-hidden p-5 justify-center homecontiner",children:N.jsxs("div",{className:"flex sm:w-[100%] mb-2   items-center mt-[40%] sm:shadow-xl  max-w-[800px] flex-col md:mt-[10%]",children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"white",onClick:o,className:"size-9 fixed top-[55%] leftarrow  flex self-start ml-.5 cursor-pointer hover:stroke-gray-300 z-10 ",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"white",onClick:s,className:"size-9 fixed top-[55%] rightarrow  flex self-end mr-.5 cursor-pointer hover:stroke-gray-300 z-10 ",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),N.jsx("div",{className:"workSpaceContainer ",children:N.jsxs(EB,{mode:"wait",children:[r===0&&N.jsx(If.div,{className:"Your-Board",initial:{x:e?window.innerWidth<800?"100%":"70%":window.innerWidth<800?"-100%":"-70%",opacity:0},animate:{x:0,opacity:1},exit:{x:e?window.innerWidth<800?"-100%":"-70%":window.innerWidth<800?"100%":"70%",opacity:0},transition:{duration:.4},children:N.jsx(TB,{})},"workSpace0"),r===1&&N.jsx(If.div,{className:"Your-Board",initial:{x:e?window.innerWidth<800?"100%":"70%":window.innerWidth<800?"-100%":"-70%",opacity:0},animate:{x:"0",opacity:1},exit:{x:e?window.innerWidth<800?"-100%":"-70%":window.innerWidth<800?"100%":"70%",opacity:0},transition:{duration:.4},children:N.jsxs("div",{className:"flex justify-center ",children:[N.jsx("h1",{className:"NewtonsCradleH1 absolute ml-1.5 text-center text-gray-300 top-[13.8%] sm:top-[13.5%] pointer-events-none   text-5xl",children:"   Welcome"}),N.jsxs("h1",{className:" absolute ml-1.5 text-center text-gray-300 top-[14.5%] sm:top-[13.1%] pointer-events-none  sm:text-4xl  text-3xl",children:[t,N.jsx(qC,{})]}),N.jsx("hr",{className:"NewtonsCradleHr"}),N.jsx(IB,{}),N.jsx(PB,{}),N.jsx(CB,{className:"max-w-[70%] w-64"})]})},"yourBoards"),r===2&&N.jsx(If.div,{className:"Your-Board",initial:{x:e?window.innerWidth<800?"100%":"70%":window.innerWidth<800?"-100%":"-70%",opacity:0},animate:{x:0,opacity:1},exit:{x:e?window.innerWidth<800?"-100%":"-70%":window.innerWidth<800?"100%":"70%",opacity:0},transition:{duration:.4},children:N.jsx(YO,{})},"workSpace2")]})})]})})}const RB=()=>N.jsx("div",{id:"box",children:N.jsxs("div",{className:"cat",children:[N.jsxs("div",{className:"head",children:[N.jsxs("div",{className:"ears",children:[N.jsx("div",{className:"ear left"}),N.jsx("div",{className:"ear right"})]}),N.jsxs("div",{className:"eyes",children:[N.jsx("div",{className:"eye left"}),N.jsx("div",{className:"eye right"})]}),N.jsx("div",{className:"muzzle",children:N.jsx("div",{className:"nose"})})]}),N.jsx("div",{className:"body",children:N.jsx("div",{className:"paw"})}),N.jsx("div",{className:"tail absolute",children:N.jsx("div",{className:"tail-segment",children:N.jsx("div",{className:"tail-segment",children:N.jsx("div",{className:"tail-segment",children:N.jsx("div",{className:"tail-segment",children:N.jsx("div",{className:"tail-segment",children:N.jsx("div",{className:"tail-segment",children:N.jsx("div",{className:"tail-segment",children:N.jsx("div",{className:"tail-segment",children:N.jsx("div",{className:"tail-segment",children:N.jsx("div",{className:"tail-segment",children:N.jsx("div",{className:"tail-segment",children:N.jsx("div",{className:"tail-segment",children:N.jsx("div",{className:"tail-segment",children:N.jsx("div",{className:"tail-segment",children:N.jsx("div",{className:"tail-segment",children:N.jsx("div",{className:"tail-segment",children:N.jsx("div",{className:"tail-segment",children:N.jsx("div",{className:"tail-segment",children:N.jsx("div",{className:"tail-segment"})})})})})})})})})})})})})})})})})})})})]})});function kB(){return Cl(),N.jsx("nav",{className:"border-b-2   border-gray-500 h-[46px] sm:h-[47.5Zpx]  bg-zinc-800 text-lg fixed w-screen  z-10",children:N.jsxs("div",{className:"flex justify-between items-center",children:[N.jsxs("div",{className:"flex items-center gap-5",children:[N.jsx(gb,{to:"/Home",children:N.jsxs("div",{className:"text-zinc-50 cursor-pointer flex gap-5  cat catlogo items-center font-bold",children:["   ",N.jsx(RB,{}),"KittyTask"]})}),N.jsx("p",{className:"text-zinc-50 cursor-pointer",children:"Boards"}),N.jsx("p",{className:"text-zinc-50 cursor-pointer",children:"Settings"})]}),N.jsx("div",{className:"flex"})]})})}function bB(){const[t,e]=M.useState(!1),[n,r]=M.useState(""),[i,s]=M.useState(""),[o,a]=M.useState(""),l=Cl(),[u,c]=M.useState(""),[f,p]=M.useState(""),[h,g]=M.useState(""),[m,v]=M.useState(""),w=IS(),x=async T=>{if(T.preventDefault(),a(""),!n||!i){a("Please fill in both email and password.");return}try{const y=await YV(kt,n,i);l("/Home")}catch(y){console.error("Login error:",y),a("Error logging in: "+y.message)}},E=T=>{let y=0;for(let C=0;C<T.length;C++)y=T.charCodeAt(C)+((y<<5)-y);return`hsl(${y%360}, 70%, 80%)`},k=T=>T.split(" ").map(y=>y[0]).join(""),S=async T=>{if(T.preventDefault(),v(""),!u||!f||!h){v("Please fill in all fields (name, email, and password).");return}const y=yC();try{const C=(await QV(y,f,h)).user,A=E(u),b=k(u);await Ll(Ut(w,"users",C.uid),{name:u,email:f,createdAt:new Date,avatar:{color:A,initials:b}}),l("/Home")}catch(I){console.error("Error creating account:",I),v("Error creating account: "+I.message)}},R=()=>{e(!t)};return N.jsx("div",{className:"h-screen  flex justify-center items-center ",children:N.jsxs("div",{className:`flex mx-52 my-auto  p-20 py-52 shadow-2xl justify-center rounded-xl    items-center gap-52 logincontainer ${t?"animate-right":""}`,children:[N.jsxs("div",{className:" flex flex-col justify-center items-center  ",children:[N.jsxs("div",{className:"signinmode flex flex-col justify-start items-center",children:[N.jsx("h1",{className:" text-center text-2xl text-gray-100 mb-2 ",children:"Already have an account?"}),N.jsx("p",{className:"mb-5 text-center text-lg text-gray-100 ",children:"Welcome back! Sign in to continue organizing and making progress."}),N.jsx("button",{onClick:R,className:"bg-blue-500 hover:bg-blue-600 text-gray-100 m-4  py-1.5 px-20 rounded-2xl  text-m",children:"Sign in"}),N.jsx("img",{src:"/cat.svg",className:" hover:scale-110 hover:transform-cpu",alt:"cat"})]}),N.jsxs("form",{className:"singinfrom flex flex-col justify-center items-center",onSubmit:x,children:[N.jsx("h1",{className:" text-2xl text-black font-bold opacity-85 ",children:"Sign in"}),N.jsxs("div",{className:"flex relative",children:[N.jsx("svg",{className:"size-6 absolute top-4 left-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})}),N.jsx("input",{type:"email",placeholder:"Email",className:"bg-neutral-300 bg-opacity-70 p-2 px-9 m-2 text-black  rounded-2xl w-72",onChange:T=>r(T.target.value)})]}),N.jsxs("div",{className:"flex relative",children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",className:"size-6 absolute top-4 left-4",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})}),N.jsx("input",{type:"password",placeholder:"Password",className:"bg-neutral-300 bg-opacity-70 p-2 px-9 m-2 text-black  rounded-2xl w-72",onChange:T=>s(T.target.value)})]}),N.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-600 text-gray-100 m-4  py-1.5 px-9 rounded-2xl  text-m",children:"Sign in"}),o&&N.jsx("p",{className:"text-center text-xs  text-red-600",children:"Oops! It looks like your email or password is incorrect. Please try again."})]})]}),N.jsxs("div",{className:"flex flex-col justify-center items-center  justify-self-end",children:[N.jsxs("div",{className:"signupmode flex flex-col justify-center items-center",children:[N.jsx("h1",{className:" text-center text-2xl text-gray-100 mb-2 ",children:"New to KittyTask??"}),N.jsx("p",{className:"mb-5 text-center text-lg text-gray-100 ",children:"Start organizing your life today! Sign up to manage your tasks, projects, and ideas all in one place."}),N.jsx("button",{onClick:R,className:"bg-blue-500 hover:bg-blue-600 text-gray-100 m-4  py-1.5 px-20 rounded-2xl  text-m",children:"Sign in"}),N.jsx("img",{src:"/cat2.svg",className:" hover:scale-110 hover:transform-cpu",alt:"cat"})]}),N.jsxs("form",{className:"signupfrom flex flex-col  items-center",onSubmit:S,children:[N.jsx("h1",{className:" text-2xl text-black font-bold opacity-85 ",children:"Sign up"}),N.jsxs("div",{className:"flex relative",children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",className:"size-6 absolute top-4 left-4",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})}),N.jsx("input",{type:"text",placeholder:"Username",className:"bg-neutral-300 bg-opacity-70 p-2 px-9 m-2 text-black  rounded-2xl w-72",onChange:T=>c(T.target.value)})]}),N.jsxs("div",{className:"flex relative",children:[N.jsx("svg",{className:"size-6 absolute top-4 left-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})}),N.jsx("input",{type:"email",placeholder:"Email",className:"bg-neutral-300 bg-opacity-70 p-2 px-9 m-2 text-black  rounded-2xl w-72",onChange:T=>p(T.target.value)})]}),N.jsxs("div",{className:"flex relative",children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",className:"size-6 absolute top-4 left-4",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})}),N.jsx("input",{type:"password",placeholder:"Password",className:"bg-neutral-300 bg-opacity-70 p-2 px-9 m-2 text-black  rounded-2xl w-72",onChange:T=>g(T.target.value)})]}),N.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-600 text-gray-100 fm-4  py-1.5 px-9 rounded-2xl  text-m",children:"Sign up"}),m&&N.jsx("p",{className:"text-center text-xs  text-red-600",children:m})]})]})]})})}function DB(){return N.jsx(fb,{children:N.jsx(NB,{})})}function NB(){const t=Po();return N.jsxs("div",{className:"app",children:[t.pathname!=="/"&&N.jsx(kB,{}),N.jsxs(ob,{children:[N.jsx(Zu,{path:"/Home",element:N.jsx(AB,{})}),N.jsx(Zu,{path:"/",element:N.jsx(bB,{})}),N.jsx(Zu,{path:"/Board/:id",element:N.jsx(KO,{})})]})]})}WE(document.getElementById("root")).render(N.jsx(M.StrictMode,{children:N.jsx(yk,{children:N.jsx(DB,{})})}));
